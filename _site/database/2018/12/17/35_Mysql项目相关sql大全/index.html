

 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta name="baidu-site-verification" content="0r55fUD7QR" />
  <meta charset="UTF-8">
    
    
    
    
    <title>mysqlé¡¹ç›®ç›¸å…³sqlå¤§å…¨_ç»ˆèº«å—ç”¨ | HealeJeançš„æ¢¦æƒ³åšå®¢</title>


    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="HealerJean">
    

    
    <!--<%- open_graph({twitter_id: theme.author.twitter, google_plus: theme.author.google_plus}) %>-->

    <meta name="description" content="page.description">
    
    <meta property="og:type" content="article">
    
    <meta property="og:title" content="mysqlé¡¹ç›®ç›¸å…³sqlå¤§å…¨_ç»ˆèº«å—ç”¨">
    <meta property="og:url" content="/database/2018/12/17/35_Mysql%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3sql%E5%A4%A7%E5%85%A8/">
    <meta property="og:site_name" content="HealeJeançš„æ¢¦æƒ³åšå®¢">
    <meta property="og:description" content="Mysqlé¡¹ç›®ç›¸å…³sqlå¤§å…¨_ç»ˆèº«å—ç”¨">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="mysqlé¡¹ç›®ç›¸å…³sqlå¤§å…¨_ç»ˆèº«å—ç”¨">
    <meta name="twitter:description" content="page.description">
    <meta name="twitter:creator" content="@mxzdhealer">
    <link rel="publisher" href="">

    
    <link rel="alternative" href="/atom.xml" title="HealeJeançš„æ¢¦æƒ³åšå®¢" type="application/atom+xml">
    
    
    <link rel="icon" href="/assets/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/assets/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/assets/img/jacman.jpg">
    

    <link rel="stylesheet" href="/assets/css/style.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/highlight.css" type="text/css">
    
    
  <!-- ç™¾åº¦ç»Ÿè®¡ -->
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?19549885065170e0019f01e9975dfc1d";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <!-- ç™¾åº¦è”ç›Ÿ -->
    <meta name="baidu_union_verify" content="c2f387067cf0849991ea870f73c055f2">
  
</head>

  <body>
    <header>
        <div>
		    
			<div id="imglogo">
				<a href="/"><img src="/assets/img/logo.png" alt="HealeJeançš„æ¢¦æƒ³åšå®¢" title="HealeJeançš„æ¢¦æƒ³åšå®¢"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="HealeJeançš„æ¢¦æƒ³åšå®¢">HealeJeançš„æ¢¦æƒ³åšå®¢</a></h1>
				<h2 class="blog-motto">ä¸€ä¸ªé«˜çº§è½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆçš„æˆé•¿ä¹‹è·¯</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">ä¸»é¡µ</a></li>
					
						<li><a href="/categories">æŠ€æœ¯</a></li>
					
						<li><a href="/archives">å½’æ¡£</a></li>
					
						<li><a href="/categories/#Job">ç”Ÿæ´»æ—¥è®°</a></li>
					
						<li><a href="/about">ä¸ªäººç®€å†</a></li>
					
						<li><a href="/friends">å‹æƒ…é“¾æ¥</a></li>
					
					<li>
 					
					<form class="search" action="/search" method="get" accept-charset="utf-8">
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="æœç´¢" />
					</form>
					
					</li>
				</ul>
			</nav>
</div>

    </header>
    <div id="container">
      



<div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
	<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/database/2018/12/17/35_Mysql%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3sql%E5%A4%A7%E5%85%A8/" title="mysqlé¡¹ç›®ç›¸å…³sqlå¤§å…¨_ç»ˆèº«å—ç”¨" itemprop="url">mysqlé¡¹ç›®ç›¸å…³sqlå¤§å…¨_ç»ˆèº«å—ç”¨</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="HealerJean" target="_blank" itemprop="author">HealerJean</a>
		
  <p class="article-time">
    <time datetime="2018-12-17 11:33:00 +0800" itemprop="datePublished"> å‘è¡¨äº 2018-12-17</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article toc-content" style="display: none;">
		
			<!--<%- toc(item.content) %>-->
		
		</div>
		
		<!-- image url 
https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages
ã€€ã€€é¦–è¡Œç¼©è¿›
<font color="red">  </font>

<font  color="red" size="4">   </font>


<font size="4">   </font>
-->

<h2 id="1mapç±»å‹çš„æ•°æ®è¿›è¡Œinsetæ’å…¥">1ã€Mapç±»å‹çš„æ•°æ®è¿›è¡Œinsetæ’å…¥</h2>

<p>æœ‰æ—¶å€™éœ€è¦ç®€å•åœ°æŠŠä¸€ä¸ªMapä¸­æ‰€æœ‰çš„keyå’Œvalueè·å–å‡ºæ¥ï¼Œæ‹¼åˆ°sqlè¯­å¥ä¸­ã€‚MyBatisæä¾›çš„ä¸€ç§æ–¹æ³•æ˜¯éå†Mapä¸­çš„entrySetï¼Œç„¶åæŠŠkeyæ‰”è¿›indexé‡Œé¢ï¼Œvalueæ‰”è¿›itemä¸­ã€‚å…·ä½“çš„ä¸€ä¸ªä½¿ç”¨çš„ä¾‹å­å¦‚ä¸‹ï¼š</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;insert</span><span class="err">Â </span><span class="na">id=</span><span class="s">"operationName"</span><span class="err">Â </span><span class="na">parameterType=</span><span class="s">"map"</span><span class="nt">&gt;</span>Â Â 
	Â Â Â Â INSERTÂ INTOÂ table_name(hot_word,Â cnt)Â Â 
	Â Â Â Â VALUESÂ Â 
	Â Â Â Â <span class="nt">&lt;foreach</span><span class="err">Â </span><span class="na">item=</span><span class="s">"value"</span><span class="err">Â </span><span class="na">index=</span><span class="s">"key"</span><span class="err">Â </span><span class="na">collection=</span><span class="s">"mapData.entrySet()"</span><span class="err">Â </span><span class="na">open=</span><span class="s">"("</span><span class="err">Â </span><span class="na">separator=</span><span class="s">"),("</span><span class="err">Â </span><span class="na">close=</span><span class="s">")"</span><span class="nt">&gt;</span>Â Â 
	Â Â Â Â Â Â Â Â #{key},Â #{value}Â Â 
	Â Â Â Â <span class="nt">&lt;/foreach&gt;</span>Â Â 
	Â Â Â Â ONÂ DUPLICATEÂ KEYÂ UPDATEÂ Â 
	Â Â Â Â cnt=VALUES(cnt)Â Â 
<span class="nt">&lt;/insert&gt;</span>
</code></pre></div></div>

<h2 id="2è·å–æ•°æ®ç»“æœä¸ºlistmapstringobject">2ã€è·å–æ•°æ®ç»“æœä¸º<code class="highlighter-rouge">list&lt;map&lt;String,Object&gt;&gt;</code></h2>

<h3 id="1mapper">1ã€mapper</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">HealerJeanMapper</span> <span class="o">{</span>

     <span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Object</span><span class="o">&gt;&gt;</span> <span class="nf">sqlMap</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="2mapperxml">2ã€mapper.xml</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"sqlMap"</span> <span class="na">resultType=</span><span class="s">"java.util.HashMap"</span><span class="nt">&gt;</span>
  SELECT h.id as id ,h.subject as subject FROM  healerjean  h;
<span class="nt">&lt;/select&gt;</span>

</code></pre></div></div>

<h3 id="3è§£é‡Š">3ã€è§£é‡Šï¼š</h3>

<p>1ã€è¿”å›ç±»å‹å¿…é¡»æ˜¯java.util.HashMap
2ã€mapä¸­çš„value å¿…é¡»æ˜¯Objecrt</p>

<h3 id="4controlleræµ‹è¯•">4ã€controlleræµ‹è¯•</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"sqlMap"</span><span class="o">)</span>
<span class="nd">@ResponseBody</span>
<span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Object</span><span class="o">&gt;&gt;</span> <span class="nf">sqlMap</span><span class="o">(){</span>
    <span class="k">return</span> <span class="n">healerJeanMapper</span><span class="o">.</span><span class="na">sqlMap</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/WEFASDFUMM.png" alt="" /></p>

<h2 id="3mybatis-è‡ªå®šä¹‰å‚æ•°è¿”å›ç±»å‹map">3ã€mybatis è‡ªå®šä¹‰å‚æ•°ã€è¿”å›ç±»å‹map</h2>

<p>1ã€å‚æ•°</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"getUserCount"</span> <span class="na">parameterMap=</span><span class="s">"getUserCountMap"</span> <span class="na">statementType=</span><span class="s">"CALLABLE"</span><span class="na">resultType=</span><span class="s">"java.util.HashMap
&gt;
        CALL ges_user_count(?,?)
 &lt;/select&gt;     

&lt;parameterMap type="</span><span class="err">java.util.Map"</span> <span class="na">id=</span><span class="s">"getUserCountMap"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;parameter</span> <span class="na">property=</span><span class="s">"sexid"</span> <span class="na">mode=</span><span class="s">"IN"</span> <span class="na">jdbcType=</span><span class="s">"INTEGER"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;parameter</span> <span class="na">property=</span><span class="s">"userCount"</span> <span class="na">mode=</span><span class="s">"OUT"</span> <span class="na">jdbcType=</span><span class="s">"INTEGER"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/parameterMap&gt;</span>

</code></pre></div></div>

<p>2ã€ç»“æœï¼Œè¿”å›å­—æ®µä¸€ä¸€åŒ¹é…ï¼Œæƒ³æƒ³ä¹‹å‰@Resultså’Œ@Result</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
  <span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">"BaseResultMap"</span> <span class="na">type=</span><span class="s">"com.taotao.pojo.TbUser"</span> <span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">column=</span><span class="s">"id"</span> <span class="na">property=</span><span class="s">"id"</span> <span class="na">jdbcType=</span><span class="s">"BIGINT"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"username"</span> <span class="na">property=</span><span class="s">"username"</span> <span class="na">jdbcType=</span><span class="s">"VARCHAR"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"password"</span> <span class="na">property=</span><span class="s">"password"</span> <span class="na">jdbcType=</span><span class="s">"VARCHAR"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"phone"</span> <span class="na">property=</span><span class="s">"phone"</span> <span class="na">jdbcType=</span><span class="s">"VARCHAR"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"email"</span> <span class="na">property=</span><span class="s">"email"</span> <span class="na">jdbcType=</span><span class="s">"VARCHAR"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"created"</span> <span class="na">property=</span><span class="s">"created"</span> <span class="na">jdbcType=</span><span class="s">"TIMESTAMP"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;result</span> <span class="na">column=</span><span class="s">"updated"</span> <span class="na">property=</span><span class="s">"updated"</span> <span class="na">jdbcType=</span><span class="s">"TIMESTAMP"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/resultMap&gt;</span>


</code></pre></div></div>
<p>3ã€è§£é‡Š
<code class="highlighter-rouge">property</code>å’Œ<code class="highlighter-rouge">column</code>åˆ†åˆ«æŒ‡å®šå®ä½“ç±»å±æ€§å’Œæ•°æ®è¡¨çš„åˆ—åã€‚</p>

<h2 id="4ifçš„ä½¿ç”¨">4ã€Ifçš„ä½¿ç”¨</h2>

<h3 id="1mapperæ¥å£">1ã€mapperæ¥å£</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CustomerMapper</span> <span class="o">{</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;</span> <span class="nf">findCustomerList</span><span class="o">(</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">"name"</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span>
                                     <span class="nd">@Param</span><span class="o">(</span><span class="s">"status"</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">status</span><span class="o">,</span>
                                     <span class="nd">@Param</span><span class="o">(</span><span class="s">"offset"</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">offset</span><span class="o">,</span>
                                     <span class="nd">@Param</span><span class="o">(</span><span class="s">"limit"</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">limit</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="2mapperxml-sqlè¯­å¥">2ã€mapper.xml sqlâ€™è¯­å¥</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt;</span>
<span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">"com.duodian.admore.dao.mybatis.customer.CustomerMapper"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"findCustomerList"</span> <span class="na">resultType=</span><span class="s">"com.duodian.admore.entity.db.customer.Customer"</span><span class="nt">&gt;</span>
        SELECT t.* from crm_customer t
        WHERE t.isVisiblisVisiblee = 1
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"name != null and name != ''"</span><span class="nt">&gt;</span>
            and t.name like CONCAT('%','${name}','%' )
        <span class="nt">&lt;/if&gt;</span>
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status != null"</span><span class="nt">&gt;</span>
            and t.status = #{status}
        <span class="nt">&lt;/if&gt;</span>
        order by t.id DESC
        limit #{offset}, #{limit}
    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"countCustomerList"</span> <span class="na">resultType=</span><span class="s">"java.lang.Long"</span><span class="nt">&gt;</span>
        select count(*) from crm_customer t
        WHERE t.isVisible = 1
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"name != null and name != ''"</span><span class="nt">&gt;</span>
            and t.name like CONCAT('%','${name}','%' )
        <span class="nt">&lt;/if&gt;</span>
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status != null"</span><span class="nt">&gt;</span>
            and t.status = #{status}
        <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;/select&gt;</span>

<span class="nt">&lt;/mapper&gt;</span>

</code></pre></div></div>

<h2 id="5where--includeçš„ä½¿ç”¨-è‡ªåŠ¨åŠ where">5ã€where  includeçš„ä½¿ç”¨<font color="red"> è‡ªåŠ¨åŠ where</font></h2>

<h3 id="51ä¸ä¼šå»é™¤ç¬¬ä¸€ä¸ªandä¼šè‡ªåŠ¨åŠ ä¸Šwhere">5.1ã€ä¸ä¼šå»é™¤ç¬¬ä¸€ä¸ªandï¼Œä¼šè‡ªåŠ¨åŠ ä¸Šwhere</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">&lt;</span><span class="n">select</span> <span class="n">id</span><span class="o">=</span><span class="s">"findUserAppsSpreadEffectList"</span> <span class="n">resultType</span><span class="o">=</span><span class="s">"com.duodian.admore.entity.db.apps.AppsSpreadEffectReport"</span><span class="o">&gt;</span>
    <span class="n">SELECT</span> <span class="n">t</span><span class="o">.*,</span><span class="n">b</span><span class="o">.</span><span class="na">trackName</span><span class="o">,</span><span class="n">b</span><span class="o">.</span><span class="na">smallIcon</span> <span class="n">FROM</span> <span class="n">apps_spread_effect_report</span> <span class="n">t</span>
    <span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">apps_user_app</span> <span class="n">a</span> <span class="n">ON</span> <span class="n">a</span><span class="o">.</span><span class="na">trackId</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="na">trackId</span>
    <span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">apps_app</span> <span class="n">b</span> <span class="n">ON</span> <span class="n">b</span><span class="o">.</span><span class="na">trackId</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="na">trackId</span>
    <span class="o">&lt;</span><span class="n">where</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="k">if</span> <span class="n">test</span><span class="o">=</span><span class="s">"userId != null"</span><span class="o">&gt;</span>
            <span class="n">a</span><span class="o">.</span><span class="na">userId</span> <span class="o">=</span> <span class="err">#</span><span class="o">{</span><span class="n">userId</span><span class="o">}</span>
        <span class="o">&lt;/</span><span class="k">if</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="k">if</span> <span class="n">test</span><span class="o">=</span><span class="s">"startDate != null "</span><span class="o">&gt;</span>
            <span class="o">&lt;![</span><span class="n">CDATA</span><span class="o">[</span> <span class="n">and</span> <span class="n">t</span><span class="o">.</span><span class="na">spreadDate</span> <span class="o">&gt;=</span>  <span class="err">#</span><span class="o">{</span><span class="n">startDate</span><span class="o">}</span> <span class="o">]]&gt;</span>
        <span class="o">&lt;/</span><span class="k">if</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="k">if</span> <span class="n">test</span><span class="o">=</span><span class="s">"endDate != null "</span><span class="o">&gt;</span>
            <span class="o">&lt;![</span><span class="n">CDATA</span><span class="o">[</span> <span class="n">and</span> <span class="n">t</span><span class="o">.</span><span class="na">spreadDate</span> <span class="o">&lt;=</span>  <span class="err">#</span><span class="o">{</span><span class="n">endDate</span><span class="o">}</span> <span class="o">]]&gt;</span>
        <span class="o">&lt;/</span><span class="k">if</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">where</span><span class="o">&gt;</span>
    <span class="n">order</span> <span class="n">by</span> <span class="n">a</span><span class="o">.</span><span class="na">id</span> <span class="n">desc</span>
<span class="o">&lt;/</span><span class="n">select</span><span class="o">&gt;</span>


</code></pre></div></div>

<h2 id="6foreach-listç»“åˆä½œä¸ºå‚æ•°åœ¨mapperä¸­çš„æŸ¥è¯¢tasktypelist-ä¸ºlist">6ã€ã€foreach listç»“åˆä½œä¸ºå‚æ•°åœ¨mapperä¸­çš„æŸ¥è¯¢ï¼ˆtaskTypeList ä¸ºList<Integer>ï¼‰</Integer></h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> &lt;if test="taskTypeList != null and taskTypeList.size() &gt; 0"&gt; and t.taskType IN
      &lt;foreach collection="taskTypeList" index="index" item="at" open="(" separator="," close=")"&gt;
            #{at}
       &lt;/foreach&gt;
&lt;/if&gt;

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;sql</span> <span class="na">id=</span><span class="s">"findVerifySignetWhere"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"startDate != null"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;![CDATA[ and t.cdate &gt;= #{startDate} ]]&gt;</span>
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"endDate != null"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;![CDATA[ and t.cdate &lt;= #{endDate} ]]&gt;</span>
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"userParam != null and userParam != '' and userParam!= 'undefined'"</span><span class="nt">&gt;</span>
        AND (t.userId = #{userParam} OR d.nickName LIKE CONCAT('%',#{userParam},'%' ) OR e.realName LIKE
        CONCAT('%',#{userParam},'%' ) OR f.realName LIKE CONCAT('%',#{userParam},'%' ) OR g.email LIKE
        CONCAT('%',#{userParam},'%' ))
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"taskType != null"</span><span class="nt">&gt;</span>
        and t.taskType = #{taskType}
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"taskTypeList != null and taskTypeList.size() &gt; 0"</span><span class="nt">&gt;</span> and t.taskType IN
      <span class="nt">&lt;foreach</span> <span class="na">collection=</span><span class="s">"taskTypeList"</span> <span class="na">index=</span><span class="s">"index"</span> <span class="na">item=</span><span class="s">"at"</span> <span class="na">open=</span><span class="s">"("</span> <span class="na">separator=</span><span class="s">","</span> <span class="na">close=</span><span class="s">")"</span><span class="nt">&gt;</span>
            #{at}
       <span class="nt">&lt;/foreach&gt;</span>
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"signetType != null"</span><span class="nt">&gt;</span>
        and t.type = #{signetType}
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status != null"</span><span class="nt">&gt;</span>
        and t.status = #{status}
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"currAdmId4Auth != null "</span><span class="nt">&gt;</span>
        <span class="cp">&lt;![CDATA[ and (h.admId = #{currAdmId4Auth} OR w.cc &gt; 0) ]]&gt;</span>
    <span class="nt">&lt;/if&gt;</span>
<span class="nt">&lt;/sql&gt;</span>



</code></pre></div></div>

<h2 id="7choose-when-ç›¸å½“äºif-else">7ã€choose when (ç›¸å½“äºif else)</h2>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;choose&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"flag == 1"</span><span class="nt">&gt;</span>
            and t.status = 0
        <span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"flag == 2"</span><span class="nt">&gt;</span>
            and t.status = 1
        <span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"flag == 3"</span><span class="nt">&gt;</span>
            and t.expressStatus = 1
        <span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"flag == 4"</span><span class="nt">&gt;</span>
            and t.status = -2
        <span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;otherwise&gt;</span>
        <span class="nt">&lt;y</span><span class="err">/otherwise</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/choose&gt;</span>

</code></pre></div></div>

<h2 id="8ifnull-å¦‚æœä¸æ˜¯ç©ºè¿”å›ç¬¬ä¸€ä¸ªå¦åˆ™è¿”å›ç¬¬äºŒä¸ª">8ã€ifnull ï¼ˆå¦‚æœä¸æ˜¯ç©ºè¿”å›ç¬¬ä¸€ä¸ªï¼Œå¦åˆ™è¿”å›ç¬¬äºŒä¸ªï¼‰</h2>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ifnull(b.realName,c.realName) authName,

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"findRedStartSpread"</span> <span class="na">parameterType=</span><span class="s">"com.duodian.admore.dao.db.redstart.query.RedStartSpreadQuery"</span> <span class="na">resultType=</span><span class="s">"com.duodian.admore.dao.db.redstart.bean.RedStartHistoryBean"</span><span class="nt">&gt;</span>
    SELECT
    k.trackId,
    e.smallIcon,
    e.formattedPrice,
    e.price,
    e.fileSizeBytes,
    e.trackName,
    f.name admName,
    a.nickName userName,
    ifnull(b.realName,c.realName) authName,
    DATE_FORMAT(k.spreadDateStart, '%Y-%m-%d') AS ymd,
    k.userId
    FROM
    redstart_spread k


</code></pre></div></div>

<h2 id="9åˆ¶ä½œå‚æ•°ä¸ºmapå€¼è¿›è¡Œä¼ å…¥opté¡¹ç›®skinscontroller">9ã€‚åˆ¶ä½œå‚æ•°ä¸ºmapå€¼è¿›è¡Œä¼ å…¥ï¼ˆopté¡¹ç›®SkinsControllerï¼‰</h2>

<h3 id="1controlleræ¥æ”¶å‚æ•°">1ã€controlleræ¥æ”¶å‚æ•°</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"data"</span><span class="o">)</span>
<span class="nd">@ResponseBody</span>
<span class="kd">public</span> <span class="n">ResponseBean</span> <span class="nf">data</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span>
					  <span class="n">Integer</span> <span class="n">type</span><span class="o">,</span>
					  <span class="n">Integer</span> <span class="n">status</span><span class="o">,</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"page"</span><span class="o">,</span><span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"0"</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">page</span><span class="o">){</span>
  
        <span class="kt">int</span> <span class="n">pageSize</span> <span class="o">=</span> <span class="mi">15</span><span class="o">;</span>
        <span class="n">Pageable</span> <span class="n">pageable</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PageRequest</span><span class="o">(</span><span class="n">page</span><span class="o">,</span><span class="n">pageSize</span><span class="o">);</span>
        <span class="n">Page</span><span class="o">&lt;</span><span class="n">SkinAppInfoData</span><span class="o">&gt;</span> <span class="n">dataPage</span> <span class="o">=</span> <span class="n">skinsService</span><span class="o">.</span><span class="na">findSkinAppInfoList</span><span class="o">(</span><span class="n">pageable</span><span class="o">,</span><span class="s">"name"</span><span class="o">,</span><span class="n">name</span><span class="o">,</span><span class="s">"type"</span><span class="o">,</span><span class="n">type</span><span class="o">,</span><span class="s">"status"</span><span class="o">,</span><span class="n">status</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">ResponseBean</span><span class="o">.</span><span class="na">buildSuccess</span><span class="o">(</span><span class="n">dataPage</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="2service-åˆ¶ä½œmapå‚æ•°ä¸‹é¢çš„åŠŸèƒ½æ˜¯æ¨¡ç³ŠæŸ¥è¯¢åˆ†é¡µ">2ã€service åˆ¶ä½œmapå‚æ•°ï¼ˆä¸‹é¢çš„åŠŸèƒ½æ˜¯æ¨¡ç³ŠæŸ¥è¯¢ğŸ åˆ†é¡µï¼‰</h3>

<p>1ã€serviceæ¥å£</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">SkinAppInfoData</span><span class="o">&gt;</span> <span class="nf">findSkinAppInfoList</span><span class="o">(</span><span class="n">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="n">Object</span><span class="o">...</span> <span class="n">param</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">AppException</span><span class="o">;</span>
</code></pre></div></div>

<p>2ã€serviceå¼€å§‹å®ç° ï¼ˆpageable ä¸»è¦æ˜¯åˆ©ç”¨é‡Œé¢çš„å‚æ•°åˆ¶ä½œlimitå‚æ•°çš„ï¼‰</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">SkinAppInfoData</span><span class="o">&gt;</span> <span class="nf">findSkinAppInfoList</span><span class="o">(</span><span class="n">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="n">Object</span><span class="o">...</span> <span class="n">param</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">AppException</span> <span class="o">{</span>
    <span class="n">Map</span> <span class="n">data</span> <span class="o">=</span> <span class="n">MyBatisHelper</span><span class="o">.</span><span class="na">mergeParameterMap</span><span class="o">(</span><span class="n">pageable</span><span class="o">,</span><span class="n">param</span><span class="o">);</span>

<span class="k">if</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"startDate"</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
    <span class="n">Date</span> <span class="n">startDate</span> <span class="o">=</span> <span class="o">(</span><span class="n">Date</span><span class="o">)</span> <span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"startDate"</span><span class="o">);</span>
    <span class="n">data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"startDate"</span><span class="o">,</span> <span class="n">com</span><span class="o">.</span><span class="na">duodian</span><span class="o">.</span><span class="na">admore</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">helper</span><span class="o">.</span><span class="na">DateHelper</span><span class="o">.</span><span class="na">getDateFirstTime</span><span class="o">(</span><span class="n">startDate</span><span class="o">));</span>
<span class="o">}</span>
<span class="k">if</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"endDate"</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
    <span class="n">Date</span> <span class="n">endDate</span> <span class="o">=</span> <span class="o">(</span><span class="n">Date</span><span class="o">)</span> <span class="n">data</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"endDate"</span><span class="o">);</span>
    <span class="n">data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"endDate"</span><span class="o">,</span> <span class="n">com</span><span class="o">.</span><span class="na">duodian</span><span class="o">.</span><span class="na">admore</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">helper</span><span class="o">.</span><span class="na">DateHelper</span><span class="o">.</span><span class="na">getDateLastTime</span><span class="o">(</span><span class="n">endDate</span><span class="o">));</span>
<span class="o">}</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">SkinAppInfoData</span><span class="o">&gt;</span> <span class="n">dataList</span> <span class="o">=</span> <span class="n">skinsMapper</span><span class="o">.</span><span class="na">findSkinList</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>

    <span class="k">for</span><span class="o">(</span><span class="n">SkinAppInfoData</span> <span class="n">skinAppInfoData</span> <span class="o">:</span><span class="n">dataList</span><span class="o">){</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">ChannelJson</span><span class="o">&gt;</span> <span class="n">channelJsonList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">if</span><span class="o">(</span><span class="n">skinAppInfoData</span><span class="o">.</span><span class="na">getChannelJson</span><span class="o">()!=</span><span class="kc">null</span><span class="o">&amp;&amp;!</span><span class="s">""</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">skinAppInfoData</span><span class="o">.</span><span class="na">getChannelJson</span><span class="o">()))</span> <span class="o">{</span>
            <span class="n">JSONArray</span> <span class="n">jsonArray</span> <span class="o">=</span> <span class="n">JSONArray</span><span class="o">.</span><span class="na">fromObject</span><span class="o">(</span><span class="n">skinAppInfoData</span><span class="o">.</span><span class="na">getChannelJson</span><span class="o">());</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">jsonArray</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">ObjectMapper</span> <span class="n">objectMapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectMapper</span><span class="o">();</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="n">ChannelJson</span> <span class="n">channelJson</span> <span class="o">=</span> <span class="n">objectMapper</span><span class="o">.</span><span class="na">readValue</span><span class="o">(</span><span class="n">jsonArray</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">).</span><span class="na">toString</span><span class="o">(),</span> <span class="n">ChannelJson</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                    <span class="n">channelJsonList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">channelJson</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">skinAppInfoData</span><span class="o">.</span><span class="na">setChannelJsonList</span><span class="o">(</span><span class="n">channelJsonList</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="n">Long</span> <span class="n">count</span> <span class="o">=</span> <span class="n">skinsMapper</span><span class="o">.</span><span class="na">countSkinList</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">PageImpl</span><span class="o">&lt;</span><span class="n">SkinAppInfoData</span><span class="o">&gt;(</span><span class="n">dataList</span><span class="o">,</span><span class="n">pageable</span><span class="o">,</span><span class="n">count</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="3mybatishelperå·¥å…·æ ">3ã€MyBatisHelperå·¥å…·æ </h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBatisHelper</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">PARAM_OFFSET</span> <span class="o">=</span> <span class="s">"offset"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">PARAM_LIMIT</span> <span class="o">=</span> <span class="s">"limit"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MyBatisHelper</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="nf">mergeParameterMap</span><span class="o">(</span><span class="n">Object</span><span class="o">...</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">parameter</span><span class="o">.</span><span class="na">length</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"parameteré¡»ä¸ºkey-valueå¯¹åº”å‚æ•°"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">();</span>

            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">parameter</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">parameter</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">toString</span><span class="o">(),</span> <span class="n">parameter</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]);</span>
            <span class="o">}</span>

            <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="nf">mergeParameterMap</span><span class="o">(</span><span class="n">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="n">Object</span><span class="o">...</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">parameter</span><span class="o">.</span><span class="na">length</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"parameteré¡»ä¸ºkey-valueå¯¹åº”å‚æ•°"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">();</span>
            <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"offset"</span><span class="o">,</span> <span class="n">pageable</span><span class="o">.</span><span class="na">getOffset</span><span class="o">());</span>
            <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"limit"</span><span class="o">,</span> <span class="n">pageable</span><span class="o">.</span><span class="na">getPageSize</span><span class="o">());</span>

            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">parameter</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">parameter</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">toString</span><span class="o">(),</span> <span class="n">parameter</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]);</span>
            <span class="o">}</span>

            <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="4mapperjava-ä¸‹é¢è¿™ä¸¤ä¸ªå…¶å®å°±æ˜¯ä¸“é—¨ç”¨æ¥åšåˆ¶ä½œpageåˆ†é¡µçš„">4ã€mapper.java ï¼ˆä¸‹é¢è¿™ä¸¤ä¸ªå…¶å®å°±æ˜¯ä¸“é—¨ç”¨æ¥åšåˆ¶ä½œpageåˆ†é¡µçš„ï¼‰</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">SkinsMapper</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">SkinAppInfoData</span><span class="o">&gt;</span> <span class="nf">findSkinList</span><span class="o">(</span><span class="n">Map</span> <span class="n">param</span><span class="o">);</span>

    <span class="kd">public</span> <span class="n">Long</span> <span class="nf">countSkinList</span><span class="o">(</span><span class="n">Map</span> <span class="n">param</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt;</span>
<span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">"com.duodian.admore.dao.db.skins.SkinsMapper"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"findSkinList"</span> <span class="na">resultType=</span><span class="s">"com.duodian.admore.data.skins.SkinAppInfoData"</span><span class="nt">&gt;</span>
        SELECT
            A1.`appid`,
            A1.`appSecret`,
            A1.`icon`,
            A1.`makerMemo`,
            A1.`haveBackstage`,
            A1.`channelJson`,
            A1.`filePath`
        FROM  `skin_app_info_check`  a1
        where A1.status not in (9)
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"name != null and name != ''"</span><span class="nt">&gt;</span>
            AND (A1.trackId = #{name}
            OR A1.name LIKE CONCAT('%',#{name},'%' )
            OR A1.appid LIKE CONCAT('%',#{name},'%' )
            OR A1.appSecret LIKE CONCAT('%',#{name},'%' )
            )
        <span class="nt">&lt;/if&gt;</span>
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"type != null and type != '' "</span><span class="nt">&gt;</span>
            and A1.type = #{type}
        <span class="nt">&lt;/if&gt;</span>
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status != null and status != '' "</span><span class="nt">&gt;</span>
            and  A1.status = #{status}
        <span class="nt">&lt;/if&gt;</span>
        order by A1.cdate desc
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"offset != null and limit != null"</span><span class="nt">&gt;</span>
            limit #{offset}, #{limit}
        <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"countSkinList"</span> <span class="na">resultType=</span><span class="s">"java.lang.Long"</span><span class="nt">&gt;</span>
        SELECT
              count(*)
            FROM   `skin_app_info_check`      A1
            where A1.status != 9
            <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"name != null and name != ''"</span><span class="nt">&gt;</span>
                AND (A1.trackId = #{trackId} OR A1.name LIKE CONCAT('%',#{name},'%' ))
            <span class="nt">&lt;/if&gt;</span>
            <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"type != null"</span><span class="nt">&gt;</span>
                and A1.type = #{type}
            <span class="nt">&lt;/if&gt;</span>
            <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status != null"</span><span class="nt">&gt;</span>
                and A1.status = #{status}
            <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/mapper&gt;</span>

</code></pre></div></div>

<h3 id="5æœ‰åˆ†ç»„çš„">5ã€æœ‰åˆ†ç»„çš„</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"findCouponTaoKeDataByParam"</span> <span class="na">resultType=</span><span class="s">"com.duodian.youhui.data.coupon.CouponTaoKeItemGoodSummaryData"</span><span class="nt">&gt;</span>
        SELECT c.itemTitle,
        COUNT(c.itemId) as orderSize,
        sum(c.estimateAmount) AS sumEstimateAmount ,
        sum(c.payAmount) AS transAmount,
        c.adzoneName,
        c.adzonePid,
        c.createTime,
        date_format(c.createTime,'%Y-%m-%d') as everyDate,
        c.itemId  FROM  coupon_taoke_data c

        <span class="nt">&lt;where&gt;</span>
            c.dataType = 1 and c.orderStatus not in ('è®¢å•å¤±æ•ˆ') and c.status = 1
            <span class="nt">&lt;include</span> <span class="na">refid=</span><span class="s">"findCouponTaoKeDataByParamSQL"</span><span class="nt">&gt;&lt;/include&gt;</span>
        <span class="nt">&lt;/where&gt;</span>

        <span class="nt">&lt;choose&gt;</span>
            <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"isLinkCome==1"</span><span class="nt">&gt;</span>
                GROUP by c.itemId, date_format(c.createTime,'%Y-%m-%d'), c.adzonePid
            <span class="nt">&lt;/when&gt;</span>
            <span class="nt">&lt;otherwise&gt;</span>
                GROUP by c.itemId,c.adzonePid
            <span class="nt">&lt;/otherwise&gt;</span>
        <span class="nt">&lt;/choose&gt;</span>

        <span class="nt">&lt;choose&gt;</span>
            <span class="nt">&lt;when</span>  <span class="na">test=</span><span class="s">"order != null"</span><span class="nt">&gt;</span>
                     order by  ${order}
            <span class="nt">&lt;/when&gt;</span>
            <span class="nt">&lt;otherwise&gt;</span>
                <span class="nt">&lt;choose&gt;</span>
                    <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"isLinkCome==1"</span><span class="nt">&gt;</span>
                        order by date_format(c.createTime,'%Y-%m-%d') DESC
                    <span class="nt">&lt;/when&gt;</span>
                <span class="nt">&lt;/choose&gt;</span>
            <span class="nt">&lt;/otherwise&gt;</span>
        <span class="nt">&lt;/choose&gt;</span>



        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"offset != null and limit != ''"</span><span class="nt">&gt;</span>
            limit #{offset}, #{limit}
        <span class="nt">&lt;/if&gt;</span>

    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"countFindCouponTaoKeDataByParam"</span> <span class="na">resultType=</span><span class="s">"java.lang.Long"</span><span class="nt">&gt;</span>
        select count(*) from (
        SELECT c.itemTitle FROM  coupon_taoke_data c
        <span class="nt">&lt;where&gt;</span>
            c.dataType = 1 and c.orderStatus not in ('è®¢å•å¤±æ•ˆ') and c.status = 1
            <span class="nt">&lt;include</span> <span class="na">refid=</span><span class="s">"findCouponTaoKeDataByParamSQL"</span><span class="nt">&gt;&lt;/include&gt;</span>
        <span class="nt">&lt;/where&gt;</span>
        <span class="nt">&lt;choose&gt;</span>
            <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"isLinkCome==1"</span><span class="nt">&gt;</span>
                GROUP by c.itemId, date_format(c.createTime,'%Y-%m-%d'), c.adzonePid
            <span class="nt">&lt;/when&gt;</span>
            <span class="nt">&lt;otherwise&gt;</span>
                GROUP by c.itemId,c.adzonePid
            <span class="nt">&lt;/otherwise&gt;</span>
        <span class="nt">&lt;/choose&gt;</span>
        ) as a
    <span class="nt">&lt;/select&gt;</span>



</code></pre></div></div>

<h2 id="10æ¨¡ç³ŠæŸ¥è¯¢å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥ç±»ä¼¼äº9ä¸­çš„map">10ã€æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œç±»ä¼¼äº9ä¸­çš„map</h2>

<h3 id="1queryå¯¹è±¡-æŸ¥è¯¢å‚æ•°">1ã€queryå¯¹è±¡ (æŸ¥è¯¢å‚æ•°)</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SysUserQuery</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4564423981924197001L</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">offset</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">limit</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Date</span> <span class="n">startDate</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Date</span> <span class="n">endDate</span> <span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">userid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">userParam</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">status</span><span class="o">;</span>


<span class="o">}</span>


</code></pre></div></div>

<h3 id="2controllerå±‚">2ã€controllerå±‚</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"data"</span><span class="o">)</span>
<span class="nd">@ResponseBody</span>
<span class="kd">public</span> <span class="n">ResponseBean</span> <span class="nf">data</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"0"</span><span class="o">)</span><span class="n">Integer</span> <span class="n">page</span><span class="o">,</span> <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"15"</span><span class="o">)</span><span class="n">Integer</span> <span class="n">pageSize</span><span class="o">,</span> <span class="n">SysUserQuery</span> <span class="n">query</span><span class="o">){</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">Pageable</span> <span class="n">pageable</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PageRequest</span><span class="o">(</span><span class="n">page</span><span class="o">,</span><span class="n">pageSize</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">ResponseBean</span><span class="o">.</span><span class="na">buildSuccess</span><span class="o">(</span><span class="n">sysDingUserService</span><span class="o">.</span><span class="na">getDingUserData</span><span class="o">(</span><span class="n">pageable</span><span class="o">,</span><span class="n">query</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">AppException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">ResponseBean</span><span class="o">.</span><span class="na">buildFailure</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">ResponseBean</span><span class="o">.</span><span class="na">buildFailure</span><span class="o">(</span><span class="n">ErrorCodeEnum</span><span class="o">.</span><span class="err">ç³»ç»Ÿé”™è¯¯</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="3serviceå±‚å°†pageableåˆ†é¡µå¯¹è±¡æ”¾å…¥">3ã€serviceå±‚ï¼Œå°†pageableåˆ†é¡µå¯¹è±¡æ”¾å…¥</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">SysDingUser</span><span class="o">&gt;</span> <span class="nf">getDingUserData</span><span class="o">(</span><span class="n">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="n">SysUserQuery</span> <span class="n">query</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">query</span><span class="o">.</span><span class="na">setOffset</span><span class="o">(</span><span class="n">pageable</span><span class="o">.</span><span class="na">getOffset</span><span class="o">());</span>
        <span class="n">query</span><span class="o">.</span><span class="na">setLimit</span><span class="o">(</span><span class="n">pageable</span><span class="o">.</span><span class="na">getPageSize</span><span class="o">());</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">SysDingUser</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">sysMapper</span><span class="o">.</span><span class="na">findSysDingUserList</span><span class="o">(</span><span class="n">query</span><span class="o">);</span>

        <span class="n">Long</span> <span class="n">count</span> <span class="o">=</span> <span class="n">sysMapper</span><span class="o">.</span><span class="na">countSysDingUser</span><span class="o">(</span><span class="n">query</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">PageImpl</span><span class="o">&lt;&gt;(</span><span class="n">list</span><span class="o">,</span> <span class="n">pageable</span><span class="o">,</span> <span class="n">count</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="4mybatisæŸ¥è¯¢è¯­å¥">4ã€mybatisæŸ¥è¯¢è¯­å¥</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"findSysDingUserList"</span> <span class="na">resultType=</span><span class="s">"com.duodian.admore.entity.db.admin.SysDingUser"</span><span class="nt">&gt;</span>
    SELECT t.*, a.admId,b.name admName FROM sys_ding_user t
    LEFT JOIN sys_admin_user_ding a ON a.userid = t.userid
    LEFT JOIN sys_admin_user b ON b.id = a.admId
    <span class="nt">&lt;where&gt;</span>
        <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"userParam != null and userParam != ''"</span><span class="nt">&gt;</span>
            and (t.userid = #{userParam} OR t.name LIKE CONCAT('%',#{userParam},'%' ) OR t.email LIKE CONCAT('%',#{userParam},'%' )
            OR t.orgEmail LIKE CONCAT('%',#{userParam},'%' ) OR t.mobile LIKE CONCAT('%',#{userParam},'%' ) OR t.position LIKE CONCAT('%',#{userParam},'%' ))
        <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;/where&gt;</span>
    ORDER BY t.id ASC
    limit #{offset}, #{limit}
<span class="nt">&lt;/select&gt;</span>


</code></pre></div></div>

<h2 id="11sqlå–å‡ºåˆ¶ä½œdtoå¯¹è±¡">11ã€sqlå–å‡ºåˆ¶ä½œDTOå¯¹è±¡</h2>

<h3 id="1å¯¹äºæ•°æ®åº“å­—æ®µåŒ¹é…çš„å¯ä»¥ç›´æ¥é€‰æ‹©">1ã€å¯¹äºæ•°æ®åº“å­—æ®µåŒ¹é…çš„ï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©</h3>
<h3 id="2å¯¹äºä¸åŒ¹é…çš„ä½¿ç”¨-as--è½¬åŒ–">2ã€å¯¹äºä¸åŒ¹é…çš„ä½¿ç”¨ as  è½¬åŒ–</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"findRedStartSpread"</span> <span class="na">parameterType=</span><span class="s">"com.duodian.admore.dao.db.redstart.query.RedStartSpreadQuery"</span> <span class="na">resultType=</span><span class="s">"com.duodian.admore.dao.db.redstart.bean.RedStartHistoryBean"</span><span class="nt">&gt;</span>
    SELECT
    k.trackId,
    e.smallIcon,
    e.formattedPrice,
    e.price,
    e.fileSizeBytes,
    e.trackName,
    f.name admName,
    a.nickName userName,

    DATE_FORMAT(k.spreadDateStart, '%Y-%m-%d') AS ymd,
    k.userId
    FROM
    redstart_spread k
</code></pre></div></div>

<h3 id="111redstarthistorybean">11.1ã€RedStartHistoryBean</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RedStartHistoryBean</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">Long</span> <span class="n">userId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">ymd</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">trackId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">smallIcon</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">bundleId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">formattedPrice</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">BigDecimal</span> <span class="n">price</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">BigInteger</span> <span class="n">fileSizeBytes</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">trackName</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">fileSizeDesc</span><span class="o">;</span>   <span class="c1">//æ–‡ä»¶å¤§å°æè¿°</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">authName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">admName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">userName</span><span class="o">;</span>

</code></pre></div></div>

<h3 id="112redstartspreadquery">11.2ã€RedStartSpreadQuery</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RedStartSpreadQuery</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">Long</span> <span class="n">userId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">trackId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">trackName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Date</span> <span class="n">startDate</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Date</span> <span class="n">endDate</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">status</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">offset</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">limit</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Date</span> <span class="n">point</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">userParam</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">appParam</span><span class="o">;</span>
</code></pre></div></div>

<h2 id="12åªæœ‰ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„æ—¶å€™ä¸ä½¿ç”¨æ³¨è§£paramä¸èƒ½ç›´æ¥å†™å‚æ•°åå­—äº†-è€Œæ˜¯ä½¿ç”¨ä¸‹é¢çš„_parameter">12ã€åªæœ‰ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„æ—¶å€™ï¼Œä¸ä½¿ç”¨æ³¨è§£@Param,ä¸èƒ½ç›´æ¥å†™å‚æ•°åå­—äº† è€Œæ˜¯ä½¿ç”¨ä¸‹é¢çš„_parameter</h2>

<h3 id="1mapeprjava">1ã€mapepr.java</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">List</span><span class="o">&lt;</span><span class="n">CustomerChance</span><span class="o">&gt;</span> <span class="nf">getCustomerList</span><span class="o">(</span><span class="n">Long</span> <span class="n">adminId</span><span class="o">);</span>

</code></pre></div></div>

<h3 id="2mapperxml-1">2ã€mapper.xml</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"getCustomerList"</span> <span class="na">resultType=</span><span class="s">"com.duodian.admore.entity.db.customer.CustomerChance"</span><span class="nt">&gt;</span>
    SELECT *
    FROM `crm_customer_chance`  c
    where c.isVisible = 1
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"_parameter != null"</span><span class="nt">&gt;</span>
        and c.adminId = #{_parameter}
    <span class="nt">&lt;/if&gt;</span>
<span class="nt">&lt;/select&gt;</span>

</code></pre></div></div>

<h2 id="13åŠ å…¥åŸç”Ÿç¬¦å·">13ã€åŠ å…¥åŸç”Ÿç¬¦å·</h2>

<p>t.cdate &gt;= #{startDate}</p>

<p>&lt;![CDATA[]]&gt;å’Œè½¬ä¹‰å­—ç¬¦
è¢«&lt;![CDATA[]]&gt;è¿™ä¸ªæ ‡è®°æ‰€åŒ…å«çš„å†…å®¹å°†è¡¨ç¤ºä¸ºçº¯æ–‡æœ¬ï¼Œæ¯”å¦‚&lt;![CDATA[&lt;]]&gt;è¡¨ç¤ºæ–‡æœ¬å†…å®¹â€œ&lt;â€ã€‚Â 
ã€€ã€€æ­¤æ ‡è®°ç”¨äºxmlæ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä½¿ç”¨è½¬ä¹‰ç¬¦çš„æƒ…å†µã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨xmlä¸­ï¼Œâ€&lt;â€ã€â€&gt;â€ã€â€&amp;â€ç­‰å­—ç¬¦æ˜¯ä¸èƒ½ç›´æ¥å­˜å…¥çš„ï¼Œå¦åˆ™xmlè¯­æ³•æ£€æŸ¥æ—¶ä¼šæŠ¥é”™ï¼Œå¦‚æœæƒ³åœ¨xmlä¸­ä½¿ç”¨è¿™äº›ç¬¦å·ï¼Œå¿…é¡»å°†å…¶è½¬ä¹‰ä¸ºå®ä½“ï¼Œå¦‚â€&lt;â€ã€â€&gt;â€ã€â€&amp;â€ï¼Œè¿™æ ·æ‰èƒ½ä¿å­˜è¿›xmlæ–‡æ¡£ã€‚Â 
ã€€</p>

<h3 id="131ä¸¾ä¾‹è¯´æ˜">13.1ã€ä¸¾ä¾‹è¯´æ˜</h3>

<font color="red" size="4">ä½†æ˜¯åœ¨mybaitsæ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ &lt;![CDATA[&gt;]]&gt;  ç›´æ¥ &gt;=ä¹Ÿæ²¡æœ‰æç¤ºæŠ¥é”™
  </font>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;sql</span> <span class="na">id=</span><span class="s">"pageSuffix"</span><span class="nt">&gt;</span>
    ) a where rownum <span class="cp">&lt;![CDATA[&lt;=]]&gt;</span> #{end,jdbcType=INTEGER} ) b where b.rn <span class="cp">&lt;![CDATA[&gt;]]&gt;</span> #{start,jdbcType=INTEGER}
  <span class="nt">&lt;/sql&gt;</span>
</code></pre></div></div>

<h2 id="14ä¸€ä¸ªæ¡ä»¶åŒ¹é…å¤šä¸ªå­—æ®µ">14ã€ä¸€ä¸ªæ¡ä»¶åŒ¹é…å¤šä¸ªå­—æ®µ</h2>

<hr />
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"userParam != null and userParam != ''"</span><span class="nt">&gt;</span>
    AND (t.userId = #{userParam}
          OR a.nickName LIKE CONCAT('%',#{userParam},'%' )
          OR b.realName LIKE CONCAT('%',#{userParam},'%' )
          OR c.realName LIKE CONCAT('%',#{userParam},'%' )
          OR t.customerId LIKE CONCAT('%',#{userParam},'%' )
          OR t.customerName LIKE CONCAT('%',#{userParam},'%'))
<span class="nt">&lt;/if&gt;</span>


</code></pre></div></div>

<h2 id="15countè¯¦è§£">15ã€countè¯¦è§£</h2>

<h3 id="1è¿™æ ·è¾“å‡ºç»“æœåªæœ‰ä¸€è¡Œå› ä¸ºcountæœ¬æ¥ä»£è¡¨çš„å°±æ˜¯ä¸€ä¸ªæ•°å­—æœ¬èº«å°±æ˜¯ä¸€è¡Œ">1ã€è¿™æ ·è¾“å‡ºç»“æœåªæœ‰ä¸€è¡Œï¼Œå› ä¸ºcountï¼ˆ*ï¼‰æœ¬æ¥ä»£è¡¨çš„å°±æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæœ¬èº«å°±æ˜¯ä¸€è¡Œ</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span>  <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">as</span> <span class="nv">"count"</span><span class="p">,</span><span class="n">idfa</span> <span class="k">from</span> <span class="n">apps_click_record</span> <span class="n">a</span><span class="p">;</span> <span class="o">#</span> <span class="k">WHERE</span>  <span class="n">a</span><span class="p">.</span><span class="n">keywordId</span> <span class="o">=</span> <span class="s1">'169995'</span> <span class="k">GROUP</span>  <span class="k">by</span> <span class="n">idfa</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">DESC</span> <span class="p">;</span>

</code></pre></div></div>

<h3 id="2ä½¿ç”¨groupåˆ†ç»„-ä¸‹é¢äºŒè€…æ˜¯ä¸€æ ·çš„-å…¶å®è¿™é‡Œå°±è¡¨ç¤ºåˆ†ç»„ä¹‹åæ¯ç»„çš„ä¸ªæ•°">2ã€ä½¿ç”¨groupåˆ†ç»„ ï¼ˆä¸‹é¢äºŒè€…æ˜¯ä¸€æ ·çš„ï¼‰ å…¶å®è¿™é‡Œå°±è¡¨ç¤ºåˆ†ç»„ä¹‹åæ¯ç»„çš„ä¸ªæ•°</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span>  <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">as</span> <span class="nv">"count"</span><span class="p">,</span><span class="n">idfa</span> <span class="k">from</span> <span class="n">apps_click_record</span> <span class="n">a</span> <span class="k">WHERE</span>  <span class="n">a</span><span class="p">.</span><span class="n">keywordId</span> <span class="o">=</span> <span class="s1">'169995'</span> <span class="k">GROUP</span>  <span class="k">by</span> <span class="n">idfa</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">DESC</span> <span class="p">;</span>
    
<span class="k">SELECT</span>  <span class="k">count</span><span class="p">(</span><span class="n">idfa</span><span class="p">)</span> <span class="k">as</span> <span class="nv">"count"</span><span class="p">,</span><span class="n">idfa</span> <span class="k">from</span> <span class="n">apps_click_record</span> <span class="n">a</span> <span class="k">WHERE</span>  <span class="n">a</span><span class="p">.</span><span class="n">keywordId</span> <span class="o">=</span> <span class="s1">'169995'</span> <span class="k">GROUP</span>  <span class="k">by</span> <span class="n">idfa</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">DESC</span> <span class="p">;</span>

</code></pre></div></div>

<h3 id="3count-å’Œ--çš„æŸ¥è¯¢-æ˜¯é”™è¯¯çš„">3ã€countï¼ˆ*ï¼‰ å’Œ * çš„æŸ¥è¯¢ æ˜¯é”™è¯¯çš„</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">ä¸‹é¢æ˜¯é”™è¯¯çš„</span>

<span class="k">SELECT</span>  <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">as</span> <span class="nv">"count"</span><span class="p">,</span><span class="o">*</span> <span class="k">from</span> <span class="n">apps_click_record</span> <span class="n">a</span><span class="p">;</span> 

</code></pre></div></div>

<h3 id="4æŸ¥æ‰¾æ•°group-byåˆ†ç»„åçš„ä¸ªæ•°ä½¿ç”¨åµŒå¥—">4ã€æŸ¥æ‰¾æ•°group byåˆ†ç»„åçš„ä¸ªæ•°ï¼Œä½¿ç”¨åµŒå¥—</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> 
<span class="p">(</span>
    <span class="k">select</span> <span class="k">sum</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="p">)</span> <span class="k">from</span> <span class="n">B</span> <span class="n">b</span> <span class="k">group</span> <span class="k">by</span> <span class="n">b</span><span class="p">.</span><span class="k">type</span>
<span class="p">)</span> <span class="n">m</span>

</code></pre></div></div>

<h2 id="18deleteåˆ é™¤è¡¨ä¸­æ•°æ®">18ã€deleteåˆ é™¤è¡¨ä¸­æ•°æ®</h2>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1,delete from user as u where u.userid=6; é”™è¯¯
2,delete from user u where u.userid=6; é”™è¯¯
3,delete from user where userid=6;  æ­£ç¡®
4,delete u.* from user u where u.userid=6; æ­£ç¡®
5,delete u from user u where u.userid=6; æ­£ç¡® 
</code></pre></div></div>

<h2 id="19è¯·æ±‚åˆ†é¡µå‚æ•°">19ã€è¯·æ±‚åˆ†é¡µå‚æ•°</h2>

<h3 id="191congtroller">19.1ã€congtroller</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"getOriginData"</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">Wrapper</span><span class="o">&lt;?&gt;</span> <span class="n">getOriginData</span><span class="o">(</span><span class="n">String</span> <span class="n">phone</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">bankId</span><span class="o">,</span> <span class="n">PageQuery</span> <span class="n">pageQuery</span><span class="o">){</span>

</code></pre></div></div>

<h3 id="192doto">19.2ã€DOTO</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Setter</span>
<span class="nd">@ApiModel</span><span class="o">(</span><span class="s">"åˆ†é¡µå¯¹è±¡"</span><span class="o">)</span>
<span class="nd">@Accessors</span><span class="o">(</span><span class="n">chain</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PageQuery</span> <span class="o">{</span>

    <span class="nd">@ApiModelProperty</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"å¼€å§‹é¡µæ•°ï¼Œä»1å¼€å§‹"</span><span class="o">,</span><span class="n">example</span> <span class="o">=</span> <span class="s">"1"</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span><span class="n">dataType</span> <span class="o">=</span> <span class="s">"java.lang.Integer"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">pageNum</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
    <span class="nd">@ApiModelProperty</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"æ¯é¡µæ•°é‡"</span><span class="o">,</span><span class="n">example</span> <span class="o">=</span> <span class="s">"20"</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span><span class="n">dataType</span> <span class="o">=</span> <span class="s">"java.lang.Integer"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">pageSize</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span>
   

    <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">getPageSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">pageSize</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="mi">20</span> <span class="o">:</span> <span class="n">pageSize</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">getPageNum</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">pageNum</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">pageNum</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>

<h2 id="20timestamp-å¤šä¸ªæ—¥æœŸå¦‚æœå¯èƒ½ä¸ºç©ºåˆ™å»ºè®®ä½¿ç”¨datetime">20ã€timestamp å¤šä¸ªæ—¥æœŸï¼Œå¦‚æœå¯èƒ½ä¸ºç©ºï¼Œåˆ™å»ºè®®ä½¿ç”¨datetime</h2>

<p>é‡ç‚¹ï¼š2ã€@Temporal(TemporalType.DATE)æ’å…¥æ•°æ®åº“ä¸­çš„æ—¥æœŸä¼šè‡ªåŠ¨å˜æˆ 00.00.00ï¼Œåº”è¯¥ä½¿ç”¨TIMESTAMPï¼Œsqlä¸­æ˜¯datetime
<br /></p>

<p>æ™®é€šå­—æ®µä¸è¦è®¾ç½®ä¸ºtimestampï¼Œtimestampåˆ—å¿…é¡»æœ‰é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼å¯ä»¥ä¸ºâ€œ0000-00-00 00:00:00â€ï¼Œä½†ä¸èƒ½ä¸ºnullã€‚å¦‚æœæˆ‘ä»¬åœ¨saveå®ä½“çš„æ—¶å€™ï¼Œæ²¡æœ‰ç»™ç›¸å…³timestampè®¾ç½®å€¼ï¼Œé‚£ä¹ˆä»–å°±ä¼šè‡ªåŠ¨ç”±mysqlå°†å½“å‰æ—¶é—´è®¾ç½®è¿›å»ï¼Œ cdateå’Œudateï¼Œéƒ½æ˜¯åœ¨javaåŸºç¡€ä¸Šæ§åˆ¶çš„</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">æ­£ç¡®æ•°æ®</span>

<span class="n">createTime</span> <span class="n">datetime</span> <span class="k">default</span> <span class="kc">null</span> <span class="o">,</span>
<span class="n">clickTime</span> <span class="n">datetime</span> <span class="k">default</span> <span class="kc">null</span><span class="o">,</span>

<span class="nd">@Temporal</span><span class="o">(</span><span class="n">TemporalType</span><span class="o">.</span><span class="na">TIMESTAMP</span><span class="o">)</span>
<span class="nd">@ApiModelProperty</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"åˆ›å»ºæ—¶é—´"</span><span class="o">)</span>
<span class="kd">private</span> <span class="n">Date</span> <span class="n">createTime</span><span class="o">;</span>

<span class="nd">@Temporal</span><span class="o">(</span><span class="n">TemporalType</span><span class="o">.</span><span class="na">TIMESTAMP</span><span class="o">)</span>
<span class="nd">@ApiModelProperty</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"ç‚¹å‡»æ—¶é—´"</span><span class="o">)</span>
<span class="kd">private</span> <span class="n">Date</span> <span class="n">clickTime</span><span class="o">;</span>



</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">ä¸‹é¢è¿™ä¸ªä¸å¯èƒ½ä¸ºç©ºï¼Œæ‰€ä»¥ä¹Ÿæ˜¯æ­£ç¡®çš„</span>
<span class="n">cdate</span> <span class="n">timestamp</span> <span class="n">NOT</span> <span class="n">NULL</span> <span class="n">DEFAULT</span> <span class="n">CURRENT_TIMESTAMP</span><span class="o">,</span>
<span class="n">udate</span> <span class="n">timestamp</span> <span class="n">NOT</span> <span class="n">NULL</span> <span class="n">DEFAULT</span> <span class="n">CURRENT_TIMESTAMP</span> <span class="n">ON</span> <span class="n">UPDATE</span> <span class="n">CURRENT_TIMESTAMP</span><span class="o">,</span>



<span class="nd">@Temporal</span><span class="o">(</span><span class="n">TemporalType</span><span class="o">.</span><span class="na">TIMESTAMP</span><span class="o">)</span>
<span class="nd">@Column</span><span class="o">(</span><span class="n">columnDefinition</span><span class="o">=</span><span class="s">"TIMESTAMP DEFAULT CURRENT_TIMESTAMP"</span><span class="o">,</span><span class="n">insertable</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span><span class="n">updatable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
<span class="nd">@ApiModelProperty</span><span class="o">(</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
<span class="kd">private</span> <span class="n">Date</span> <span class="n">cdate</span><span class="o">;</span>

<span class="nd">@UpdateTimestamp</span>
<span class="nd">@Temporal</span><span class="o">(</span><span class="n">TemporalType</span><span class="o">.</span><span class="na">TIMESTAMP</span><span class="o">)</span>
<span class="nd">@ApiModelProperty</span><span class="o">(</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
<span class="kd">private</span> <span class="n">Date</span> <span class="n">udate</span><span class="o">;</span>

</code></pre></div></div>

<h3 id="201mybatisæ—¥æœŸæŠ¥é”™">20.1ã€mybatisæ—¥æœŸæŠ¥é”™</h3>

<h4 id="å¼‚å¸¸invalid-comparison-javautildate-and-javalangstring">å¼‚å¸¸ï¼š<code class="highlighter-rouge">invalid comparison: java.util.Date and java.lang.Stringã€‚</code></h4>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"date!= null and date !=''"</span><span class="nt">&gt;</span>
dateä¸ºDateç±»å‹ï¼Œä¸èƒ½å’Œâ€˜â€™æ¯”è¾ƒï¼Œåªåˆ¤æ–­æ˜¯ä¸æ˜¯nullå°±è¡Œå•¦:

<span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"date!= null"</span><span class="nt">&gt;</span>

</code></pre></div></div>

<h2 id="21å¤šæ¡ä»¶æ’åº">21ã€å¤šæ¡ä»¶æ’åº</h2>

<p>ä¸¾ä¾‹ï¼šè®¢å•é™åº 1ï¼Œè®¢å•å‡åº 2 ï¼Œæˆäº¤é¢é™åº 3ï¼Œæˆäº¤é¢å‡åº 4ï¼Œ</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"findCouponTaoKeDataByParam"</span> <span class="na">resultType=</span><span class="s">"com.duodian.youhui.data.coupon.CouponTaoKeItemGoodSummaryData"</span><span class="nt">&gt;</span>
  SELECT c.itemTitle,COUNT(c.itemId) as orderSize,sum(c.estimateAmount) AS sumEstimateAmount ,c.adzoneName,c.adzonePid,c.createTime,c.itemId  FROM  coupon_taoke_data c
    <span class="nt">&lt;where&gt;</span>
        c.dataType = 1 and  c.status = 1
        <span class="nt">&lt;include</span> <span class="na">refid=</span><span class="s">"findCouponTaoKeDataByParamSQL"</span><span class="nt">&gt;&lt;/include&gt;</span>
    <span class="nt">&lt;/where&gt;</span>
    GROUP by c.itemId,c.adzonePid

    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"order != null"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;choose&gt;</span>
            <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"order == 1"</span><span class="nt">&gt;</span>
                order by    orderSize DESC
            <span class="nt">&lt;/when&gt;</span>
            <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"order == 2"</span><span class="nt">&gt;</span>
                order by    orderSize asc
            <span class="nt">&lt;/when&gt;</span>
            <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"order == 3"</span><span class="nt">&gt;</span>
                order by   sumEstimateAmount DESC
            <span class="nt">&lt;/when&gt;</span>
            <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">"order == 4"</span><span class="nt">&gt;</span>
                order by   sumEstimateAmount asc
            <span class="nt">&lt;/when&gt;</span>
        <span class="nt">&lt;/choose&gt;</span>
    <span class="nt">&lt;/if&gt;</span>

    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"offset != null and limit != ''"</span><span class="nt">&gt;</span>
        limit #{offset}, #{limit}
    <span class="nt">&lt;/if&gt;</span>

<span class="nt">&lt;/select&gt;</span>

</code></pre></div></div>

<h3 id="2ç»™æ’åºæ·»åŠ éç©ºæ¡ä»¶">2ã€ç»™æ’åºæ·»åŠ éç©ºæ¡ä»¶</h3>

<p>ä½¿ç”¨order byorderid descå®ç°é™åºæ—¶<br />
orderid ä¸ºnullæ•°æ®çš„ä¼šæ’åœ¨æ•°æ®çš„æœ€åé¢ï¼›<br /><br /></p>

<p>ä½†æ˜¯ï¼Œorder by orderidå‡åºæ—¶<br />
orderid ä¸ºnullçš„æ•°æ®åˆ™ä¼šæ’åœ¨æœ€å‰é¢<br /><br /></p>

<p>å¦‚æœæƒ³è¦å°†orderidä¸ºnullçš„æ•°æ®æ’åœ¨æœ€åï¼Œå°±éœ€è¦åŠ ä¸Šis nullã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">b_programme</span> <span class="n">u</span> <span class="k">order</span> <span class="k">by</span> <span class="n">u</span><span class="p">.</span><span class="n">orderid</span> <span class="k">is</span> <span class="k">null</span><span class="p">,</span> <span class="n">u</span><span class="p">.</span><span class="n">orderid</span>

</code></pre></div></div>

<h3 id="3æ­£ç¡®çš„å¤šæ¡ä»¶æ’åºæ’åºå­—æ®µç”±å‰ç«¯è¿›è¡Œä¼ å…¥order">3ã€æ­£ç¡®çš„å¤šæ¡ä»¶æ’åºï¼Œæ’åºå­—æ®µç”±å‰ç«¯è¿›è¡Œä¼ å…¥<code class="highlighter-rouge">${order}</code></h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    
        <span class="o">&lt;</span><span class="n">choose</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="k">when</span>  <span class="n">test</span><span class="o">=</span><span class="nv">"order != null"</span><span class="o">&gt;</span>
                     <span class="k">order</span> <span class="k">by</span>  <span class="err">${</span><span class="k">order</span><span class="err">}</span>
            <span class="o">&lt;/</span><span class="k">when</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">otherwise</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">choose</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="k">when</span> <span class="n">test</span><span class="o">=</span><span class="nv">"isLinkCome==1"</span><span class="o">&gt;</span>
                        <span class="k">order</span> <span class="k">by</span> <span class="n">date_format</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">createTime</span><span class="p">,</span><span class="s1">'%Y-%m-%d'</span><span class="p">)</span> <span class="k">DESC</span>
                    <span class="o">&lt;/</span><span class="k">when</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">choose</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">otherwise</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">choose</span><span class="o">&gt;</span>


</code></pre></div></div>

<h2 id="23å‚æ•°ä¼ å…¥ä¸º0åˆ¤æ–­nullçš„æ—¶å€™">23ã€å‚æ•°ä¼ å…¥ä¸º0ï¼Œåˆ¤æ–­nullçš„æ—¶å€™</h2>

<font color="red">

### 23.1ã€ç¬¬ä¸€ç§è§£å†³æ–¹æ³•ï¼Œä¸å»ºè®®

idä¼ å€¼ä¸º0æ—¶(å‰ææ˜¯idå¯¹åº”çš„ç±»å‹ä¸ºlong æˆ–è€…Â Integerï¼ŒStringå‹æ— æ­¤é—®é¢˜)ï¼Œå‘ç°å¹¶æ²¡æœ‰æ‰§è¡Œifé‡Œçš„sqlï¼Œå› ä¸ºåœ¨mybatisä¸­ä¼šè‡ªåŠ¨æŠŠ0å½“æˆâ€˜â€™ç©ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å»ºè®®ä»¥åä¼ å…¥è¿™ç§ç±»å‹çš„æ•°æ®ï¼Œæœ€å¥½è¿˜æ˜¯ä¸è¦ä¼ å…¥0ï¼Œå¯ä»¥å°†0æ”¹å˜ä¸ºå…¶ä»–çš„æ•°å­—ï¼Œæ¯”å¦‚5ç­‰  

</font>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="o">&lt;</span><span class="n">if</span> <span class="n">test</span><span class="o">=</span><span class="nv">"status == 5"</span><span class="o">&gt;</span>
        <span class="k">and</span> <span class="k">c</span><span class="p">.</span><span class="n">connectStatus</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">and</span> <span class="k">c</span><span class="p">.</span><span class="n">createAdminId</span> <span class="k">is</span> <span class="k">not</span> <span class="k">NULL</span>
    <span class="o">&lt;/</span><span class="n">if</span><span class="o">&gt;</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">List</span><span class="o">&lt;</span><span class="n">CouponItemGood</span><span class="o">&gt;</span> <span class="nf">dataByParam</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"status"</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">status</span><span class="o">,</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status !=null and status !=''"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status == 5"</span><span class="nt">&gt;</span>
        and c.connectStatus = 0 and c.createAdminId is not NULL
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status == 1"</span><span class="nt">&gt;</span>
        and c.connectStatus = 1 and c.status = 1 and c.createAdminId is not NULL
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status == 2"</span><span class="nt">&gt;</span>
        and c.connectStatus = 1 and c.status = 0 and c.createAdminId is not NULL
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status == 3"</span><span class="nt">&gt;</span>
        and c.status = 2  and c.createAdminId is not NULL
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status == 4"</span><span class="nt">&gt;</span>
        and c.createAdminId  is NULL
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status == 6 "</span><span class="nt">&gt;</span>
        and c.status  not in (0)  and c.zhiboStatus=1
    <span class="nt">&lt;/if&gt;</span>
    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status == 7 "</span><span class="nt">&gt;</span>
        and c.scheduleDealStatus = 0 and c.createAdminId is not NULL
    <span class="nt">&lt;/if&gt;</span>
<span class="nt">&lt;/if&gt;</span>
</code></pre></div></div>

<h3 id="232ç¬¬äºŒç§è§£å†³æ–¹æ³•">23.2ã€ç¬¬äºŒç§è§£å†³æ–¹æ³•</h3>

<p>ä½¿ç”¨æ—¶å¢åŠ å¤šä¸€ä¸ªor status == 0åˆ¤æ–­</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"status != null and status !=Â  ''Â or status == 0"</span><span class="nt">&gt;</span>

</code></pre></div></div>

<h2 id="24æŸ¥è¯¢éšæœºæ•°ä¼˜åŒ–">24ã€æŸ¥è¯¢éšæœºæ•°ä¼˜åŒ–</h2>

<h4 id="241-æ€§èƒ½æ¯”è¾ƒå·®çš„ä¸€ä¸ª">24.1 ã€æ€§èƒ½æ¯”è¾ƒå·®çš„ä¸€ä¸ª</h4>

<p>RAND() Â å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå°äº1çš„éšæœºæ•°ã€€ã€€</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">BY</span> <span class="n">RAND</span><span class="p">()</span> <span class="k">LIMIT</span> <span class="mi">1</span>

</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--å¤±æ•ˆä¹‹åï¼Œä»é€‰å“åº“ä¸­éšä¾¿æ‰¾ä¸€ä¸ª --&gt;</span>
<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"wechatSuiJiItemGoodImageUrl"</span> <span class="na">resultType=</span><span class="s">"java.lang.String"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;![CDATA[
        SELECT c.erWeiMaInfoUrl FROM coupon_item_good c WHERE
          TIMESTAMPDIFF(DAY ,cdate,now())  &lt; 5 ORDER BY RAND() LIMIT 1
    ]]&gt;</span>
<span class="nt">&lt;/select&gt;</span>

</code></pre></div></div>

<h4 id="242ä¼˜åŒ–">24.2ã€ä¼˜åŒ–</h4>

<p>SQL ROUND() è¯­æ³•</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">ROUND</span><span class="p">(</span><span class="k">column_name</span><span class="p">,</span><span class="n">decimals</span><span class="p">)</span> <span class="k">FROM</span> <span class="k">table_name</span>

</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>æè¿°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>column_name</td>
      <td>å¿…éœ€ã€‚è¦èˆå…¥çš„å­—æ®µ</td>
    </tr>
    <tr>
      <td>decimals</td>
      <td>éå¿…éœ€ï¼Œè§„å®šè¿”å›çš„å°æ•°ä½æ•°ï¼Œå¦‚æœä¸ç»™å€¼ï¼Œåˆ™è‡ªåŠ¨å››èˆäº”å…¥å–æ•´å–æ•´ï¼Œselect round(100.9) ;  101</td>
    </tr>
  </tbody>
</table>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="err">éšæœºé€‰æ‹©ä¸€ä¸ª</span><span class="n">id</span><span class="err">ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªå¤§äºä»–çš„æ•°æ®ï¼Œ</span><span class="k">limit</span><span class="err">æ§åˆ¶ä¸º</span><span class="mi">1</span>
<span class="err">éšæœºé€‰æ‹©ä¸€ä¸ªæ¨å¹¿ä½ï¼Œå…·ä½“æ¡ä»¶å°±æ˜¯ä¸‹é¢</span><span class="k">and</span><span class="err">ä¸­è¿æ¥çš„</span><span class="k">and</span> <span class="n">t1</span><span class="p">.</span><span class="n">status</span> <span class="err">å¼€å§‹</span>

<span class="o">&gt;</span>     <span class="o">&lt;</span><span class="k">select</span> <span class="n">id</span><span class="o">=</span><span class="nv">"findUserCouponAdzone"</span> <span class="n">resultType</span><span class="o">=</span><span class="nv">"com.duodian.youhui.entity.db.coupon.CouponAdzone"</span><span class="o">&gt;</span>
   <span class="o">&lt;!</span><span class="p">[</span><span class="n">CDATA</span><span class="p">[</span>
        <span class="k">SELECT</span> <span class="o">*</span>
        <span class="k">FROM</span> <span class="nv">`coupon_adzone`</span> <span class="k">AS</span> <span class="n">t1</span>
          <span class="k">JOIN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">ROUND</span><span class="p">(</span><span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
                                       <span class="k">FROM</span> <span class="nv">`coupon_adzone`</span><span class="p">))</span> <span class="k">AS</span> <span class="n">id</span><span class="p">)</span> <span class="k">AS</span> <span class="n">t2</span>
        <span class="k">WHERE</span> <span class="n">t1</span><span class="p">.</span><span class="n">id</span> <span class="o">&gt;=</span> <span class="n">t2</span><span class="p">.</span><span class="n">id</span> 

<span class="k">and</span> <span class="n">t1</span><span class="p">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">AND</span>  <span class="n">t1</span><span class="p">.</span><span class="n">adzoneType</span> <span class="o">=</span> <span class="mi">3</span>  <span class="k">and</span> <span class="p">(</span><span class="n">TIMESTAMPDIFF</span><span class="p">(</span><span class="n">HOUR</span><span class="p">,</span> <span class="n">t1</span><span class="p">.</span><span class="n">userUseTime</span><span class="p">,</span> <span class="n">now</span><span class="p">())</span> <span class="o">&gt;</span> <span class="o">#</span><span class="err">{</span><span class="n">timeDiff</span><span class="err">}</span> <span class="k">OR</span> <span class="n">t1</span><span class="p">.</span><span class="n">userInfoId</span> <span class="k">IS</span> <span class="k">NULL</span> <span class="p">)</span>
        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">t1</span><span class="p">.</span><span class="n">id</span> <span class="k">ASC</span>
        <span class="k">LIMIT</span> <span class="mi">1</span><span class="p">;</span>
   <span class="p">]]</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="k">select</span><span class="o">&gt;</span>
</code></pre></div></div>

<h2 id="25-group_concat---sqlè¯­å¥å°†æŸä¸€åˆ—çš„å€¼æŸ¥è¯¢æˆé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²">25ã€ GROUP_CONCAT  -sqlè¯­å¥å°†æŸä¸€åˆ—çš„å€¼æŸ¥è¯¢æˆï¼Œé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²</h2>
<p>#</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">GROUP_CONCAT</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">id</span><span class="p">)</span> <span class="k">from</span> <span class="n">coupon_item_good</span><span class="p">;</span>


<span class="err">è¿”å›ç»“æœ</span>

<span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">26</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">33</span>

</code></pre></div></div>

<h2 id="26find_in_set--æŸ¥è¯¢å­—æ®µä¸ºé€—å·éš”å¼€çš„å­—æ®µå±æ€§">26ã€find_in_set  æŸ¥è¯¢å­—æ®µä¸ºé€—å·éš”å¼€çš„å­—æ®µå±æ€§</h2>

<p>å­—æ®µ pnumä¸ºé€—å·éš”å¼€çš„å­—ç¬¦ä¸²</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">9</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">test</span>  <span class="n">t</span> <span class="k">where</span> <span class="n">find_in_set</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">pnum</span><span class="p">)</span> <span class="p">;</span>
</code></pre></div></div>

<p>æŸ¥çœ‹æŸä¸ªå­—ç¬¦ä¸²ä¸­å­˜åœ¨</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">update</span> <span class="n">site</span> <span class="k">set</span> <span class="n">url</span> <span class="o">=</span><span class="n">concat</span><span class="p">(</span><span class="s1">'http://'</span><span class="p">,</span><span class="n">url</span><span class="p">)</span> <span class="k">where</span> <span class="n">locate</span><span class="p">(</span><span class="s1">'http://'</span><span class="p">,</span><span class="n">url</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span> 

</code></pre></div></div>

<h2 id="27whencaseè¿›è¡Œæ¡ä»¶åˆ¤æ–­">27ã€whenï¼Œcaseã€è¿›è¡Œæ¡ä»¶åˆ¤æ–­</h2>

<p>**</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="k">case</span> <span class="n">cp</span><span class="p">.</span><span class="n">ssid</span> <span class="k">when</span> <span class="s1">'aa'</span> <span class="k">then</span> <span class="s1">'0'</span> <span class="k">else</span><span class="s1">'1'</span> <span class="k">end</span> <span class="k">as</span> <span class="n">flag</span><span class="p">,</span> <span class="nv">"+
      "</span> <span class="k">case</span> <span class="n">cp</span><span class="p">.</span><span class="n">ssid</span> <span class="k">when</span> <span class="s1">'aa'</span> <span class="k">then</span> <span class="s1">'3001'</span> <span class="k">else</span> <span class="s1">'0000'</span> <span class="k">end</span>  <span class="k">as</span> <span class="n">retCode</span><span class="p">,</span><span class="nv">"+
</span></code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">"SELECT cp.ssid AS ssid,"</span> <span class="o">+</span>
      <span class="nv">" cp.accname AS accname,"</span> <span class="o">+</span>
      <span class="nv">" cp.PAYSUMUNTAX AS PAYSUMUNTAX,"</span> <span class="o">+</span>
      <span class="nv">" cp.PAYTAX AS PAYTAX,"</span> <span class="o">+</span>
      <span class="nv">" cp.payaftersum AS payAmt,"</span> <span class="o">+</span>
      <span class="nv">" cp.benetype AS benetype,"</span> <span class="o">+</span>
      <span class="nv">" cp.memo AS memo,"</span> <span class="o">+</span>
    <span class="nv">" case cp.ssid when 'aa' then '0' else'1' end as flag, "</span><span class="o">+</span>
      <span class="nv">" case cp.ssid when 'aa' then '3001' else '0000' end  as retCode,"</span><span class="o">+</span>
      <span class="nv">" to_char(sysdate,'yyyyMMdd') as drawDate,"</span><span class="o">+</span>
      <span class="nv">" to_char(sysdate,'HH24mmss') as drawTime"</span><span class="o">+</span>
  <span class="nv">" FROM CSIP_OA_PAYLISTINFO CPI"</span> <span class="o">+</span>
 <span class="nv">" JOIN CSIP_OA_TASKFILE CT"</span> <span class="o">+</span>
   <span class="nv">" ON CPI.PK_PAYLISTINFO = CT.PK_PAYLISTINFO"</span> <span class="o">+</span>
 <span class="nv">" JOIN CSIP_OA_PAYLIST CP"</span> <span class="o">+</span>
   <span class="nv">" ON CP.PK_TASKFILE = CT.PK_TASKFILE"</span> <span class="o">+</span>
<span class="nv">" WHERE CPI.INNER_LISTNO = '"</span><span class="o">+</span><span class="n">inworkflowno</span><span class="o">+</span><span class="nv">"'"</span> <span class="p">;</span>
</code></pre></div></div>

<h2 id="28å’Œé¡¹ç›®ä¸­ä½¿ç”¨çš„åŒºåˆ«">28ã€#å’Œ$é¡¹ç›®ä¸­ä½¿ç”¨çš„åŒºåˆ«</h2>

<h3 id="281å˜é‡åå¯ä»¥è¿›è¡Œé¢„ç¼–è¯‘ç±»å‹åŒ¹é…ç­‰æ“ä½œå˜é‡åä¼šè½¬åŒ–ä¸ºjdbcçš„ç±»å‹å˜é‡åä¸è¿›è¡Œæ•°æ®ç±»å‹åŒ¹é…ç›´æ¥æ›¿æ¢">28.1ã€#{å˜é‡å}å¯ä»¥è¿›è¡Œé¢„ç¼–è¯‘ã€ç±»å‹åŒ¹é…ç­‰æ“ä½œï¼Œ#{å˜é‡å}ä¼šè½¬åŒ–ä¸ºjdbcçš„ç±»å‹,${å˜é‡å}ä¸è¿›è¡Œæ•°æ®ç±»å‹åŒ¹é…ï¼Œç›´æ¥æ›¿æ¢ã€‚</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">tablename</span> <span class="k">where</span> <span class="n">id</span> <span class="o">=</span> <span class="o">#</span><span class="err">{</span><span class="n">id</span><span class="err">}</span>


<span class="err">å‡è®¾</span><span class="n">id</span><span class="err">çš„å€¼ä¸º</span><span class="mi">12</span><span class="err">ï¼Œå…¶ä¸­å¦‚æœæ•°æ®åº“å­—æ®µ</span><span class="n">id</span><span class="err">ä¸ºå­—ç¬¦å‹ï¼Œé‚£ä¹ˆ</span><span class="o">#</span><span class="err">{</span><span class="n">id</span><span class="err">}è¡¨ç¤ºçš„å°±æ˜¯</span><span class="s1">'12'</span><span class="err">ï¼Œå¦‚æœ</span><span class="n">id</span><span class="err">ä¸ºæ•´å‹ï¼Œé‚£ä¹ˆ</span><span class="n">id</span><span class="err">å°±æ˜¯</span><span class="mi">12</span><span class="err">ï¼Œå¹¶ä¸”</span><span class="n">MyBatis</span><span class="err">ä¼šå°†ä¸Šé¢</span><span class="k">SQL</span><span class="err">è¯­å¥è½¬åŒ–ä¸º</span><span class="n">jdbc</span><span class="err">çš„</span><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">tablename</span> <span class="k">where</span> <span class="n">id</span><span class="o">=?</span><span class="err">ï¼ŒæŠŠ</span><span class="o">?</span><span class="err">å‚æ•°è®¾ç½®ä¸º</span><span class="n">id</span><span class="err">çš„å€¼ã€‚</span>



<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">tablename</span> <span class="k">where</span> <span class="n">id</span> <span class="o">=</span> <span class="err">${</span><span class="n">id</span><span class="err">}</span>
<span class="err">å¦‚æœå­—æ®µ</span><span class="n">id</span><span class="err">ä¸ºæ•´å‹ï¼Œ</span><span class="k">sql</span><span class="err">è¯­å¥å°±ä¸ä¼šå‡ºé”™ï¼Œä½†æ˜¯å¦‚æœå­—æ®µ</span><span class="n">id</span><span class="err">ä¸ºå­—ç¬¦å‹ï¼Œ</span> <span class="err">é‚£ä¹ˆ</span><span class="k">sql</span><span class="err">è¯­å¥åº”è¯¥å†™æˆ</span><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="k">table</span> <span class="k">where</span> <span class="n">id</span> <span class="o">=</span> <span class="s1">'${id}'</span><span class="err">ã€‚</span>

</code></pre></div></div>

<h3 id="282æ–¹å¼èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦é˜²æ­¢sqlæ³¨å…¥å› ä¸ºä¼šè‡ªåŠ¨è½¬æ¢è€Œä¸ºç›´æ¥æ›¿æ¢æ‰€ä»¥æ–¹å¼æ— æ³•é˜²æ­¢sqlæ³¨å…¥">28.2ã€æ–¹å¼èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦é˜²æ­¢sqlæ³¨å…¥ã€‚å› ä¸º#ä¼šè‡ªåŠ¨è½¬æ¢ï¼Œè€Œ&amp;ä¸ºç›´æ¥æ›¿æ¢,æ‰€ä»¥$æ–¹å¼æ— æ³•é˜²æ­¢sqlæ³¨å…¥ã€‚</h3>

<h3 id="283é¡¹ç›®ä¸­çš„ä½¿ç”¨å°½é‡ä½¿ç”¨-å°‘ç”¨-è‡­å°å­æ˜ç™½äº†å§">28.3ã€é¡¹ç›®ä¸­çš„ä½¿ç”¨ï¼Œå°½é‡ä½¿ç”¨# ï¼Œå°‘ç”¨&amp; è‡­å°å­ï¼Œæ˜ç™½äº†å§</h3>

<p><code class="highlighter-rouge">#</code>é€‚ç”¨äºæ™®é€šçš„å‚æ•°ä¼ å…¥</p>

<p><code class="highlighter-rouge">$</code>æ–¹å¼ä¸€èˆ¬ç”¨äºä¼ å…¥æ•°æ®åº“å¯¹è±¡ï¼Œä¾‹å¦‚ä¼ å…¥è¡¨åã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>orderä¸º A ASC, A DESC ,B DESC ï¼ŒB ascæ•°æ®ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨#æ˜¯é”™è¯¯çš„

 &lt;when  test="order != null"&gt;
                     order by  ${order}
  &lt;/when&gt;
</code></pre></div></div>

<h2 id="29mysqlé™¤æ³•">29ã€mysqlé™¤æ³•</h2>

<p>ä½™æ•°å¯ä»¥ä¸º0ï¼Œå¾—åˆ°çš„ç»“æœä¸ºNUll</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SELECT</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span> <span class="n">from</span> <span class="n">dual</span> <span class="o">;</span>
</code></pre></div></div>

<p><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/WX20181212-160341.png" alt="WX20181212-160341" /></p>

<h2 id="30mysql-å–å°æ•°-convert---round--cast">30ã€mysql å–å°æ•° convert   round  cast</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">1</span><span class="err">ã€</span><span class="k">convert</span><span class="err">ï¼ˆå››èˆäº”å…¥ï¼‰</span>

<span class="k">select</span> <span class="k">convert</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span><span class="n">decimal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">));</span>

<span class="o">#</span> <span class="err">å››èˆäº”å…¥ï¼Œ</span><span class="n">decimal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="err">åé¢çš„ä»£è¡¨æœ€å¤§é•¿åº¦</span><span class="mi">10</span><span class="err">ä»¥åŠä¿ç•™çš„å°æ•°ä½æ•°</span><span class="mi">2</span>
<span class="k">select</span> <span class="k">convert</span><span class="p">(</span><span class="mi">10569</span><span class="p">.</span><span class="mi">3645</span><span class="p">,</span><span class="n">decimal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">));</span>    <span class="o">#</span><span class="mi">10569</span><span class="p">.</span><span class="mi">36</span>
<span class="k">select</span> <span class="k">convert</span><span class="p">(</span><span class="mi">10569</span><span class="p">.</span><span class="mi">3665555</span><span class="p">,</span><span class="n">decimal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">));</span> <span class="o">#</span><span class="mi">10569</span><span class="p">.</span><span class="mi">37</span>


<span class="mi">2</span><span class="err">ã€</span><span class="n">round</span><span class="err">ï¼ˆè‡ªåŠ¨å››èˆäº”å…¥ï¼‰</span>
<span class="o">#</span> <span class="n">round</span> <span class="err">ç¬¬äºŒä¸ªè¡¨ç¤ºä¿ç•™å‡ ä½ï¼Œå¦‚æœä¹‹å‰æœ‰å°æ•°ï¼Œé‚£ä¹ˆä¸è¶³çš„è¡¥ä¸Š</span><span class="mi">0</span><span class="err">ã€‚è‚¯å®šæ˜¯å¤Ÿçš„ã€‚</span>
<span class="o">#</span>        <span class="err">ç¬¬äºŒä¸ªå¦‚æœä¸ºè´Ÿæ•°</span> <span class="o">-</span><span class="mi">1</span> <span class="err">ä»£è¡¨ä¸ªä½æ•°ä¸º</span><span class="mi">0</span>             <span class="n">ROUND</span><span class="p">(</span><span class="mi">114</span><span class="p">.</span><span class="mi">6</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="err">ç»“æœ</span> <span class="mi">110</span><span class="err">ï¼Œ</span>
<span class="o">#</span>                      <span class="o">-</span><span class="mi">2</span> <span class="err">ä»£è¡¨ä¸ªä½æ•°å’Œååˆ†ä½</span> <span class="err">ä¸º</span><span class="mi">0</span> <span class="err">ä¾‹å¦‚</span> <span class="n">ROUND</span><span class="p">(</span><span class="mi">114</span><span class="p">.</span><span class="mi">6</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="err">ç»“æœ</span>  <span class="mi">100</span>
<span class="o">#</span> <span class="mi">100</span><span class="p">.</span><span class="mi">35</span>  <span class="mi">100</span> <span class="mi">0</span><span class="p">.</span><span class="mi">60</span>  <span class="mi">110</span>
<span class="k">SELECT</span> <span class="n">ROUND</span><span class="p">(</span><span class="mi">100</span><span class="p">.</span><span class="mi">3465</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">ROUND</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">ROUND</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">ROUND</span><span class="p">(</span><span class="mi">114</span><span class="p">.</span><span class="mi">6</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">;</span>


<span class="mi">3</span><span class="err">ã€</span><span class="k">cast</span><span class="err">ï¼Œå¼ºåˆ¶è½¬æ¢</span>
<span class="k">select</span> <span class="k">cast</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="mi">1</span><span class="o">/</span><span class="mi">4</span> <span class="k">as</span> <span class="n">decimal</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="k">from</span> <span class="n">dual</span>


</code></pre></div></div>

<h2 id="31å­æŸ¥è¯¢">31ã€å­æŸ¥è¯¢</h2>

<h3 id="311å­æŸ¥è¯¢ä¸­çš„å˜é‡æ˜¯ä¸å¯ä»¥æ˜¯å“¦ç”¨å¤–é¢çš„å˜é‡çš„">31.1ã€å­æŸ¥è¯¢ä¸­çš„å˜é‡æ˜¯ä¸å¯ä»¥æ˜¯å“¦ç”¨å¤–é¢çš„å˜é‡çš„</h3>

<h4 id="æ¯”å¦‚ä¸‹é¢çš„-userinfoid-æ˜¯ä¸å¯ä»¥ä½¿ç”¨uçš„åªèƒ½æ˜¯ä½¿ç”¨å·²çŸ¥çš„å‚æ•°">æ¯”å¦‚ä¸‹é¢çš„ #{userInfoId} æ˜¯ä¸å¯ä»¥ä½¿ç”¨uçš„ã€‚åªèƒ½æ˜¯ä½¿ç”¨å·²çŸ¥çš„å‚æ•°</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">select</span>
               <span class="n">o</span><span class="p">.</span><span class="n">payAmount</span><span class="p">,</span>
               <span class="n">o</span><span class="p">.</span><span class="n">estimateAmount</span><span class="p">,</span>
               <span class="p">(</span><span class="n">o3</span><span class="p">.</span><span class="n">notValidOrderSize</span> <span class="o">+</span><span class="n">o</span><span class="p">.</span><span class="n">orderSize</span><span class="p">)</span> <span class="k">as</span> <span class="n">orderSize</span>
        <span class="k">from</span> <span class="n">user_info</span> <span class="n">u</span>
                       <span class="k">left</span> <span class="k">join</span>  <span class="p">(</span><span class="k">select</span>    <span class="n">IFNULL</span><span class="p">(</span><span class="k">count</span><span class="p">(</span><span class="n">o1</span><span class="p">.</span><span class="n">orderNo</span><span class="p">),</span><span class="mi">0</span> <span class="p">)</span>  <span class="k">as</span> <span class="n">orderSize</span> <span class="p">,</span>
                                             <span class="n">IFNULL</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">o1</span><span class="p">.</span><span class="n">estimateAmount</span><span class="p">)</span> <span class="p">,</span><span class="mi">0</span><span class="p">)</span>  <span class="k">as</span>  <span class="n">estimateAmount</span> <span class="p">,</span>
                                             <span class="n">IFNULL</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">o1</span><span class="p">.</span><span class="n">payAmount</span><span class="p">)</span> <span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">as</span> <span class="n">payAmount</span><span class="p">,</span>
                                             <span class="n">o1</span><span class="p">.</span><span class="n">userInfoId</span> <span class="k">as</span> <span class="n">userInfoId</span>
                                     <span class="k">from</span>    <span class="n">user_order</span> <span class="n">o1</span>
                                     <span class="k">where</span>   <span class="n">o1</span><span class="p">.</span><span class="n">userInfoId</span> <span class="o">=</span> <span class="o">#</span><span class="err">{</span><span class="n">userInfoId</span><span class="err">}</span> <span class="k">and</span>
                                             <span class="n">o1</span><span class="p">.</span><span class="n">orderStatus</span> <span class="o">!=</span><span class="s1">'è®¢å•å¤±æ•ˆ'</span>
                                  <span class="p">)</span>
               <span class="n">o</span> <span class="k">on</span> <span class="n">o</span><span class="p">.</span><span class="n">userInfoId</span> <span class="o">=</span> <span class="n">u</span><span class="p">.</span><span class="n">id</span>
                       <span class="k">left</span> <span class="k">join</span>   <span class="p">(</span><span class="k">select</span> <span class="n">IFNULL</span><span class="p">(</span><span class="k">count</span><span class="p">(</span><span class="n">o2</span><span class="p">.</span><span class="n">orderNo</span><span class="p">),</span><span class="mi">0</span> <span class="p">)</span> <span class="k">as</span> <span class="n">notValidOrderSize</span><span class="p">,</span>
                                             <span class="n">o2</span><span class="p">.</span><span class="n">userInfoId</span> <span class="k">as</span> <span class="n">userInfoId</span>
                                      <span class="k">from</span>   <span class="n">user_order</span> <span class="n">o2</span>
                                      <span class="k">where</span> <span class="n">o2</span><span class="p">.</span><span class="n">orderStatus</span> <span class="o">=</span><span class="s1">'è®¢å•å¤±æ•ˆ'</span>  <span class="k">and</span> <span class="n">o2</span><span class="p">.</span><span class="n">userInfoId</span> <span class="o">=</span> <span class="o">#</span><span class="err">{</span><span class="n">userInfoId</span><span class="err">}</span>
                                   <span class="p">)</span>
              <span class="n">o3</span> <span class="k">on</span> <span class="n">o3</span><span class="p">.</span><span class="n">userInfoId</span> <span class="o">=</span> <span class="n">u</span><span class="p">.</span><span class="n">id</span>
        <span class="k">where</span> <span class="n">u</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">#</span><span class="err">{</span><span class="n">userInfoId</span><span class="err">}</span><span class="p">;</span>
 <span class="n">u</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> 
</code></pre></div></div>

<h3 id="312å†…éƒ¨æŸ¥è¯¢æ˜¯å¯ä»¥ä½¿ç”¨å¤–é¢çš„ä¸‹é¢æ˜¯æ›´æ–°å†…éƒ¨æŸ¥è¯¢æ˜¯ä¸å¯ä»¥ä½¿ç”¨è¢«æ›´æ–°å¯¹è±¡è¿›è¡Œç­›é€‰çš„">31.2ã€å†…éƒ¨æŸ¥è¯¢æ˜¯å¯ä»¥ä½¿ç”¨å¤–é¢çš„,ä¸‹é¢æ˜¯æ›´æ–°ï¼Œå†…éƒ¨æŸ¥è¯¢æ˜¯ä¸å¯ä»¥ä½¿ç”¨è¢«æ›´æ–°å¯¹è±¡è¿›è¡Œç­›é€‰çš„</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">update</span>  <span class="n">user_access_erweima_ip_info</span> <span class="n">u</span> <span class="k">set</span> <span class="n">u</span><span class="p">.</span><span class="n">dingId</span> <span class="o">=</span> <span class="p">(</span>
   <span class="k">select</span> <span class="k">c</span><span class="p">.</span><span class="n">dingId</span> <span class="k">from</span>  <span class="n">coupon_adzone</span>  <span class="k">c</span> <span class="k">where</span> <span class="k">c</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">u</span><span class="p">.</span><span class="n">couponAdzoneId</span>
 <span class="p">)</span> <span class="k">where</span>  <span class="n">u</span><span class="p">.</span><span class="n">dingId</span> <span class="k">is</span> <span class="k">null</span> <span class="p">;</span>
 
</code></pre></div></div>

<h2 id="32sqlæŸ¥è¯¢ç»“æœåŠ æ³•">32ã€sqlæŸ¥è¯¢ç»“æœåŠ æ³•</h2>

<p>å°½é‡æ¯ä¸ªå‚æ•°éƒ½å¸¦ä¸ŠifNULLï¼Œé˜²æ­¢null+sizeé€ æˆçš„æ•°æ®æ—¶nullï¼Œä¸æ˜¾ç¤º</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>


  <span class="k">select</span>  <span class="n">o</span><span class="p">.</span><span class="n">payAmount</span><span class="p">,</span>
          <span class="n">o</span><span class="p">.</span><span class="n">estimateAmount</span><span class="p">,</span>
         <span class="p">(</span><span class="n">o3</span><span class="p">.</span><span class="n">notValidOrderSize</span> <span class="o">+</span><span class="n">o</span><span class="p">.</span><span class="n">orderSize</span><span class="p">)</span> <span class="k">as</span> <span class="n">orderSize</span>
        <span class="k">from</span> <span class="n">user_info</span> <span class="n">u</span>
        

<span class="p">(</span><span class="n">IFNULL</span><span class="p">(</span><span class="n">o3</span><span class="p">.</span><span class="n">notValidOrderSize</span> <span class="p">,</span><span class="mi">0</span> <span class="p">)</span> <span class="o">+</span> <span class="n">IFNULL</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">orderSize</span> <span class="p">,</span><span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="k">as</span> <span class="n">orderSize</span>
<span class="p">(</span><span class="n">o3</span><span class="p">.</span><span class="n">notValidOrderSize</span> <span class="o">+</span><span class="n">o</span><span class="p">.</span><span class="n">orderSize</span><span class="p">)</span> <span class="k">as</span> <span class="n">orderSize</span>
        
</code></pre></div></div>

<h2 id="33æŸä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—æ®µæŸ¥æ‰¾é‡å¤æ•°æ®çš„sqlè¯­å¥">33ã€æŸä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—æ®µæŸ¥æ‰¾é‡å¤æ•°æ®çš„sqlè¯­å¥</h2>

<h3 id="331è¡¨ä¸­æœ‰idå’Œname-ä¸¤ä¸ªå­—æ®µæŸ¥è¯¢å‡ºnameé‡å¤çš„æ‰€æœ‰æ•°æ®">33.1ã€è¡¨ä¸­æœ‰idå’Œname ä¸¤ä¸ªå­—æ®µï¼ŒæŸ¥è¯¢å‡ºnameé‡å¤çš„æ‰€æœ‰æ•°æ®</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">group</span> <span class="k">by</span> <span class="n">username</span>   <span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>
                             

<span class="k">select</span> <span class="o">*</span> 
<span class="k">from</span> <span class="n">healerjean</span> <span class="n">a</span> 
<span class="k">where</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">username</span><span class="p">)</span> <span class="k">in</span> <span class="p">(</span>
                    <span class="k">select</span> <span class="n">username</span> 
                    <span class="k">from</span> <span class="n">healerjean</span> 
                    <span class="k">group</span> <span class="k">by</span> <span class="n">username</span> 
                             <span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>
                    <span class="p">)</span>

</code></pre></div></div>

<h3 id="332åˆ é™¤åˆ†ç»„ä¸­é‡è¯»çš„æ•°æ®åªä¿ç•™idæœ€å°çš„è®°å½•">33.2ã€åˆ é™¤åˆ†ç»„ä¸­é‡è¯»çš„æ•°æ®ï¼Œåªä¿ç•™idæœ€å°çš„è®°å½•</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">delete</span> <span class="k">from</span> <span class="n">healerjean</span> 
<span class="k">where</span> <span class="n">username</span> <span class="k">in</span> <span class="p">(</span>
                    <span class="k">select</span> <span class="n">username</span> 
                    <span class="k">from</span> <span class="n">healerjean</span> 
                    <span class="k">group</span> <span class="k">by</span> <span class="n">username</span> 
                    <span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="n">username</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>
                    <span class="p">)</span>
      <span class="k">and</span> <span class="n">id</span> <span class="k">not</span> <span class="k">in</span> <span class="p">(</span>
                    <span class="k">select</span> <span class="k">min</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>   <span class="o">#</span><span class="err">æ¯ç»„ä¸­æœ€å°çš„æ•°æ®</span>
                    <span class="k">from</span> <span class="n">healerjean</span> 
                    <span class="k">group</span> <span class="k">by</span> <span class="n">username</span> 
                    <span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="n">username</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span>


</code></pre></div></div>

<h3 id="333æŸ¥æ‰¾è¡¨ä¸­å¤šä½™çš„é‡å¤è®°å½•å¤šä¸ªå­—æ®µ">33.3ã€æŸ¥æ‰¾è¡¨ä¸­å¤šä½™çš„é‡å¤è®°å½•ï¼ˆå¤šä¸ªå­—æ®µï¼‰</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="err">ä¸‹é¢è¿™ä¸ªå°±ä¿è¯äº†ï¼Œè‚¯å®šæ˜¯äºŒè€…åŒæ—¶å­˜åœ¨æ‰ä¼šå‡ºç°</span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span> 
<span class="err">å¦‚æœæ²¡æœ‰</span><span class="k">having</span><span class="err">åˆ™ï¼Œä¼šå‡ºç°å…ˆæ ¹æ®</span><span class="n">peopleId</span><span class="err">åˆ†ç»„ï¼Œç„¶åç»„å†…ï¼Œå†æ ¹æ®</span><span class="n">seq</span> <span class="err">åˆ†ç»„ã€‚</span>

<span class="k">group</span> <span class="k">by</span> <span class="n">peopleId</span><span class="p">,</span><span class="n">seq</span> <span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>
                            
<span class="k">select</span> <span class="o">*</span> 
<span class="k">from</span> <span class="n">vitae</span> <span class="n">a</span>
<span class="k">where</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">peopleId</span><span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">seq</span><span class="p">)</span> <span class="k">in</span> <span class="p">(</span>
                            <span class="k">select</span> <span class="n">peopleId</span><span class="p">,</span>    
                                   <span class="n">seq</span>      
                            <span class="k">from</span> <span class="n">vitae</span> 
                            <span class="k">group</span> <span class="k">by</span> <span class="n">peopleId</span><span class="p">,</span><span class="n">seq</span> 
                            <span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>


</code></pre></div></div>

<h3 id="334é€‰æ‹©è¡¨ä¸­å¤šä½™çš„é‡å¤è®°å½•å¤šä¸ªå­—æ®µåªç•™æœ‰idæœ€å°çš„è®°å½•">33.4ã€é€‰æ‹©è¡¨ä¸­å¤šä½™çš„é‡å¤è®°å½•ï¼ˆå¤šä¸ªå­—æ®µï¼‰ï¼Œåªç•™æœ‰idæœ€å°çš„è®°å½•</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

<span class="k">select</span> <span class="o">*</span> 
<span class="k">from</span> <span class="n">vitae</span> <span class="n">a</span>
<span class="k">where</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">peopleId</span><span class="p">,</span><span class="n">a</span><span class="p">.</span><span class="n">seq</span><span class="p">)</span> <span class="k">in</span> <span class="p">(</span>
                            <span class="k">select</span> <span class="n">peopleId</span><span class="p">,</span>    
                                   <span class="n">seq</span>      
                            <span class="k">from</span> <span class="n">vitae</span> 
                            <span class="k">group</span> <span class="k">by</span> <span class="n">peopleId</span><span class="p">,</span><span class="n">seq</span> 
                            <span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">and</span> <span class="n">id</span> <span class="k">not</span> <span class="k">in</span>           <span class="p">(</span> <span class="k">select</span> <span class="k">min</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>   
                            <span class="k">from</span> <span class="n">vitae</span> 
                            <span class="k">group</span> <span class="k">by</span> <span class="n">peopleId</span><span class="p">,</span><span class="n">seq</span> 
                            <span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
 
</code></pre></div></div>

<h2 id="34abså–ç»å¯¹å€¼">34ã€ABSå–ç»å¯¹å€¼</h2>

<p>æœ‰æ—¶å€™é¡¹ç›®ä¸­å‡ºç°ä¸¤ä¸ªæ•°å­—ç›¸å‡ï¼Œå¯èƒ½æ˜¯è´Ÿæ•°ï¼Œä½†æ˜¯åªæ˜¯éœ€è¦è¿™è¿ä¸ªæ•°çš„å·®å€¼ï¼Œæ‰€ä»¥å°±éœ€è¦ç”¨å®ƒ</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="p">(</span><span class="k">ABS</span><span class="p">(</span> <span class="n">TIMESTAMPDIFF</span><span class="p">(</span><span class="k">MINUTE</span><span class="p">,</span><span class="n">i</span><span class="p">.</span><span class="n">cdate</span><span class="p">,</span><span class="o">#</span><span class="err">{</span><span class="n">createTime</span><span class="err">}</span><span class="p">)</span> <span class="p">))</span><span class="o">&lt;</span> <span class="o">#</span><span class="err">{</span><span class="n">adzoneTime</span><span class="err">}</span><span class="o">****</span>

</code></pre></div></div>

<h2 id="35mysqlåˆ¤æ–­æ˜¯å¦ä¸ºnullæˆ–ç©ºå­—ç¬¦ä¸²">35ã€MySqlåˆ¤æ–­æ˜¯å¦ä¸ºnullæˆ–ç©ºå­—ç¬¦ä¸²</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">#</span> <span class="k">ISNULL</span><span class="p">(</span><span class="n">aBegBalRule</span><span class="p">)</span> <span class="o">||</span> <span class="k">LENGTH</span><span class="p">(</span><span class="k">trim</span><span class="p">(</span><span class="n">aBegBalRule</span><span class="p">))</span><span class="o">&lt;</span><span class="mi">1</span>

</code></pre></div></div>

<h2 id="36æ¸…è¡¨ä¸è¦ç”¨delete">36ã€æ¸…è¡¨ï¼ˆä¸è¦ç”¨deleteï¼‰</h2>

<p>deleteåˆ é™¤ä¹‹åè¿˜ä¼šå ç”¨idï¼Œ</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">truncate</span>  <span class="n">income_detail</span> <span class="o">;</span>

</code></pre></div></div>

<h2 id="37concatæ‹¼æ¥å­—ç¬¦ä¸²">37ã€CONCATã€æ‹¼æ¥å­—ç¬¦ä¸²</h2>

<h3 id="371æ¨¡ç³ŠæŸ¥è¯¢ä½¿ç”¨concatparams">37.1ã€æ¨¡ç³ŠæŸ¥è¯¢ä½¿ç”¨<code class="highlighter-rouge">concat('%',#{params},'%'))</code></h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
  <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">"params != null and params != ''"</span><span class="nt">&gt;</span>
                    and (
                    (u.nickName like  concat('%',#{params},'%')) or
                    (u.id = #{params})
                    )
 <span class="nt">&lt;/if&gt;</span>
                
</code></pre></div></div>

<h3 id="372æ‹¼æ¥">37.2ã€æ‹¼æ¥</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="k">SELECT</span> <span class="n">CONCAT</span><span class="p">(</span><span class="err">â€™</span><span class="n">My</span><span class="err">â€™</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="err">â€˜</span><span class="n">QL</span><span class="err">â€™</span><span class="p">);</span>
 
 <span class="n">MySQL</span>
 
<span class="o">#</span><span class="err">å¦‚æœæœ‰ä¸€ä¸ªå‚æ•°ä¸º</span><span class="k">null</span><span class="err">ï¼Œåˆ™è¿”å›ç»“æœä¸º</span><span class="k">null</span>
<span class="k">SELECT</span> <span class="n">CONCAT</span><span class="p">(</span><span class="err">â€™</span><span class="n">My</span><span class="err">â€™</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="err">â€˜</span><span class="n">QL</span><span class="err">â€™</span><span class="p">);</span>

<span class="k">NULL</span>
 
</code></pre></div></div>

<h3 id="373concat_ws-åˆ†éš”ç¬¦è¿æ¥å­—ç¬¦ä¸²">37.3ã€CONCAT_WS ï¼Œåˆ†éš”ç¬¦è¿æ¥å­—ç¬¦ä¸²</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…¶å®ƒå‚æ•°çš„åˆ†éš”ç¬¦ã€‚åˆ†éš”ç¬¦çš„ä½ç½®æ”¾åœ¨è¦è¿æ¥çš„ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´ã€‚åˆ†éš”ç¬¦å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒå‚æ•°ã€‚å¦‚æœåˆ†éš”ç¬¦ä¸º NULLï¼Œåˆ™ç»“æœä¸º NULLã€‚å‡½æ•°ä¼šå¿½ç•¥ä»»ä½•åˆ†éš”ç¬¦å‚æ•°åçš„ NULL å€¼ã€‚
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">SELECT</span> <span class="n">CONCAT_WS</span><span class="p">(</span><span class="s1">','</span><span class="p">,</span><span class="s1">'First name'</span><span class="p">,</span><span class="s1">'Second name'</span><span class="p">,</span><span class="s1">'Last Name'</span><span class="p">);</span>

<span class="k">First</span> <span class="n">name</span><span class="p">,</span><span class="k">Second</span> <span class="n">name</span><span class="p">,</span><span class="k">Last</span> <span class="n">Name</span>

<span class="k">SELECT</span> <span class="n">CONCAT_WS</span><span class="p">(</span><span class="s1">','</span><span class="p">,</span><span class="s1">'First name'</span><span class="p">,</span><span class="s1">''</span><span class="p">,</span><span class="s1">'Last Name'</span><span class="p">);</span>

<span class="k">First</span> <span class="n">name</span><span class="p">,,</span><span class="k">Last</span> <span class="n">Name</span> <span class="p">(</span><span class="err">ç©ºå­—ç¬¦ä¸²ä¸ä¼šå¿½ç•¥</span><span class="p">)</span>

<span class="k">SELECT</span> <span class="n">CONCAT_WS</span><span class="p">(</span><span class="s1">','</span><span class="p">,</span><span class="s1">'First name'</span><span class="p">,</span><span class="k">null</span> <span class="p">,</span><span class="s1">'Last Name'</span><span class="p">);</span>

<span class="k">First</span> <span class="n">name</span><span class="p">,</span><span class="k">Last</span> <span class="n">Name</span>




</code></pre></div></div>

<h2 id="38locate-å‡ºç°çš„ä½ç½®">38ã€locate å‡ºç°çš„ä½ç½®</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">SELECT</span> <span class="n">LOCATE</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'foobarbar'</span><span class="p">);</span> <span class="o">#</span><span class="mi">4</span>

<span class="k">SELECT</span> <span class="n">LOCATE</span><span class="p">(</span><span class="s1">'xbar'</span><span class="p">,</span> <span class="s1">'foobarbar'</span><span class="p">);</span> <span class="o">#</span><span class="mi">0</span>

<span class="err">ä½ç½®ä»</span><span class="mi">4</span><span class="err">å¼€å§‹æ•°èµ·</span> 
<span class="k">SELECT</span> <span class="n">LOCATE</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'foobarbar'</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span> <span class="o">#</span> <span class="mi">4</span>
<span class="err">ä½ç½®ä»</span><span class="mi">7</span><span class="err">å¼€å§‹æ•°èµ·</span>
<span class="k">SELECT</span> <span class="n">LOCATE</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'foobarbar'</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span> <span class="o">#</span> <span class="mi">7</span>


</code></pre></div></div>

<p>é¡¹ç›®ä½¿ç”¨</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="err">æŸ¥æ‰¾å…·æœ‰</span><span class="n">http</span><span class="err">å­—æ®µçš„ç”¨æˆ·</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">users</span> <span class="k">where</span> <span class="n">locate</span><span class="p">(</span><span class="s1">'http'</span><span class="p">,</span><span class="n">itemUrl</span><span class="p">);</span>


<span class="err">åˆ¤æ–­</span><span class="n">site</span><span class="err">è¡¨ä¸­çš„</span><span class="n">url</span><span class="err">æ˜¯å¦åŒ…å«</span><span class="s1">'http://'</span><span class="err">å­ä¸²</span><span class="p">,</span><span class="err">å¦‚æœä¸åŒ…å«åˆ™æ‹¼æ¥åœ¨</span><span class="n">url</span><span class="err">å­—ç¬¦ä¸²å¼€å¤´</span>

<span class="k">update</span> <span class="n">site</span> <span class="k">set</span> <span class="n">url</span> <span class="o">=</span><span class="n">concat</span><span class="p">(</span><span class="s1">'http://'</span><span class="p">,</span><span class="n">url</span><span class="p">)</span> <span class="k">where</span> <span class="n">locate</span><span class="p">(</span><span class="s1">'http://'</span><span class="p">,</span><span class="n">url</span><span class="p">)</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>


</code></pre></div></div>

<p><br /><br /></p>
<font color="red"> æ„Ÿå…´è¶£çš„ï¼Œæ¬¢è¿æ·»åŠ åšä¸»å¾®ä¿¡ï¼Œ </font>
<p><br />
å“ˆï¼Œåšä¸»å¾ˆä¹æ„å’Œå„è·¯å¥½å‹äº¤æµï¼Œå¦‚æœæ»¡æ„ï¼Œè¯·æ‰“èµåšä¸»ä»»æ„é‡‘é¢ï¼Œæ„Ÿå…´è¶£çš„åœ¨å¾®ä¿¡è½¬è´¦çš„æ—¶å€™ï¼Œå¤‡æ³¨æ‚¨çš„å¾®ä¿¡æˆ–è€…å…¶ä»–è”ç³»æ–¹å¼ã€‚æ·»åŠ åšä¸»å¾®ä¿¡å“¦ã€‚
<br />
è¯·ä¸‹æ–¹ç•™è¨€å§ã€‚å¯ä¸åšä¸»è‡ªç”±è®¨è®ºå“¦</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">æ”¯ä»˜åŒ…</th>
      <th style="text-align: center">å¾®ä¿¡</th>
      <th style="text-align: center">å¾®ä¿¡å…¬ä¼—å·</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/alpay.jpg" alt="æ”¯ä»˜å®" /></td>
      <td style="text-align: center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/weixin.jpg" alt="å¾®ä¿¡" /></td>
      <td style="text-align: center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/my/qrcode_for_gh_a23c07a2da9e_258.jpg" alt="å¾®ä¿¡å…¬ä¼—å·" /></td>
    </tr>
  </tbody>
</table>

<!-- Gitalk è¯„è®º start  -->

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />

<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>
<p>Â </p>
<div id="gitalk-container"></div>
<p>Â  <br />
 <script type="text/javascript">
    var gitalk = new Gitalk({
		clientID: `1d164cd85549874d0e3a`,
		clientSecret: `527c3d223d1e6608953e835b547061037d140355`,
		repo: `HealerJean.github.io`,
		owner: 'HealerJean',
		admin: ['HealerJean'],
		id: 'yGteDRHAXmN7alJz',
    });
    gitalk.render('gitalk-container');
</script>Â </p>

<!-- Gitalk end -->

  
	</div>
	<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <!--
  <%- list_categories(item.categories, {
      show_count: false,
      class: 'article-category',
      style: 'none',
      separator: 'â–º'
  }) %>
  -->
  
  <a class="article-category-link" href="/categories/#Database">Database</a>
  
</div>


  <div class="article-tags">
  <!--
  <% var tags = [];
    item.tags.forEach(function(tag){
      tags.push('<a href="' + config.root + tag.path + '">' + tag.name + '</a>');
    }); %>-->
  <span></span> <!--<%- tags.join('') %>-->
  
  
  <a href="/tags/#Database~~~~">Database~~~~</a>
  
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://localhost:4000/database/2018/12/17/35_Mysql%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3sql%E5%A4%A7%E5%85%A8/" data-title="mysqlé¡¹ç›®ç›¸å…³sqlå¤§å…¨_ç»ˆèº«å—ç”¨ | HealeJeançš„æ¢¦æƒ³åšå®¢" data-tsina="" class="share clearfix">
	  </div>
	
	</div>


</footer>
   
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/json/2018/12/14/6_Json%E4%B8%ADdate(JSONObject)%E5%BC%95%E5%8F%91%E7%9A%84%E8%A1%80%E6%A1%88/" title="jsonä¸­date(JSONObject)å¼•å‘çš„è¡€æ¡ˆ">
  <strong>ä¸Šä¸€ç¯‡ï¼š</strong><br/>
  <span>
  jsonä¸­date(JSONObject)å¼•å‘çš„è¡€æ¡ˆ</span>
</a>
</div>


<div class="next">
<a href="/java/2018/12/20/8_%E5%87%A0%E7%A7%8D%E5%B8%B8%E8%A7%81%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%88%AA%E5%8F%96/"  title="å‡ ç§å¸¸è§çš„å­—ç¬¦ä¸²çš„æˆªå–">
 <strong>ä¸‹ä¸€ç¯‡ï¼š</strong><br/> 
 <span>å‡ ç§å¸¸è§çš„å­—ç¬¦ä¸²çš„æˆªå–
</span>
</a>
</div>

</nav>

	

</div>  

      
      
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside toc-content">
 
 <!--<%- toc(item.content) %>-->
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">


  <div class="linkslist">
  <p class="asidetitle">ä¸ªäººç½‘ç«™</p>
    <ul>
        
          <li>
            <a href="http://blog.csdn.net/u012954706" target="_blank" title="csdn">csdn</a>
          </li>
        
          <li>
            <a href="http://www.cnblogs.com/HealerJean/" target="_blank" title="åšå®¢å›­">åšå®¢å›­</a>
          </li>
        
          <li>
            <a href="https://weibo.com/u/3889598250/" target="_blank" title="å¾®åš">å¾®åš</a>
          </li>
        
          <li>
            <a href="https://www.jianshu.com/u/54ba972e92a8" target="_blank" title="ç®€ä¹¦">ç®€ä¹¦</a>
          </li>
        
          <li>
            <a href="https://www.zhihu.com/people/healerjean" target="_blank" title="çŸ¥ä¹">çŸ¥ä¹</a>
          </li>
        
    </ul>
</div>

  <div class="weiboshow">

     <p class="asidetitle">ä¸ªäººä¿¡æ¯</p>
     <script src="/assets/img/person/jquery.js"></script>
     <script src="/assets/img/person/jquery-github-user-widget.js"></script>
     <div class="github-widget-user" data-user="HealerJean">	</div>

</div>


  
<div class="tagslist">
	<p class="asidetitle">æ ‡ç­¾</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/#Java" title="Java">Java<sup>28</sup></a></li>
			
		
			
				<li><a href="/tags/#MarkDown" title="MarkDown">MarkDown<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/#SpringBoot" title="SpringBoot">SpringBoot<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/#Docker" title="Docker">Docker<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/#server" title="server">server<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Quartz" title="Quartz">Quartz<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/#database" title="database">database<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/#SoftWare" title="SoftWare">SoftWare<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/#GitHub" title="GitHub">GitHub<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/#Mac" title="Mac">Mac<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/#Thread" title="Thread">Thread<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/#Url" title="Url">Url<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Annotation" title="Annotation">Annotation<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/#SortAlgorithm" title="SortAlgorithm">SortAlgorithm<sup>12</sup></a></li>
			
		
			
				<li><a href="/tags/#CAS" title="CAS">CAS<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/#Maven" title="Maven">Maven<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/#HTML" title="HTML">HTML<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#AngularJs" title="AngularJs">AngularJs<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#WeChat" title="WeChat">WeChat<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/#Experience" title="Experience">Experience<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/#Team" title="Team">Team<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/#Utils" title="Utils">Utils<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/#Hibernate" title="Hibernate">Hibernate<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Date" title="Date">Date<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Log" title="Log">Log<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/#JSON" title="JSON">JSON<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/#GrayLog" title="GrayLog">GrayLog<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Database" title="Database">Database<sup>18</sup></a></li>
			
		
			
				<li><a href="/tags/#Redis" title="Redis">Redis<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/#Ehcache" title="Ehcache">Ehcache<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Druid" title="Druid">Druid<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Swagger" title="Swagger">Swagger<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/#Netty" title="Netty">Netty<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/#NIO" title="NIO">NIO<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/#WebSocket" title="WebSocket">WebSocket<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/#Map" title="Map">Map<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/#JVM" title="JVM">JVM<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/#Element" title="Element">Element<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Job" title="Job">Job<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/#Graphics" title="Graphics">Graphics<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Linux" title="Linux">Linux<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/#Databases" title="Databases">Databases<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Nginx" title="Nginx">Nginx<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/#SpirngBoot" title="SpirngBoot">SpirngBoot<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Linu" title="Linu">Linu<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#JAVA" title="JAVA">JAVA<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Server" title="Server">Server<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Google" title="Google">Google<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Git" title="Git">Git<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/#åˆ†å¸ƒå¼" title="åˆ†å¸ƒå¼">åˆ†å¸ƒå¼<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/#SpringCloud" title="SpringCloud">SpringCloud<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/#http" title="http">http<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#docker" title="docker">docker<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Json" title="Json">Json<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#Database~~~~" title="Database~~~~">Database~~~~<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/#weChat" title="weChat">weChat<sup>1</sup></a></li>
			
		
		</ul>
</div>


  


  


</aside>
</div>
    </div>
    <footer><div id="footer" >

	<!-- æ‰“èµåŠŸèƒ½ -->
  <!-- <script src="http://static.tctip.com/tctip-1.0.0.min.js"></script> -->
  <script src="/assets/img/tctip/tctip-1.0.1.min.js"></script>
	<script>  
	new tctip({
	  top: '20%',
	  button: {
	    id: 9,
	    type: 'dashang',
	  },
	  list: [
	    {
	      type: 'alipay',
	      qrImg: '/assets/img/tctip/alpay.jpg'
	    }, {
	      type: 'wechat',
	      qrImg: '/assets/img/tctip/weixin.jpg'
	    }
	  ]
	}).init()
	</script>



	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> æ¬¢è¿æ¥åˆ°  HealerJean çš„æ¢¦æƒ³åšå®¢. <br/>
			------æ‚¨å·²èµ°è¿›ä¸€ä¸ªé«˜çº§è½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆçš„æˆé•¿ä¹‹è·¯</p>
	</section>
	 


<!--  è‡ªå¸¦çš„åˆ†äº«åŠŸèƒ½ 	-->
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/3889598250" target="_blank" class="icon-weibo" title="å¾®åš"></a>
		
		
		
		
		<a href="https://twitter.com/mxzdhealer" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		
		
		
		
		
		<a href="mailto:healerjean@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div> 


	<!--
			<%  Array.prototype.S=String.fromCharCode(2);
			  Array.prototype.in_array=function(e){
    			var r=new RegExp(this.S+e+this.S);
    			return (r.test(this.S+this.join(this.S)+this.S));
				};
				var cc = new Array('by','by-nc','by-nc-nd','by-nc-sa','by-nd','by-sa','zero'); %>
		<% if (cc.in_array(theme.creative_commons) ) { %>
				<div class="cc-license">
          <a href="http://creativecommons.org/licenses/<%= theme.creative_commons %>/4.0" class="cc-opacity" target="_blank">
            <img src="<%- config.root %>img/cc-<%= theme.creative_commons %>.svg" alt="Creative Commons" />
          </a>
        </div>
    <% } %>
				-->

		<p class="copyright">
		welcome to <a href="http://jekyllrb.com" target="_blank" title="jekyll">HealerJean</a> 
		blog <a href="https://github.com/simpleyyt/jekyll-jacman" target="_blank" title="Jacman">for</a> Â© 2017 
		
		<a href="about" target="_blank" title="HealerJean">HealerJean</a>
		
		
		</p>
</div>
</footer>
    <script src="/assets/js/jquery-2.0.3.min.js"></script>
<script src="/assets/js/jquery.imagesloaded.min.js"></script>
<script src="/assets/js/gallery.js"></script>
<script src="/assets/js/jquery.qrcode-0.12.0.min.js"></script>
<script src="/assets/js/toc.js"></script>

<script type="text/javascript">
$(document).ready(function(){
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });

  

  $(window).resize(function(){
    getSize();
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
      
    }
  });
});
</script>




<script type="text/javascript">
$(document).ready(function(){
  $('#toc.toc-aside').toc({
    title: "æ–‡ç« ç›®å½•",
    showEffect: "none"
  });
  $('#toc.toc-article').toc({
    title: "æ–‡ç« ç›®å½•",
    showEffect: "show",
    showSpeed: 0
  });
});
</script>



<script type="text/javascript">
$(document).ready(function(){
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>



<script type="text/javascript">
$(document).ready(function(){
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>æ‰«æäºŒç»´ç åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆ</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="å¾®ä¿¡"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="äººäºº"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="å¾®åš"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
/*
  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      //$('.hoverqrcode').hide();
  });
  */
});
</script>






<!--

-->




<link rel="stylesheet" href="/assets/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/assets/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      if ($(this).hasClass('emoji')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
});
</script>


<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="è¿”å›é¡¶éƒ¨"><img src="/assets/img/scrollup.png"/></a>
	</div>
	<script src="/assets/js/totop.js"></script>


<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>


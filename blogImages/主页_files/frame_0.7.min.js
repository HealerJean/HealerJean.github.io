(function($){$.fn.initAdFrame=function(options){var defaults={base_url:"http://work.duodian.com/menu.jsonp",resultMenuData:"",localTest:false,menuLocation:"",adMenuLen:0,origin:window.location.origin};var options=$.extend(defaults,options);this.each(function(){options.menuLocation=$(this).context.className;function getNativePath(){if(window.location.pathname!="/index"){window.location.href=options.origin+"/index"}if(window.location.host.indexOf("duodian.com")!=-1){options.localTest=false}else{options.localTest=true}}function adLoadUrl(){if(options.localTest){options.base_url="http://101.201.122.124:9001/public/menu.jsonp"}else{options.base_url="http://work.duodian.com/menu.jsonp"}}function setToLocalStorage(){localStorage.setItem("adResultMenuData",JSON.stringify(options.resultMenuData))}function createFrame(){var first_level="";var person_setting='<div class="frame-setting flex-col-center"><img src="https://admore-cas.oss-cn-hangzhou.aliyuncs.com/admin/img/common/settings_icon.png"> <span class="bottom-title">个人设置</span><div class="bottom-dialog"><div class="class-a"><a class="menu-title" a_href="'+options.origin+'/main#/password">密码修改</a><a class="menu-title" a_href="'+options.origin+'/main#/wechat">绑定微信</a><a class="menu-title" href="https://adwords.admore.com.cn/public/help/1" target="_blank">帮助文档</a></div><a class="class-b" href="'+options.origin+'/logout">注销登录</a></div></div>';var second_level="";for(var i=0;i<options.resultMenuData.length;i++){var s_l_son="";var first_title="";if(options.resultMenuData[i].children!=null){for(var j=0;j<options.resultMenuData[i].children.length;j++){var second_list="";var second_title="";if(options.resultMenuData[i].children[j].children!=null){for(var m=0;m<options.resultMenuData[i].children[j].children.length;m++){if(options.resultMenuData[i].children[j].children[m].url!=null){second_title=second_title+'<a class="second-title" onmousedown="whichbutton(event,this)" a_href="'+options.resultMenuData[i].children[j].children[m].domain+""+options.resultMenuData[i].children[j].children[m].url+'"><i class="dot"></i><span>'+options.resultMenuData[i].children[j].children[m].name+"</span></a>"}else{second_title=second_title+'<a class="second-title"><i class="dot"></i><span>'+options.resultMenuData[i].children[j].children[m].name+"</span></a>"}}second_list='<div class="second-list display-none" id="ss_'+options.resultMenuData[i].children[j].id+'">'+second_title+"</div>"}if(options.resultMenuData.length==i+1){if(j==0){second_list=second_list+person_setting}else{second_list=second_list}}if(options.resultMenuData[i].children[j].children!=null||options.resultMenuData[i].children[j].url==null){first_title=first_title+'<a s-id="'+options.resultMenuData[i].children[j].id+'" class="first-title"><i class="'+options.resultMenuData[i].children[j].icon+'"></i><span>'+options.resultMenuData[i].children[j].name+"</span></a>"+second_list}else{first_title=first_title+'<a s-id="'+options.resultMenuData[i].children[j].id+'" onmousedown="whichbutton(event,this)" a_href="'+options.resultMenuData[i].children[j].domain+""+options.resultMenuData[i].children[j].url+'" class="first-title"><i class="'+options.resultMenuData[i].children[j].icon+'"></i><span>'+options.resultMenuData[i].children[j].name+"</span></a>"+second_list}}}if(i==0){first_level=first_level+'<div f-id="'+options.resultMenuData[i].id+'" class="left-case side-shadow active"><img class="head" src="'+options.resultMenuData[i].icon+'"></div>';s_l_son='<div class="second-level" id="second_'+options.resultMenuData[i].id+'"><div class="currunt-title side-shadow"><span>'+options.resultMenuData[i].name+'</span></div><div class="heigth-10"></div>'+first_title+"</div>"}else{first_level=first_level+'<div f-id="'+options.resultMenuData[i].id+'" class="left-case side-shadow"><img class="icon" src="'+options.resultMenuData[i].icon+'"></div>';s_l_son='<div class="second-level display-none" id="second_'+options.resultMenuData[i].id+'"><div class="currunt-title side-shadow"><span>'+options.resultMenuData[i].name+'</span></div><div class="heigth-10"></div>'+first_title+"</div>"}second_level=second_level+s_l_son}var left_menu_top='<div class="left-case-1 side-shadow"><a a_href="http://ad.itry.com/manage/shokey/toStatisticsDataShow"><img class="head" src="https://admore-cas.oss-cn-hangzhou.aliyuncs.com/admin/img/common/icon_main.png"></a></div>';var left_menu_bottom='<div class="left-case-1 sidebar-bottom"><a class="ad-flex" href="'+window.location.origin+'/logout"><img class="icon" src="https://admore-cas.oss-cn-hangzhou.aliyuncs.com/admin/img/common/icon_exit.png"></a></div>';var left_level='<div class="frame"><div class="left-side"><div class="sidebar-fold"><img class="icon" src="https://admore-cas.oss-cn-hangzhou.aliyuncs.com/admin/img/common/icon_display.png"></div><div class="left-bottom ad-flex"><div class="first-level">'+left_menu_top+""+first_level+""+left_menu_bottom+"</div>"+second_level+'</div></div></div><div class="right-content" style="margin-left: 240px;"><iframe src="" id="mainIframe"></iframe></div>';
    $(" ."+options.menuLocation+"").append(left_level)}function setLastMenu(val){localStorage.setItem("adWorkLastMenu",val)}function adDisplayMenu(){if(localStorage.getItem("adWorkLastMenu")==null){$("#mainIframe").attr("src","http://ad.itry.com/manage/shokey/toStatisticsDataShow");return}if(localStorage.getItem("adWorkLastMenu")!="undefined"){setMenuActive(localStorage.getItem("adWorkLastMenu"));$("#mainIframe").attr("src",localStorage.getItem("adWorkLastMenu"))}else{$("#mainIframe").attr("src","http://ad.itry.com/manage/shokey/toStatisticsDataShow")}}function setMenuActive(ad_url_side){$(".left-case").removeClass("active");$(".first-title").removeClass("active");$(".second-title").removeClass("active");$(".first-title").each(function(){var ad_url_find=$(this).attr("a_href");if(ad_url_find==ad_url_side){$(this).addClass("active");var ffid=$(this).parents(".second-level").attr("id").substring(7);$(".left-case").each(function(){if($(this).attr("f-id")==ffid){$(".second-level").addClass("display-none");$(this).addClass("active");$("#second_"+ffid).removeClass("display-none").addClass("display-block")}})}});$(".second-list .second-title").each(function(){var ad_url_find=$(this).attr("a_href");if(ad_url_find==ad_url_side){$(this).addClass("active");$(this).parent(".second-list").removeClass("display-none");$(this).parent(".second-list").prev(".first-title").addClass("active");var ffid=$(this).parents(".second-level").attr("id").substring(7);$(".left-case").each(function(){if($(this).attr("f-id")==ffid){$(".second-level").addClass("display-none");$(this).addClass("active");$("#second_"+ffid).removeClass("display-none").addClass("display-block")}})}})}function displayMenu(){$(".sidebar-fold").html('<img class="icon" src="https://admore-cas.oss-cn-hangzhou.aliyuncs.com/admin/img/common/icon_display.png">');$(".left-side").removeClass("sidebar-shrink");$(".right-content").css("margin-left","240px");$(".frame-setting").removeClass("display-none").addClass("display-block")}function initMenu(){$(".frame-setting").on("click",function(){if($(".bottom-dialog").hasClass("display-block")){$(".bottom-dialog").removeClass("display-block")}else{$(".bottom-dialog").addClass("display-block")}});$(".sidebar-fold").on("click",function(){if(!$(".left-side").hasClass("sidebar-shrink")){$(".sidebar-fold").html('<img class="icon" src="https://admore-cas.oss-cn-hangzhou.aliyuncs.com/admin/img/common/icon_shrink.png">');$(".left-side").addClass("sidebar-shrink");$(".frame-setting").removeClass("display-block").addClass("display-none");$(".right-content").css("margin-left","60px")}else{displayMenu()}});$(".first-level .left-case").on("click",function(){if(!$(this).hasClass("active")){$(".first-level .left-case").removeClass("active");$(this).addClass("active");$(".second-level").addClass("display-none");$("#second_"+$(this).attr("f-id")).removeClass("display-none").addClass("display-block");displayMenu()}});$(".first-title").on("click",function(){if(!$(this).hasClass("active")){$(".first-title").removeClass("active");$(this).addClass("active");$(".second-list").addClass("display-none");$("#ss_"+$(this).attr("s-id")).removeClass("display-none").addClass("display-block")}});$(".second-title").on("click",function(){if(!$(this).hasClass("active")){$(".second-title").removeClass("active");$(this).addClass("active")}});$("a").on("click",function(){setLastMenu($(this).attr("a_href"));$("#mainIframe").attr("src",$(this).attr("a_href"))});if($("#mainIframe").attr("src")==""||$("#mainIframe").attr("src")==undefined){$("#mainIframe").attr("src",window.location.origin+"/main")}adDisplayMenu()}function makeFrame(){createFrame();initMenu()}function loadMenuData(){$.ajax({url:options.base_url,dataType:"jsonp",async:false,data:{account:options.account},success:function(result){if(result!=""&&result!=[]){options.resultMenuData=result}setToLocalStorage();makeFrame()},error:function(err){console.log(err)}})}function init(){getNativePath();adLoadUrl();loadMenuData()}init()});return this}})(jQuery);function whichbutton(event,val){if(event.button==2){window.open($(val).attr("a_href"),"_blank")}};
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title></title>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../style.css" TITLE="Style">
</head>
<body>
<TABLE cellspacing="0" cellpadding="2"><TBODY>
    <!-- C:\ Programme\ eclipse\ workspace\ oscache\ src\ java\ com\ opensymphony\ oscache\ base\ algorithm\ AbstractConcurrentReadCache.java -->
  <TR>
    <TD colspan="6" class="reportHeader">
    <TABLE width="100%"><TR>
    <TD valign="top" class="titleText">Clover coverage report -    <DIV class="timestamp"><b>Coverage timestamp:</b>&nbsp;Sa Jul 7 2007 09:11:40 CEST</DIV>
            <DIV class="navBar"><a href="../../../../../pkgs-summary.html"><b>Overview</b></a>&nbsp;&nbsp;&nbsp;<a href="pkg-summary.html"><b>Package</b></a>&nbsp;&nbsp;&nbsp;<font class="navBarCurrent">File</font></DIV>
    
<DIV class="navBarLink">
&nbsp;&nbsp;&nbsp;
    <A HREF="../../../../../index.html" TARGET="_top">FRAMES</A>&nbsp;&nbsp;
<A HREF="AbstractConcurrentReadCache.html" TARGET="_top">NO FRAMES</A>&nbsp;&nbsp;
    </DIV>

</TD>
         <td class="headerStats" valign="top" width="40%" align="right">
        <table align="right">
         <tr>
           <td nowrap><b>file stats:</b></td>
           <td align="right"><b>LOC:</b></td>
           <td align="right">2.157</td>
           <td width="10%">&nbsp;</td>
           <td align="right"><b>Methods:</b></td>
           <td align="right">90</td>
         </tr>
         <tr>
           <td></td>
           <td align="right"><b>NCLOC:</b></td>
           <td align="right">972</td>
           <td width="10%">&nbsp;</td>
           <td align="right"><b>Classes:</b></td>
           <td align="right">5</td>
         </tr>
      </table>
     </td>
    </TR></TABLE>
   </TD>
  </TR>

<TR><TD class="hbreak" colspan="6">&nbsp;</TD></TR>
  <TR>
    <TD class="graphHeaderLeft"><b>&nbsp;Source file</b></TD>
    <TD class="graphHeader">Conditionals</TD>
    <TD class="graphHeader">Statements</TD>
    <TD class="graphHeader">Methods</TD>
    <TD class="graphHeader" align="left" colspan="2"><B>TOTAL</B></TD>
  </TR>   
  <TR>
    <TD class="graphItem">
        	   AbstractConcurrentReadCache.java
	    </TD>
   
    <TD class="graphPercent" align="center">64,7%</TD>
    <TD class="graphPercent" align="center">66,5%</TD>
    <TD class="graphPercent" align="center">61,1%</TD>
    <TD class="graphBarLeft" align="center"><B>65,4%</B></TD>
    <TD class="graphBar">
            <TABLE class="barGraph" cellspacing="0">
        <TBODY>
          <TR>
	               <TD class="covered"><img alt="coverage" src="../../../../../img/trans.gif"
                   width="130" height="12"></TD>
            <TD class="uncovered"><img alt="coverage" src="../../../../../img/trans.gif"
                   width="70" height="12"></TD>
	   	  </TR>
	</TBODY>
      </TABLE>
          </TD>
  </TR> 
</TBODY></TABLE><TABLE cellspacing="0" cellpadding="0" class="srcView"><TBODY>
<TR><TD align="right" class="lineCount">
&nbsp;1</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">/*</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * Copyright (c) 2002-2003 by OpenSymphony</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;3</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * All rights reserved.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;4</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;5</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">/*</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;6</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        File: AbstractConcurrentReadCache</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;7</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;8</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        Written by Doug Lea. Adapted from JDK1.2 HashMap.java and Hashtable.java</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;9</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        which carries the following copyright:</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;10</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;11</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * Copyright 1997 by Sun Microsystems, Inc.,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;12</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * 901 San Antonio Road, Palo Alto, California, 94303, U.S.A.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;13</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * All rights reserved.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;14</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;15</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * This software is the confidential and proprietary information</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;16</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * of Sun Microsystems, Inc. ("Confidential Information").  You</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;17</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * shall not disclose such Confidential Information and shall use</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;18</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * it only in accordance with the terms of the license agreement</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;19</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * you entered into with Sun.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;20</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;21</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        This class is a modified version of ConcurrentReaderHashMap, which was written</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;22</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        by Doug Lea (http://gee.cs.oswego.edu/dl/). The modifications where done</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;23</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        by Pyxis Technologies. This is a base class for the OSCache module of the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;24</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        openSymphony project (www.opensymphony.com).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;25</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;26</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        History:</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;27</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        Date       Who                What</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;28</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        28oct1999  dl               Created</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;29</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        14dec1999  dl               jmm snapshot</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;30</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        19apr2000  dl               use barrierLock</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;31</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        12jan2001  dl               public release</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;32</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        Oct2001    abergevin@pyxis-tech.com</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;33</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                                                                Integrated persistence and outer algorithm support</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;34</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">*/</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;35</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="keyword">package</span> com.opensymphony.oscache.base.algorithm;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;36</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;37</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;38</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;39</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="keyword">import</span> com.opensymphony.oscache.base.CacheEntry;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;40</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="keyword">import</span> com.opensymphony.oscache.base.persistence.CachePersistenceException;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;41</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="keyword">import</span> com.opensymphony.oscache.base.persistence.PersistenceListener;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;42</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;43</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="keyword">import</span> org.apache.commons.logging.Log;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;44</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;45</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;46</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="keyword">import</span> java.io.IOException;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;47</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="keyword">import</span> java.io.Serializable;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;48</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;49</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="keyword">import</span> java.util.*;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;50</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;51</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;52</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * A version of Hashtable that supports mostly-concurrent reading, but exclusive writing.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;53</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * Because reads are not limited to periods</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;54</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * without writes, a concurrent reader policy is weaker than a classic</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;55</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * reader/writer policy, but is generally faster and allows more</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;56</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * concurrency. This class is a good choice especially for tables that</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;57</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * are mainly created by one thread during the start-up phase of a</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;58</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * program, and from then on, are mainly read (with perhaps occasional</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;59</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * additions or removals) in many threads.  If you also need concurrency</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;60</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * among writes, consider instead using ConcurrentHashMap.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;61</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * &lt;p&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;62</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;63</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * Successful retrievals using get(key) and containsKey(key) usually</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;64</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * run without locking. Unsuccessful ones (i.e., when the key is not</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;65</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * present) do involve brief synchronization (locking).  Also, the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;66</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * size and isEmpty methods are always synchronized.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;67</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;68</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * &lt;p&gt; Because retrieval operations can ordinarily overlap with</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;69</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * writing operations (i.e., put, remove, and their derivatives),</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;70</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * retrievals can only be guaranteed to return the results of the most</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;71</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * recently &lt;em&gt;completed&lt;/em&gt; operations holding upon their</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;72</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * onset. Retrieval operations may or may not return results</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;73</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * reflecting in-progress writing operations.  However, the retrieval</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;74</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * operations do always return consistent results -- either those</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;75</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * holding before any single modification or after it, but never a</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;76</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * nonsense result.  For aggregate operations such as putAll and</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;77</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * clear, concurrent reads may reflect insertion or removal of only</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;78</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * some entries. In those rare contexts in which you use a hash table</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;79</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * to synchronize operations across threads (for example, to prevent</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;80</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * reads until after clears), you should either encase operations</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;81</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * in synchronized blocks, or instead use java.util.Hashtable.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;82</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;83</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * &lt;p&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;84</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;85</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * This class also supports optional guaranteed</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;86</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * exclusive reads, simply by surrounding a call within a synchronized</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;87</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * block, as in &lt;br&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;88</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * &lt;code&gt;AbstractConcurrentReadCache t; ... Object v; &lt;br&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;89</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * synchronized(t) { v = t.get(k); } &lt;/code&gt; &lt;br&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;90</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;91</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * But this is not usually necessary in practice. For</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;92</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * example, it is generally inefficient to write:</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;93</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;94</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * &lt;pre&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;95</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   AbstractConcurrentReadCache t; ...            // Inefficient version</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;96</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   Object key; ...</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;97</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   Object value; ...</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;98</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   synchronized(t) {</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;99</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *     if (!t.containsKey(key))</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;100</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *       t.put(key, value);</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;101</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *       // other code if not previously present</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;102</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *     }</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;103</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *     else {</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;104</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *       // other code if it was previously present</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;105</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *     }</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;106</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   }</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;107</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *&lt;/pre&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;108</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * Instead, just take advantage of the fact that put returns</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;109</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * null if the key was not previously present:</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;110</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * &lt;pre&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;111</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   AbstractConcurrentReadCache t; ...                // Use this instead</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;112</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   Object key; ...</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;113</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   Object value; ...</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;114</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   Object oldValue = t.put(key, value);</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;115</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   if (oldValue == null) {</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;116</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *     // other code if not previously present</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;117</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   }</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;118</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   else {</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;119</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *     // other code if it was previously present</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;120</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *   }</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;121</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *&lt;/pre&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;122</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * &lt;p&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;123</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;124</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * Iterators and Enumerations (i.e., those returned by</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;125</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * keySet().iterator(), entrySet().iterator(), values().iterator(),</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;126</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * keys(), and elements()) return elements reflecting the state of the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;127</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * hash table at some point at or since the creation of the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;128</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * iterator/enumeration.  They will return at most one instance of</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;129</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * each element (via next()/nextElement()), but might or might not</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;130</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * reflect puts and removes that have been processed since they were</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;131</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * created.  They do &lt;em&gt;not&lt;/em&gt; throw ConcurrentModificationException.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;132</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * However, these iterators are designed to be used by only one</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;133</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * thread at a time. Sharing an iterator across multiple threads may</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;134</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * lead to unpredictable results if the table is being concurrently</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;135</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * modified.  Again, you can ensure interference-free iteration by</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;136</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * enclosing the iteration in a synchronized block.  &lt;p&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;137</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;138</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * This class may be used as a direct replacement for any use of</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;139</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * java.util.Hashtable that does not depend on readers being blocked</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;140</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * during updates. Like Hashtable but unlike java.util.HashMap,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;141</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * this class does NOT allow &lt;tt&gt;null&lt;/tt&gt; to be used as a key or</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;142</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * value.  This class is also typically faster than ConcurrentHashMap</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;143</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * when there is usually only one thread updating the table, but</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;144</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * possibly many retrieving values from it.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;145</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * &lt;p&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;146</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;147</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * Implementation note: A slightly faster implementation of</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;148</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * this class will be possible once planned Java Memory Model</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;149</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * revisions are in place.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;150</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;151</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> * &lt;p&gt;[&lt;a href="http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/intro.html"&gt; Introduction to this package. &lt;/a&gt;]</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;152</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"> **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
<A name="AbstractConcurrentReadCache">&nbsp;153</A></TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="keyword">public</span> abstract <span class="keyword">class</span> AbstractConcurrentReadCache <span class="keyword">extends</span> AbstractMap <span class="keyword">implements</span> Map, Cloneable, Serializable {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;154</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;155</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The default initial number of table slots for this table (32).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;156</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Used when not otherwise specified in constructor.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;157</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;158</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">public</span> <span class="keyword">static</span> final <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = 32;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;159</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;160</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;161</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The minimum capacity.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;162</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Used if a lower value is implicitly specified</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;163</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * by either of the constructors with arguments.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;164</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * MUST be a power of two.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;165</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;166</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">private</span> <span class="keyword">static</span> final <span class="keyword">int</span> MINIMUM_CAPACITY = 4;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;167</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;168</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;169</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The maximum capacity.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;170</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Used if a higher value is implicitly specified</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;171</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * by either of the constructors with arguments.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;172</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * MUST be a power of two &lt;= 1&lt;&lt;30.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;173</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;174</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">private</span> <span class="keyword">static</span> final <span class="keyword">int</span> MAXIMUM_CAPACITY = 1 &lt;&lt; 30;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;175</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;176</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;177</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The default load factor for this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;178</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Used when not otherwise specified in constructor, the default is 0.75f.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;179</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;180</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">public</span> <span class="keyword">static</span> final <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = 0.75f;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;181</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;182</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">//OpenSymphony BEGIN (pretty long!)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;183</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">static</span> final String NULL = <span class="string">"_nul!~"</span>;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;184</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    </SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;185</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">private</span> <span class="keyword">static</span> final Log log = LogFactory.getLog(AbstractConcurrentReadCache.<span class="keyword">class</span>);</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;186</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;187</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/*</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;188</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">      The basic strategy is an optimistic-style scheme based on</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;189</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">      the guarantee that the hash table and its lists are always</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;190</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">      kept in a consistent enough state to be read without locking:</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;191</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;192</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">      * Read operations first proceed without locking, by traversing the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;193</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         apparently correct list of the apparently correct bin. If an</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;194</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         entry is found, but not invalidated (value field null), it is</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;195</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         returned. If not found, operations must recheck (after a memory</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;196</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         barrier) to make sure they are using both the right list and</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;197</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         the right table (which can change under resizes). If</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;198</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         invalidated, reads must acquire main update lock to wait out</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;199</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         the update, and then re-traverse.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;200</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;201</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">      * All list additions are at the front of each bin, making it easy</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;202</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         to check changes, and also fast to traverse.  Entry next</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;203</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         pointers are never assigned. Remove() builds new nodes when</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;204</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         necessary to preserve this.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;205</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;206</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">      * Remove() (also clear()) invalidates removed nodes to alert read</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;207</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         operations that they must wait out the full modifications.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;208</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;209</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">    */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;210</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;211</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;212</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Lock used only for its memory effects. We use a Boolean</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;213</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * because it is serializable, and we create a new one because</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;214</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * we need a unique object for each cache instance.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;215</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;216</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> final Boolean barrierLock = <span class="keyword">new</span> Boolean(<span class="keyword">true</span>);</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;217</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;218</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;219</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * field written to only to guarantee lock ordering.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;220</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;221</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">transient</span> Object lastWrite;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;222</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;223</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;224</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The hash table data.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;225</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;226</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">transient</span> Entry[] table;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;227</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;228</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;229</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The total number of mappings in the hash table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;230</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;231</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">transient</span> <span class="keyword">int</span> count;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;232</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;233</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;234</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Persistence listener.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;235</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;236</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">transient</span> PersistenceListener persistenceListener = <span class="keyword">null</span>;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;237</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;238</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;239</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Use memory cache or not.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;240</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;241</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">boolean</span> memoryCaching = <span class="keyword">true</span>;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;242</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;243</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;244</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Use unlimited disk caching.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;245</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;246</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">boolean</span> unlimitedDiskCache = <span class="keyword">false</span>;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;247</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;248</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;249</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The load factor for the hash table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;250</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;251</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@serial</span></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;252</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;253</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">float</span> loadFactor;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;254</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;255</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;256</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Default cache capacity (number of entries).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;257</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;258</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> final <span class="keyword">int</span> DEFAULT_MAX_ENTRIES = 100;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;259</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;260</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;261</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Max number of element in cache when considered unlimited.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;262</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;263</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> final <span class="keyword">int</span> UNLIMITED = 2147483646;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;264</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">transient</span> Collection values = <span class="keyword">null</span>;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;265</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;266</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;267</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * A HashMap containing the group information.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;268</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Each entry uses the group name as the key, and holds a</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;269</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * &lt;code&gt;Set&lt;/code&gt; of containing keys of all</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;270</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * the cache entries that belong to that particular group.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;271</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;272</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> HashMap groups = <span class="keyword">new</span> HashMap();</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;273</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">transient</span> Set entrySet = <span class="keyword">null</span>;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;274</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;275</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">// Views</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;276</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">transient</span> Set keySet = <span class="keyword">null</span>;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;277</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;278</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;279</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Cache capacity (number of entries).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;280</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;281</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">int</span> maxEntries = DEFAULT_MAX_ENTRIES;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;282</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;283</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;284</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The table is rehashed when its size exceeds this threshold.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;285</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * (The value of this field is always (int)(capacity * loadFactor).)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;286</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;287</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@serial</span></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;288</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;289</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">int</span> threshold;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;290</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;291</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;292</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Use overflow persistence caching.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;293</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;294</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">private</span> <span class="keyword">boolean</span> overflowPersistence = <span class="keyword">false</span>;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;295</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;296</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;297</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Constructs a new, empty map with the specified initial capacity and the specified load factor.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;298</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;299</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> initialCapacity the initial capacity</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;300</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *  The actual initial capacity is rounded to the nearest power of two.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;301</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> loadFactor  the load factor of the AbstractConcurrentReadCache</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;302</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@throws</span> IllegalArgumentException  if the initial maximum number</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;303</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *               of elements is less</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;304</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *               than zero, or if the load factor is nonpositive.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;305</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;306</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 306: method entered 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 306: method entered 265 times.">    <span class="keyword">public</span> AbstractConcurrentReadCache(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;307</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 307: expression evaluated to true 0 times, false 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 307: expression evaluated to true 0 times, false 265 times.">        <span class="keyword">if</span> (loadFactor &lt;= 0) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;308</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 308: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 308: statement not executed.">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal Load factor: "</span> + loadFactor);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;309</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;310</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;311</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 311: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 311: statement executed 265 times.">        <span class="keyword">this</span>.loadFactor = loadFactor;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;312</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;313</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 313: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 313: statement executed 265 times.">        <span class="keyword">int</span> cap = p2capacity(initialCapacity);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;314</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 314: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 314: statement executed 265 times.">        table = <span class="keyword">new</span> Entry[cap];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;315</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 315: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 315: statement executed 265 times.">        threshold = (<span class="keyword">int</span>) (cap * loadFactor);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;316</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;317</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;318</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;319</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Constructs a new, empty map with the specified initial capacity and default load factor.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;320</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;321</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span>   initialCapacity   the initial capacity of the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;322</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *                            AbstractConcurrentReadCache.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;323</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@throws</span>    IllegalArgumentException if the initial maximum number</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;324</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *              of elements is less</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;325</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *              than zero.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;326</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;327</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 327: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 327: method not entered.">    <span class="keyword">public</span> AbstractConcurrentReadCache(<span class="keyword">int</span> initialCapacity) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;328</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 328: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 328: statement not executed.">        <span class="keyword">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;329</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;330</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;331</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;332</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Constructs a new, empty map with a default initial capacity and load factor.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;333</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;334</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 334: method entered 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 334: method entered 265 times.">    <span class="keyword">public</span> AbstractConcurrentReadCache() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;335</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 335: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 335: statement executed 265 times.">        <span class="keyword">this</span>(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;336</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;337</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;338</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;339</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Constructs a new map with the same mappings as the given map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;340</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The map is created with a capacity of twice the number of mappings in</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;341</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * the given map or 11 (whichever is greater), and a default load factor.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;342</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;343</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 343: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 343: method not entered.">    <span class="keyword">public</span> AbstractConcurrentReadCache(Map t) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;344</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 344: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 344: statement not executed.">        <span class="keyword">this</span>(Math.max(2 * t.size(), 11), DEFAULT_LOAD_FACTOR);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;345</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 345: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 345: statement not executed.">        putAll(t);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;346</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;347</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;348</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;349</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns &lt;tt&gt;true&lt;/tt&gt; if this map contains no key-value mappings.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;350</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;351</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span> &lt;tt&gt;true&lt;/tt&gt; if this map contains no key-value mappings.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;352</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;353</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 353: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 353: method not entered.">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">boolean</span> isEmpty() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;354</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 354: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 354: statement not executed.">        <span class="keyword">return</span> count == 0;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;355</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;356</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;357</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;358</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns a set of the cache keys that reside in a particular group.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;359</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;360</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span>   groupName The name of the group to retrieve.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;361</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span>  a set containing all of the keys of cache entries that belong</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;362</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * to this group, or &lt;code&gt;null&lt;/code&gt; if the group was not found.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;363</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@exception</span>  NullPointerException if the groupName is &lt;code&gt;null&lt;/code&gt;.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;364</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;365</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 365: method entered 45 times.">&nbsp;45</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 365: method entered 45 times.">    <span class="keyword">public</span> Set getGroup(String groupName) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;366</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 366: expression evaluated to true 0 times, false 45 times.">&nbsp;45</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 366: expression evaluated to true 0 times, false 45 times.">        <span class="keyword">if</span> (log.isDebugEnabled()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;367</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 367: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 367: statement not executed.">            log.debug(<span class="string">"getGroup called (group="</span> + groupName + <span class="string">")"</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;368</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;369</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;370</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 370: statement executed 45 times.">&nbsp;45</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 370: statement executed 45 times.">        Set groupEntries = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;371</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;372</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 372: statement executed 45 times.">&nbsp;45</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 372: statement executed 45 times.">        <span class="keyword">if</span> (memoryCaching &amp;&amp; (groups != <span class="keyword">null</span>)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;373</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 373: statement executed 27 times.">&nbsp;27</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 373: statement executed 27 times.">            groupEntries = (Set) getGroupForReading(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;374</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;375</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;376</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 376: statement executed 45 times.">&nbsp;45</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 376: statement executed 45 times.">        <span class="keyword">if</span> (groupEntries == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;377</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            <span class="comment">// Not in the map, try the persistence layer</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;378</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 378: statement executed 21 times.">&nbsp;21</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 378: statement executed 21 times.">            groupEntries = persistRetrieveGroup(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;379</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;380</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;381</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 381: statement executed 45 times.">&nbsp;45</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 381: statement executed 45 times.">        <span class="keyword">return</span> groupEntries;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;382</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;383</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;384</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;385</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Set the cache capacity</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;386</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;387</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 387: method entered 120 times.">&nbsp;120</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 387: method entered 120 times.">    <span class="keyword">public</span> <span class="keyword">void</span> setMaxEntries(<span class="keyword">int</span> newLimit) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;388</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 388: statement executed 120 times.">&nbsp;120</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 388: statement executed 120 times.">        <span class="keyword">if</span> (newLimit &gt; 0) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;389</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 389: statement executed 100 times.">&nbsp;100</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 389: statement executed 100 times.">            maxEntries = newLimit;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;390</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;391</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 391: statement executed 100 times.">&nbsp;100</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 391: statement executed 100 times.">            <span class="keyword">synchronized</span> (<span class="keyword">this</span>) { <span class="comment">// because remove() isn't synchronized</span></A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;392</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;393</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 393: statement executed 100 times.">&nbsp;100</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 393: statement executed 100 times.">                <span class="keyword">while</span> (size() &gt; maxEntries) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;394</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 394: statement executed 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 394: statement executed 20 times.">                    remove(removeItem(), <span class="keyword">false</span>, <span class="keyword">false</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;395</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;396</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;397</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;398</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            <span class="comment">// Capacity must be at least 1</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;399</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 399: statement executed 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 399: statement executed 20 times.">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Cache maximum number of entries must be at least 1"</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;400</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;401</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;402</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;403</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;404</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Retrieve the cache capacity (number of entries).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;405</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;406</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 406: method entered 40 times.">&nbsp;40</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 406: method entered 40 times.">    <span class="keyword">public</span> <span class="keyword">int</span> getMaxEntries() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;407</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 407: statement executed 40 times.">&nbsp;40</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 407: statement executed 40 times.">        <span class="keyword">return</span> maxEntries;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;408</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;409</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;410</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;411</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Sets the memory caching flag.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;412</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;413</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 413: method entered 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 413: method entered 265 times.">    <span class="keyword">public</span> <span class="keyword">void</span> setMemoryCaching(<span class="keyword">boolean</span> memoryCaching) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;414</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 414: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 414: statement executed 265 times.">        <span class="keyword">this</span>.memoryCaching = memoryCaching;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;415</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;416</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;417</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;418</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Check if memory caching is used.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;419</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;420</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 420: method entered 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 420: method entered 60 times.">    <span class="keyword">public</span> <span class="keyword">boolean</span> isMemoryCaching() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;421</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 421: statement executed 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 421: statement executed 60 times.">        <span class="keyword">return</span> memoryCaching;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;422</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;423</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;424</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;425</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Set the persistence listener to use.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;426</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;427</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 427: method entered 196 times.">&nbsp;196</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 427: method entered 196 times.">    <span class="keyword">public</span> <span class="keyword">void</span> setPersistenceListener(PersistenceListener listener) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;428</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 428: statement executed 196 times.">&nbsp;196</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 428: statement executed 196 times.">        <span class="keyword">this</span>.persistenceListener = listener;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;429</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;430</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;431</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;432</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Get the persistence listener.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;433</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;434</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 434: method entered 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 434: method entered 80 times.">    <span class="keyword">public</span> PersistenceListener getPersistenceListener() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;435</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 435: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 435: statement executed 80 times.">        <span class="keyword">return</span> persistenceListener;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;436</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;437</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;438</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;439</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Sets the unlimited disk caching flag.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;440</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;441</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 441: method entered 235 times.">&nbsp;235</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 441: method entered 235 times.">    <span class="keyword">public</span> <span class="keyword">void</span> setUnlimitedDiskCache(<span class="keyword">boolean</span> unlimitedDiskCache) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;442</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 442: statement executed 235 times.">&nbsp;235</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 442: statement executed 235 times.">        <span class="keyword">this</span>.unlimitedDiskCache = unlimitedDiskCache;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;443</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;444</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;445</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;446</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Check if we use unlimited disk cache.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;447</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;448</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 448: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 448: method not entered.">    <span class="keyword">public</span> <span class="keyword">boolean</span> isUnlimitedDiskCache() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;449</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 449: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 449: statement not executed.">        <span class="keyword">return</span> unlimitedDiskCache;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;450</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;451</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;452</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;453</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Check if we use overflowPersistence</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;454</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;455</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span> Returns the overflowPersistence.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;456</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;457</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 457: method entered 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 457: method entered 20 times.">    <span class="keyword">public</span> <span class="keyword">boolean</span> isOverflowPersistence() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;458</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 458: statement executed 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 458: statement executed 20 times.">        <span class="keyword">return</span> <span class="keyword">this</span>.overflowPersistence;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;459</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;460</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;461</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;462</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Sets the overflowPersistence flag</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;463</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;464</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> overflowPersistence The overflowPersistence to set.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;465</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;466</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 466: method entered 305 times.">&nbsp;305</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 466: method entered 305 times.">    <span class="keyword">public</span> <span class="keyword">void</span> setOverflowPersistence(<span class="keyword">boolean</span> overflowPersistence) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;467</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 467: statement executed 305 times.">&nbsp;305</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 467: statement executed 305 times.">        <span class="keyword">this</span>.overflowPersistence = overflowPersistence;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;468</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;469</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;470</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;471</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Return the number of slots in this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;472</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;473</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 473: method entered 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 473: method entered 30 times.">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> capacity() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;474</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 474: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 474: statement executed 30 times.">        <span class="keyword">return</span> table.length;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;475</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;476</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;477</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;478</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Removes all mappings from this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;479</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;480</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 480: method entered 345 times.">&nbsp;345</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 480: method entered 345 times.">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> clear() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;481</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 481: statement executed 345 times.">&nbsp;345</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 481: statement executed 345 times.">        Entry[] tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;482</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;483</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 483: statement executed 345 times.">&nbsp;345</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 483: statement executed 345 times.">        <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; tab.length; ++i) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;484</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            <span class="comment">// must invalidate all to force concurrent get's to wait and then retry</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;485</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 485: statement executed 11040 times.">&nbsp;11040</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 485: statement executed 11040 times.">            <span class="keyword">for</span> (Entry e = tab[i]; e != <span class="keyword">null</span>; e = e.next) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;486</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 486: statement executed 335 times.">&nbsp;335</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 486: statement executed 335 times.">                e.value = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;487</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;488</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;489</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 489: statement executed 335 times.">&nbsp;335</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 489: statement executed 335 times.">                itemRemoved(e.key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;490</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;491</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;492</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;493</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;494</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 494: statement executed 11040 times.">&nbsp;11040</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 494: statement executed 11040 times.">            tab[i] = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;495</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;496</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;497</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Clean out the entire disk cache</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;498</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 498: statement executed 345 times.">&nbsp;345</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 498: statement executed 345 times.">        persistClear();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;499</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;500</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 500: statement executed 345 times.">&nbsp;345</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 500: statement executed 345 times.">        count = 0;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;501</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 501: statement executed 345 times.">&nbsp;345</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 501: statement executed 345 times.">        recordModification(tab);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;502</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;503</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;504</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;505</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns a shallow copy of this.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;506</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * &lt;tt&gt;AbstractConcurrentReadCache&lt;/tt&gt; instance: the keys and</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;507</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * values themselves are not cloned.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;508</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;509</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span> a shallow copy of this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;510</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;511</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 511: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 511: method not entered.">    <span class="keyword">public</span> <span class="keyword">synchronized</span> Object clone() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;512</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 512: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 512: statement not executed.">        <span class="keyword">try</span> {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;513</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 513: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 513: statement not executed.">            AbstractConcurrentReadCache t = (AbstractConcurrentReadCache) <span class="keyword">super</span>.clone();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;514</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 514: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 514: statement not executed.">            t.keySet = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;515</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 515: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 515: statement not executed.">            t.entrySet = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;516</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 516: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 516: statement not executed.">            t.values = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;517</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;518</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 518: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 518: statement not executed.">            Entry[] tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;519</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 519: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 519: statement not executed.">            t.table = <span class="keyword">new</span> Entry[tab.length];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;520</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;521</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 521: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 521: statement not executed.">            Entry[] ttab = t.table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;522</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;523</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 523: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 523: statement not executed.">            <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; tab.length; ++i) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;524</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 524: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 524: statement not executed.">                Entry first = tab[i];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;525</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;526</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 526: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 526: statement not executed.">                <span class="keyword">if</span> (first != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;527</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 527: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 527: statement not executed.">                    ttab[i] = (Entry) (first.clone());</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;528</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;529</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;530</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;531</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 531: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 531: statement not executed.">            <span class="keyword">return</span> t;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;532</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        } <span class="keyword">catch</span> (CloneNotSupportedException e) {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;533</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            <span class="comment">// this shouldn't happen, since we are Cloneable</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;534</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 534: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 534: statement not executed.">            <span class="keyword">throw</span> <span class="keyword">new</span> InternalError();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;535</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;536</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;537</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;538</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;539</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Tests if some key maps into the specified value in this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;540</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * This operation is more expensive than the &lt;code&gt;containsKey&lt;/code&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;541</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * method.&lt;p&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;542</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;543</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Note that this method is identical in functionality to containsValue,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;544</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * (which is part of the Map interface in the collections framework).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;545</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;546</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span>      value   a value to search for.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;547</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span>     &lt;code&gt;true&lt;/code&gt; if and only if some key maps to the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;548</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *             &lt;code&gt;value&lt;/code&gt; argument in this table as</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;549</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *             determined by the &lt;tt&gt;equals&lt;/tt&gt; method;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;550</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *             &lt;code&gt;false&lt;/code&gt; otherwise.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;551</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@exception</span>  NullPointerException  if the value is &lt;code&gt;null&lt;/code&gt;.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;552</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>        #containsKey(Object)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;553</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>        #containsValue(Object)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;554</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>           Map</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;555</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;556</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 556: method entered 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 556: method entered 60 times.">    <span class="keyword">public</span> <span class="keyword">boolean</span> contains(Object value) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;557</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 557: statement executed 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 557: statement executed 60 times.">        <span class="keyword">return</span> containsValue(value);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;558</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;559</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;560</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;561</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Tests if the specified object is a key in this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;562</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;563</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span>   key   possible key.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;564</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span>  &lt;code&gt;true&lt;/code&gt; if and only if the specified object</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;565</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *          is a key in this table, as determined by the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;566</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *          &lt;tt&gt;equals&lt;/tt&gt; method; &lt;code&gt;false&lt;/code&gt; otherwise.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;567</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@exception</span>  NullPointerException  if the key is</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;568</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *               &lt;code&gt;null&lt;/code&gt;.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;569</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>     #contains(Object)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;570</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;571</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 571: method entered 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 571: method entered 30 times.">    <span class="keyword">public</span> <span class="keyword">boolean</span> containsKey(Object key) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;572</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 572: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 572: statement executed 30 times.">        <span class="keyword">return</span> get(key) != <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;573</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;574</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;575</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;576</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// TODO: Also check the persistence?</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;577</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;578</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;579</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;580</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;581</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;582</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns &lt;tt&gt;true&lt;/tt&gt; if this map maps one or more keys to the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;583</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * specified value. Note: This method requires a full internal</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;584</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * traversal of the hash table, and so is much slower than</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;585</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * method &lt;tt&gt;containsKey&lt;/tt&gt;.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;586</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;587</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> value value whose presence in this map is to be tested.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;588</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span> &lt;tt&gt;true&lt;/tt&gt; if this map maps one or more keys to the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;589</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * specified value.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;590</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@exception</span>  NullPointerException  if the value is &lt;code&gt;null&lt;/code&gt;.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;591</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;592</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 592: method entered 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 592: method entered 60 times.">    <span class="keyword">public</span> <span class="keyword">boolean</span> containsValue(Object value) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;593</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 593: expression evaluated to true 0 times, false 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 593: expression evaluated to true 0 times, false 60 times.">        <span class="keyword">if</span> (value == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;594</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 594: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 594: statement not executed.">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;595</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;596</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;597</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 597: statement executed 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 597: statement executed 60 times.">        Entry[] tab = getTableForReading();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;598</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;599</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 599: statement executed 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 599: statement executed 60 times.">        <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; tab.length; ++i) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;600</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 600: statement executed 1650 times.">&nbsp;1650</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 600: statement executed 1650 times.">            <span class="keyword">for</span> (Entry e = tab[i]; e != <span class="keyword">null</span>; e = e.next) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;601</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 601: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 601: statement executed 30 times.">                Object v = e.value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;602</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;603</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 603: expression evaluated to true 30 times, false 0 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 603: expression evaluated to true 30 times, false 0 times.">                <span class="keyword">if</span> ((v != <span class="keyword">null</span>) &amp;&amp; value.equals(v)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;604</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 604: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 604: statement executed 30 times.">                    <span class="keyword">return</span> <span class="keyword">true</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;605</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;606</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;607</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;608</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;609</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 609: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 609: statement executed 30 times.">        <span class="keyword">return</span> <span class="keyword">false</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;610</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;611</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;612</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;613</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns an enumeration of the values in this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;614</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Use the Enumeration methods on the returned object to fetch the elements</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;615</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * sequentially.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;616</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;617</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span>  an enumeration of the values in this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;618</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>     java.util.Enumeration</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;619</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>     #keys()</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;620</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>        #values()</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;621</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>        Map</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;622</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;623</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 623: method entered 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 623: method entered 30 times.">    <span class="keyword">public</span> Enumeration elements() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;624</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 624: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 624: statement executed 30 times.">        <span class="keyword">return</span> <span class="keyword">new</span> ValueIterator();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;625</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;626</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;627</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;628</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns a collection view of the mappings contained in this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;629</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Each element in the returned collection is a &lt;tt&gt;Map.Entry&lt;/tt&gt;.  The</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;630</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * collection is backed by the map, so changes to the map are reflected in</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;631</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * the collection, and vice-versa.  The collection supports element</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;632</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * removal, which removes the corresponding mapping from the map, via the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;633</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * &lt;tt&gt;Iterator.remove&lt;/tt&gt;, &lt;tt&gt;Collection.remove&lt;/tt&gt;,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;634</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * &lt;tt&gt;removeAll&lt;/tt&gt;, &lt;tt&gt;retainAll&lt;/tt&gt;, and &lt;tt&gt;clear&lt;/tt&gt; operations.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;635</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * It does not support the &lt;tt&gt;add&lt;/tt&gt; or &lt;tt&gt;addAll&lt;/tt&gt; operations.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;636</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;637</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span> a collection view of the mappings contained in this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;638</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;639</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 639: method entered 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 639: method entered 30 times.">    <span class="keyword">public</span> Set entrySet() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;640</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 640: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 640: statement executed 30 times.">        Set es = entrySet;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;641</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;642</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 642: expression evaluated to true 0 times, false 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 642: expression evaluated to true 0 times, false 30 times.">        <span class="keyword">if</span> (es != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;643</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 643: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 643: statement not executed.">            <span class="keyword">return</span> es;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;644</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;645</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 645: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 645: statement executed 30 times.">            <span class="keyword">return</span> entrySet = <span class="keyword">new</span> AbstractSet() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;646</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 646: method entered 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 646: method entered 30 times.">                        <span class="keyword">public</span> Iterator iterator() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;647</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 647: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 647: statement executed 30 times.">                            <span class="keyword">return</span> <span class="keyword">new</span> HashIterator();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;648</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;649</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;650</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 650: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 650: method not entered.">                        <span class="keyword">public</span> <span class="keyword">boolean</span> contains(Object o) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;651</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 651: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 651: statement not executed.">                            <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Map.Entry)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;652</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 652: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 652: statement not executed.">                                <span class="keyword">return</span> <span class="keyword">false</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;653</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;654</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;655</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 655: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 655: statement not executed.">                            Map.Entry entry = (Map.Entry) o;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;656</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 656: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 656: statement not executed.">                            Object key = entry.getKey();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;657</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 657: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 657: statement not executed.">                            Object v = AbstractConcurrentReadCache.<span class="keyword">this</span>.get(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;658</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;659</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 659: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 659: statement not executed.">                            <span class="keyword">return</span> (v != <span class="keyword">null</span>) &amp;&amp; v.equals(entry.getValue());</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;660</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;661</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;662</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 662: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 662: method not entered.">                        <span class="keyword">public</span> <span class="keyword">boolean</span> remove(Object o) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;663</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 663: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 663: statement not executed.">                            <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Map.Entry)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;664</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 664: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 664: statement not executed.">                                <span class="keyword">return</span> <span class="keyword">false</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;665</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;666</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;667</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 667: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 667: statement not executed.">                            <span class="keyword">return</span> AbstractConcurrentReadCache.<span class="keyword">this</span>.findAndRemoveEntry((Map.Entry) o);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;668</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;669</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;670</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 670: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 670: method not entered.">                        <span class="keyword">public</span> <span class="keyword">int</span> size() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;671</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 671: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 671: statement not executed.">                            <span class="keyword">return</span> AbstractConcurrentReadCache.<span class="keyword">this</span>.size();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;672</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;673</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;674</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 674: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 674: method not entered.">                        <span class="keyword">public</span> <span class="keyword">void</span> clear() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;675</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 675: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 675: statement not executed.">                            AbstractConcurrentReadCache.<span class="keyword">this</span>.clear();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;676</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;677</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    };</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;678</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;679</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;680</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;681</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;682</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns the value to which the specified key is mapped in this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;683</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;684</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span>   key   a key in the table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;685</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span>  the value to which the key is mapped in this table;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;686</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *          &lt;code&gt;null&lt;/code&gt; if the key is not mapped to any value in</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;687</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *          this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;688</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@exception</span>  NullPointerException  if the key is</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;689</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *               &lt;code&gt;null&lt;/code&gt;.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;690</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>     #put(Object, Object)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;691</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;692</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 692: method entered 4628714 times.">&nbsp;4628714</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 692: method entered 4628714 times.">    <span class="keyword">public</span> Object get(Object key) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;693</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 693: expression evaluated to true 0 times, false 4631277 times.">&nbsp;4631277</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 693: expression evaluated to true 0 times, false 4631277 times.">        <span class="keyword">if</span> (log.isDebugEnabled()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;694</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 694: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 694: statement not executed.">            log.debug(<span class="string">"get called (key="</span> + key + <span class="string">")"</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;695</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;696</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;697</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// throw null pointer exception if key null</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;698</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 698: statement executed 4631277 times.">&nbsp;4631277</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 698: statement executed 4631277 times.">        <span class="keyword">int</span> hash = hash(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;699</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;700</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/*</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;701</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">           Start off at the apparently correct bin.  If entry is found, we</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;702</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">           need to check after a barrier anyway.  If not found, we need a</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;703</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">           barrier to check if we are actually in right bin. So either</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;704</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">           way, we encounter only one barrier unless we need to retry.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;705</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">           And we only need to fully synchronize if there have been</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;706</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">           concurrent modifications.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;707</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;708</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 708: statement executed 4631247 times.">&nbsp;4631247</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 708: statement executed 4631247 times.">        Entry[] tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;709</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 709: statement executed 4631247 times.">&nbsp;4631247</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 709: statement executed 4631247 times.">        <span class="keyword">int</span> index = hash &amp; (tab.length - 1);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;710</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 710: statement executed 4630432 times.">&nbsp;4630432</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 710: statement executed 4630432 times.">        Entry first = tab[index];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;711</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 711: statement executed 4631247 times.">&nbsp;4631247</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 711: statement executed 4631247 times.">        Entry e = first;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;712</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;713</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 713: statement executed 4631247 times.">&nbsp;4631247</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 713: statement executed 4631247 times.">        <span class="keyword">for</span> (;;) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;714</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 714: statement executed 4687757 times.">&nbsp;4687757</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 714: statement executed 4687757 times.">            <span class="keyword">if</span> (e == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;715</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// If key apparently not there, check to</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;716</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// make sure this was a valid read</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;717</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 717: statement executed 120461 times.">&nbsp;120461</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 717: statement executed 120461 times.">                tab = getTableForReading();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;718</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;719</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 719: expression evaluated to true 120461 times, false 0 times.">&nbsp;120461</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 719: expression evaluated to true 120461 times, false 0 times.">                <span class="keyword">if</span> (first == tab[index]) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;720</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;721</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;722</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/* Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;723</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                    return null;*/</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;724</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;725</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// Not in the table, try persistence</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;726</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 726: statement executed 120461 times.">&nbsp;120461</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 726: statement executed 120461 times.">                    Object value = persistRetrieve(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;727</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;728</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 728: statement executed 120461 times.">&nbsp;120461</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 728: statement executed 120461 times.">                    <span class="keyword">if</span> (value != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;729</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// Update the map, but don't persist the data</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;730</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 730: statement executed 43 times.">&nbsp;43</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 730: statement executed 43 times.">                        put(key, value, <span class="keyword">false</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;731</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;732</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;733</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 733: statement executed 120461 times.">&nbsp;120461</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 733: statement executed 120461 times.">                    <span class="keyword">return</span> value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;734</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;735</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;736</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;737</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// Wrong list -- must restart traversal at new first</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;738</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 738: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 738: statement not executed.">                    e = first = tab[index = hash &amp; (tab.length - 1)];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;739</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;740</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;741</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            <span class="comment">// checking for pointer equality first wins in most applications</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;742</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 742: statement executed 4567296 times.">&nbsp;4567296</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 742: statement executed 4567296 times.">            <span class="keyword">else</span> <span class="keyword">if</span> ((key == e.key) || ((e.hash == hash) &amp;&amp; key.equals(e.key))) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;743</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 743: statement executed 4510786 times.">&nbsp;4510786</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 743: statement executed 4510786 times.">                Object value = e.value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;744</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;745</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 745: expression evaluated to true 4510786 times, false 0 times.">&nbsp;4510786</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 745: expression evaluated to true 4510786 times, false 0 times.">                <span class="keyword">if</span> (value != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;746</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;747</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;748</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/* Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;749</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                    return value;*/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;750</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 750: statement executed 4510786 times.">&nbsp;4510786</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 750: statement executed 4510786 times.">                    <span class="keyword">if</span> (NULL.equals(value)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;751</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// Memory cache disable, use disk</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;752</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 752: statement executed 256 times.">&nbsp;256</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 752: statement executed 256 times.">                        value = persistRetrieve(e.key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;753</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;754</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 754: statement executed 256 times.">&nbsp;256</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 754: statement executed 256 times.">                        <span class="keyword">if</span> (value != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;755</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 755: statement executed 254 times.">&nbsp;254</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 755: statement executed 254 times.">                            itemRetrieved(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;756</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;757</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;758</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 758: statement executed 256 times.">&nbsp;256</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 758: statement executed 256 times.">                        <span class="keyword">return</span> value; <span class="comment">// fix [CACHE-13]</span></A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;759</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;760</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 760: statement executed 4510530 times.">&nbsp;4510530</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 760: statement executed 4510530 times.">                        itemRetrieved(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;761</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;762</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 762: statement executed 4510530 times.">&nbsp;4510530</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 762: statement executed 4510530 times.">                        <span class="keyword">return</span> value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;763</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;764</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;765</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;766</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;767</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;768</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// Entry was invalidated during deletion. But it could</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;769</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// have been re-inserted, so we must retraverse.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;770</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// To avoid useless contention, get lock to wait out modifications</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;771</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// before retraversing.</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;772</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 772: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 772: statement not executed.">                <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;773</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 773: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 773: statement not executed.">                    tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;774</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;775</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;776</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 776: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 776: statement not executed.">                e = first = tab[index = hash &amp; (tab.length - 1)];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;777</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;778</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 778: statement executed 56510 times.">&nbsp;56510</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 778: statement executed 56510 times.">                e = e.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;779</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;780</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;781</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;782</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;783</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;784</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns a set view of the keys contained in this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;785</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The set is backed by the map, so changes to the map are reflected in the set, and</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;786</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * vice-versa.  The set supports element removal, which removes the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;787</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * corresponding mapping from this map, via the &lt;tt&gt;Iterator.remove&lt;/tt&gt;,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;788</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * &lt;tt&gt;Set.remove&lt;/tt&gt;, &lt;tt&gt;removeAll&lt;/tt&gt;, &lt;tt&gt;retainAll&lt;/tt&gt;, and</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;789</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * &lt;tt&gt;clear&lt;/tt&gt; operations.  It does not support the &lt;tt&gt;add&lt;/tt&gt; or</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;790</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * &lt;tt&gt;addAll&lt;/tt&gt; operations.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;791</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;792</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span> a set view of the keys contained in this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;793</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;794</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 794: method entered 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 794: method entered 30 times.">    <span class="keyword">public</span> Set keySet() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;795</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 795: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 795: statement executed 30 times.">        Set ks = keySet;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;796</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;797</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 797: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 797: statement executed 30 times.">        <span class="keyword">if</span> (ks != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;798</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 798: statement executed 10 times.">&nbsp;10</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 798: statement executed 10 times.">            <span class="keyword">return</span> ks;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;799</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;800</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 800: statement executed 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 800: statement executed 20 times.">            <span class="keyword">return</span> keySet = <span class="keyword">new</span> AbstractSet() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;801</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 801: method entered 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 801: method entered 30 times.">                        <span class="keyword">public</span> Iterator iterator() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;802</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 802: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 802: statement executed 30 times.">                            <span class="keyword">return</span> <span class="keyword">new</span> KeyIterator();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;803</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;804</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;805</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 805: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 805: method not entered.">                        <span class="keyword">public</span> <span class="keyword">int</span> size() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;806</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 806: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 806: statement not executed.">                            <span class="keyword">return</span> AbstractConcurrentReadCache.<span class="keyword">this</span>.size();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;807</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;808</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;809</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 809: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 809: method not entered.">                        <span class="keyword">public</span> <span class="keyword">boolean</span> contains(Object o) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;810</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 810: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 810: statement not executed.">                            <span class="keyword">return</span> AbstractConcurrentReadCache.<span class="keyword">this</span>.containsKey(o);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;811</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;812</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;813</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 813: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 813: method not entered.">                        <span class="keyword">public</span> <span class="keyword">boolean</span> remove(Object o) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;814</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 814: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 814: statement not executed.">                            <span class="keyword">return</span> AbstractConcurrentReadCache.<span class="keyword">this</span>.remove(o) != <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;815</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;816</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;817</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 817: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 817: method not entered.">                        <span class="keyword">public</span> <span class="keyword">void</span> clear() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;818</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 818: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 818: statement not executed.">                            AbstractConcurrentReadCache.<span class="keyword">this</span>.clear();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;819</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;820</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    };</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;821</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;822</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;823</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;824</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;825</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns an enumeration of the keys in this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;826</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;827</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span>  an enumeration of the keys in this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;828</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>     Enumeration</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;829</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>     #elements()</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;830</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>        #keySet()</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;831</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>        Map</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;832</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;833</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 833: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 833: method not entered.">    <span class="keyword">public</span> Enumeration keys() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;834</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 834: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 834: statement not executed.">        <span class="keyword">return</span> <span class="keyword">new</span> KeyIterator();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;835</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;836</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;837</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;838</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Return the load factor</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;839</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;840</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 840: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 840: method not entered.">    <span class="keyword">public</span> <span class="keyword">float</span> loadFactor() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;841</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 841: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 841: statement not executed.">        <span class="keyword">return</span> loadFactor;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;842</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;843</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;844</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;845</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Maps the specified &lt;code&gt;key&lt;/code&gt; to the specified &lt;code&gt;value&lt;/code&gt; in this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;846</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Neither the key nor the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;847</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * value can be &lt;code&gt;null&lt;/code&gt;. &lt;p&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;848</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;849</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The value can be retrieved by calling the &lt;code&gt;get&lt;/code&gt; method</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;850</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * with a key that is equal to the original key.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;851</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;852</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span>      key     the table key.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;853</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span>      value   the value.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;854</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span>     the previous value of the specified key in this table,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;855</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *             or &lt;code&gt;null&lt;/code&gt; if it did not have one.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;856</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@exception</span>  NullPointerException  if the key or value is</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;857</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *               &lt;code&gt;null&lt;/code&gt;.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;858</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>     Object#equals(Object)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;859</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@see</span>     #get(Object)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;860</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;861</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;862</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 862: method entered 66054 times.">&nbsp;66054</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 862: method entered 66054 times.">    <span class="keyword">public</span> Object put(Object key, Object value) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;863</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Call the internal put using persistance</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;864</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 864: statement executed 66054 times.">&nbsp;66054</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 864: statement executed 66054 times.">        <span class="keyword">return</span> put(key, value, <span class="keyword">true</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;865</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;866</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;867</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;868</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Copies all of the mappings from the specified map to this one.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;869</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;870</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * These mappings replace any mappings that this map had for any of the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;871</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * keys currently in the specified Map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;872</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;873</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> t Mappings to be stored in this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;874</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;875</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 875: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 875: method not entered.">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> putAll(Map t) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;876</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 876: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 876: statement not executed.">        <span class="keyword">for</span> (Iterator it = t.entrySet().iterator(); it.hasNext();) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;877</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 877: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 877: statement not executed.">            Map.Entry entry = (Map.Entry) it.next();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;878</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 878: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 878: statement not executed.">            Object key = entry.getKey();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;879</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 879: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 879: statement not executed.">            Object value = entry.getValue();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;880</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 880: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 880: statement not executed.">            put(key, value);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;881</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;882</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;883</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;884</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;885</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Removes the key (and its corresponding value) from this table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;886</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * This method does nothing if the key is not in the table.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;887</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;888</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span>   key   the key that needs to be removed.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;889</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span>  the value to which the key had been mapped in this table,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;890</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *          or &lt;code&gt;null&lt;/code&gt; if the key did not have a mapping.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;891</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;892</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;893</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 893: method entered 70 times.">&nbsp;70</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 893: method entered 70 times.">    <span class="keyword">public</span> Object remove(Object key) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;894</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 894: statement executed 70 times.">&nbsp;70</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 894: statement executed 70 times.">        <span class="keyword">return</span> remove(key, <span class="keyword">true</span>, <span class="keyword">false</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;895</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;896</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;897</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;898</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Like &lt;code&gt;remove(Object)&lt;/code&gt;, but ensures that the entry will be removed from the persistent store, too,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;899</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * even if overflowPersistence or unlimitedDiskcache are true.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;900</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;901</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span>   key   the key that needs to be removed.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;902</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span>  the value to which the key had been mapped in this table,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;903</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *          or &lt;code&gt;null&lt;/code&gt; if the key did not have a mapping.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;904</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;905</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 905: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 905: method not entered.">    <span class="keyword">public</span> Object removeForce(Object key) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;906</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 906: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 906: statement not executed.">      <span class="keyword">return</span> remove(key, <span class="keyword">true</span>, <span class="keyword">true</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;907</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;908</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;909</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;910</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns the total number of cache entries held in this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;911</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;912</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span> the number of key-value mappings in this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;913</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;914</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 914: method entered 61288 times.">&nbsp;61288</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 914: method entered 61288 times.">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> size() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;915</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 915: statement executed 61288 times.">&nbsp;61288</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 915: statement executed 61288 times.">        <span class="keyword">return</span> count;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;916</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;917</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;918</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;919</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns a collection view of the values contained in this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;920</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The collection is backed by the map, so changes to the map are reflected in</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;921</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * the collection, and vice-versa.  The collection supports element</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;922</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * removal, which removes the corresponding mapping from this map, via the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;923</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * &lt;tt&gt;Iterator.remove&lt;/tt&gt;, &lt;tt&gt;Collection.remove&lt;/tt&gt;,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;924</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * &lt;tt&gt;removeAll&lt;/tt&gt;, &lt;tt&gt;retainAll&lt;/tt&gt;, and &lt;tt&gt;clear&lt;/tt&gt; operations.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;925</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * It does not support the &lt;tt&gt;add&lt;/tt&gt; or &lt;tt&gt;addAll&lt;/tt&gt; operations.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;926</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;927</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span> a collection view of the values contained in this map.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;928</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;929</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 929: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 929: method not entered.">    <span class="keyword">public</span> Collection values() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;930</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 930: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 930: statement not executed.">        Collection vs = values;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;931</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;932</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 932: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 932: statement not executed.">        <span class="keyword">if</span> (vs != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;933</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 933: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 933: statement not executed.">            <span class="keyword">return</span> vs;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;934</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;935</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 935: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 935: statement not executed.">            <span class="keyword">return</span> values = <span class="keyword">new</span> AbstractCollection() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;936</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 936: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 936: method not entered.">                        <span class="keyword">public</span> Iterator iterator() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;937</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 937: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 937: statement not executed.">                            <span class="keyword">return</span> <span class="keyword">new</span> ValueIterator();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;938</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;939</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;940</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 940: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 940: method not entered.">                        <span class="keyword">public</span> <span class="keyword">int</span> size() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;941</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 941: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 941: statement not executed.">                            <span class="keyword">return</span> AbstractConcurrentReadCache.<span class="keyword">this</span>.size();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;942</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;943</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;944</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 944: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 944: method not entered.">                        <span class="keyword">public</span> <span class="keyword">boolean</span> contains(Object o) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;945</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 945: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 945: statement not executed.">                            <span class="keyword">return</span> AbstractConcurrentReadCache.<span class="keyword">this</span>.containsValue(o);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;946</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;947</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;948</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 948: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 948: method not entered.">                        <span class="keyword">public</span> <span class="keyword">void</span> clear() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;949</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 949: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 949: statement not executed.">                            AbstractConcurrentReadCache.<span class="keyword">this</span>.clear();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;950</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;951</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    };</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;952</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;953</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;954</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;955</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;956</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Get ref to group.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;957</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * CACHE-127 Synchronized copying of the group entry set since</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;958</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * the new HashSet(Collection c) constructor uses the iterator.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;959</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * This may slow things down but it is better than a</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;960</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * ConcurrentModificationException.  We might have to revisit the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;961</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * code if performance is too adversely impacted.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;962</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;963</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 963: method entered 27 times.">&nbsp;27</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 963: method entered 27 times.">    <span class="keyword">protected</span> <span class="keyword">synchronized</span> final Set getGroupForReading(String groupName) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;964</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 964: statement executed 27 times.">&nbsp;27</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 964: statement executed 27 times.">        Set group = (Set) getGroupsForReading().get(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;965</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 965: statement executed 3 times.">&nbsp;3</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 965: statement executed 3 times.">        <span class="keyword">if</span> (group == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;966</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 966: statement executed 24 times.">&nbsp;24</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 966: statement executed 24 times.">        <span class="keyword">return</span> <span class="keyword">new</span> HashSet(group);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;967</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;968</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;969</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;970</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Get ref to groups.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;971</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The reference and the cells it</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;972</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * accesses will be at least as fresh as from last</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;973</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * use of barrierLock</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;974</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;975</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 975: method entered 67 times.">&nbsp;67</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 975: method entered 67 times.">    <span class="keyword">protected</span> final Map getGroupsForReading() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;976</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 976: statement executed 67 times.">&nbsp;67</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 976: statement executed 67 times.">        <span class="keyword">synchronized</span> (barrierLock) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;977</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 977: statement executed 67 times.">&nbsp;67</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 977: statement executed 67 times.">            <span class="keyword">return</span> groups;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;978</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;979</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;980</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;981</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;982</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Get ref to table; the reference and the cells it</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;983</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * accesses will be at least as fresh as from last</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;984</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * use of barrierLock</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;985</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;986</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 986: method entered 120611 times.">&nbsp;120611</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 986: method entered 120611 times.">    <span class="keyword">protected</span> final Entry[] getTableForReading() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;987</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 987: statement executed 120611 times.">&nbsp;120611</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 987: statement executed 120611 times.">        <span class="keyword">synchronized</span> (barrierLock) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;988</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 988: statement executed 120611 times.">&nbsp;120611</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 988: statement executed 120611 times.">            <span class="keyword">return</span> table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;989</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;990</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;991</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;992</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;993</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Force a memory synchronization that will cause</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;994</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * all readers to see table. Call only when already</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;995</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * holding main synch lock.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;996</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;997</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 997: method entered 70433 times.">&nbsp;70433</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 997: method entered 70433 times.">    <span class="keyword">protected</span> final <span class="keyword">void</span> recordModification(Object x) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;998</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 998: statement executed 70433 times.">&nbsp;70433</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 998: statement executed 70433 times.">        <span class="keyword">synchronized</span> (barrierLock) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;999</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 999: statement executed 70433 times.">&nbsp;70433</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 999: statement executed 70433 times.">            lastWrite = x;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1000</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1001</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1002</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1003</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1004</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Helper method for entrySet remove.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1005</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1006</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1006: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1006: method not entered.">    <span class="keyword">protected</span> <span class="keyword">synchronized</span> <span class="keyword">boolean</span> findAndRemoveEntry(Map.Entry entry) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1007</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1007: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1007: statement not executed.">        Object key = entry.getKey();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1008</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1008: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1008: statement not executed.">        Object v = get(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1009</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1010</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1010: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1010: statement not executed.">        <span class="keyword">if</span> ((v != <span class="keyword">null</span>) &amp;&amp; v.equals(entry.getValue())) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1011</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1011: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1011: statement not executed.">            remove(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1012</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1013</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1013: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1013: statement not executed.">            <span class="keyword">return</span> <span class="keyword">true</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1014</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1015</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1015: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1015: statement not executed.">            <span class="keyword">return</span> <span class="keyword">false</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1016</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1017</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1018</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1019</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1020</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Remove an object from the persistence.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1021</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> key The key of the object to remove</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1022</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1023</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1023: method entered 9072 times.">&nbsp;9072</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1023: method entered 9072 times.">    <span class="keyword">protected</span> <span class="keyword">void</span> persistRemove(Object key) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1024</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1024: expression evaluated to true 0 times, false 9072 times.">&nbsp;9072</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1024: expression evaluated to true 0 times, false 9072 times.">        <span class="keyword">if</span> (log.isDebugEnabled()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1025</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1025: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1025: statement not executed.">            log.debug(<span class="string">"PersistRemove called (key="</span> + key + <span class="string">")"</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1026</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1027</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1028</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1028: statement executed 9072 times.">&nbsp;9072</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1028: statement executed 9072 times.">        <span class="keyword">if</span> (persistenceListener != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1029</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1029: statement executed 42 times.">&nbsp;42</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1029: statement executed 42 times.">            <span class="keyword">try</span> {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1030</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1030: statement executed 42 times.">&nbsp;42</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1030: statement executed 42 times.">                persistenceListener.remove((String) key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1031</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">catch</span> (CachePersistenceException e) {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1032</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1032: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1032: statement not executed.">                log.error(<span class="string">"[oscache] Exception removing cache entry with key '"</span> + key + <span class="string">"' from persistence"</span>, e);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1033</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1034</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1035</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1036</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1037</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1038</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Removes a cache group using the persistence listener.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1039</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> groupName The name of the group to remove</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1040</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1041</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1041: method entered 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1041: method entered 20 times.">    <span class="keyword">protected</span> <span class="keyword">void</span> persistRemoveGroup(String groupName) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1042</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1042: expression evaluated to true 0 times, false 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1042: expression evaluated to true 0 times, false 20 times.">        <span class="keyword">if</span> (log.isDebugEnabled()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1043</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1043: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1043: statement not executed.">            log.debug(<span class="string">"persistRemoveGroup called (groupName="</span> + groupName + <span class="string">")"</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1044</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1045</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1046</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1046: expression evaluated to true 20 times, false 0 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1046: expression evaluated to true 20 times, false 0 times.">        <span class="keyword">if</span> (persistenceListener != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1047</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1047: statement executed 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1047: statement executed 20 times.">            <span class="keyword">try</span> {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1048</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1048: statement executed 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1048: statement executed 20 times.">                persistenceListener.removeGroup(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1049</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">catch</span> (CachePersistenceException e) {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1050</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1050: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1050: statement not executed.">                log.error(<span class="string">"[oscache] Exception removing group "</span> + groupName, e);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1051</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1052</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1053</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1054</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1055</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1056</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Retrieve an object from the persistence listener.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1057</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> key The key of the object to retrieve</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1058</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1059</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1059: method entered 120785 times.">&nbsp;120785</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1059: method entered 120785 times.">    <span class="keyword">protected</span> Object persistRetrieve(Object key) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1060</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1060: expression evaluated to true 0 times, false 120785 times.">&nbsp;120785</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1060: expression evaluated to true 0 times, false 120785 times.">        <span class="keyword">if</span> (log.isDebugEnabled()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1061</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1061: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1061: statement not executed.">            log.debug(<span class="string">"persistRetrieve called (key="</span> + key + <span class="string">")"</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1062</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1063</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1064</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1064: statement executed 120785 times.">&nbsp;120785</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1064: statement executed 120785 times.">        Object entry = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1065</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1066</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1066: statement executed 120785 times.">&nbsp;120785</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1066: statement executed 120785 times.">        <span class="keyword">if</span> (persistenceListener != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1067</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1067: statement executed 647 times.">&nbsp;647</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1067: statement executed 647 times.">            <span class="keyword">try</span> {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1068</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1068: statement executed 647 times.">&nbsp;647</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1068: statement executed 647 times.">                entry = persistenceListener.retrieve((String) key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1069</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">catch</span> (CachePersistenceException e) {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1070</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1071</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * It is normal that we get an exception occasionally.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1072</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * It happens when the item is invalidated (written or removed)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1073</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 * during read. The logic is constructed so that read is retried.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1074</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                 */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1075</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1076</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1077</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1078</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1078: statement executed 120785 times.">&nbsp;120785</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1078: statement executed 120785 times.">        <span class="keyword">return</span> entry;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1079</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1080</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1081</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1082</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Retrieves a cache group using the persistence listener.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1083</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> groupName The name of the group to retrieve</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1084</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1085</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1085: method entered 307 times.">&nbsp;307</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1085: method entered 307 times.">    <span class="keyword">protected</span> Set persistRetrieveGroup(String groupName) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1086</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1086: expression evaluated to true 0 times, false 307 times.">&nbsp;307</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1086: expression evaluated to true 0 times, false 307 times.">        <span class="keyword">if</span> (log.isDebugEnabled()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1087</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1087: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1087: statement not executed.">            log.debug(<span class="string">"persistRetrieveGroup called (groupName="</span> + groupName + <span class="string">")"</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1088</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1089</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1090</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1090: statement executed 307 times.">&nbsp;307</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1090: statement executed 307 times.">        <span class="keyword">if</span> (persistenceListener != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1091</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1091: statement executed 248 times.">&nbsp;248</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1091: statement executed 248 times.">            <span class="keyword">try</span> {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1092</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1092: statement executed 248 times.">&nbsp;248</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1092: statement executed 248 times.">                <span class="keyword">return</span> persistenceListener.retrieveGroup(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1093</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">catch</span> (CachePersistenceException e) {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1094</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1094: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1094: statement not executed.">                log.error(<span class="string">"[oscache] Exception retrieving group "</span> + groupName, e);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1095</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1096</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1097</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1098</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1098: statement executed 59 times.">&nbsp;59</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1098: statement executed 59 times.">        <span class="keyword">return</span> <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1099</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1100</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1101</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1102</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Store an object in the cache using the persistence listener.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1103</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> key The object key</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1104</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> obj The object to store</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1105</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1106</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1106: method entered 65708 times.">&nbsp;65708</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1106: method entered 65708 times.">    <span class="keyword">protected</span> <span class="keyword">void</span> persistStore(Object key, Object obj) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1107</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1107: expression evaluated to true 0 times, false 65708 times.">&nbsp;65708</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1107: expression evaluated to true 0 times, false 65708 times.">        <span class="keyword">if</span> (log.isDebugEnabled()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1108</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1108: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1108: statement not executed.">            log.debug(<span class="string">"persistStore called (key="</span> + key + <span class="string">")"</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1109</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1110</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1111</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1111: statement executed 65708 times.">&nbsp;65708</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1111: statement executed 65708 times.">        <span class="keyword">if</span> (persistenceListener != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1112</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1112: statement executed 362 times.">&nbsp;362</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1112: statement executed 362 times.">            <span class="keyword">try</span> {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1113</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1113: statement executed 362 times.">&nbsp;362</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1113: statement executed 362 times.">                persistenceListener.store((String) key, obj);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1114</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">catch</span> (CachePersistenceException e) {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1115</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1115: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1115: statement not executed.">                log.error(<span class="string">"[oscache] Exception persisting "</span> + key, e);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1116</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1117</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1118</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1119</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1120</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1121</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Creates or Updates a cache group using the persistence listener.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1122</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> groupName The name of the group to update</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1123</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> group The entries for the group</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1124</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1125</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1125: method entered 260 times.">&nbsp;260</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1125: method entered 260 times.">    <span class="keyword">protected</span> <span class="keyword">void</span> persistStoreGroup(String groupName, Set group) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1126</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1126: expression evaluated to true 0 times, false 260 times.">&nbsp;260</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1126: expression evaluated to true 0 times, false 260 times.">        <span class="keyword">if</span> (log.isDebugEnabled()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1127</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1127: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1127: statement not executed.">            log.debug(<span class="string">"persistStoreGroup called (groupName="</span> + groupName + <span class="string">")"</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1128</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1129</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1130</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1130: statement executed 260 times.">&nbsp;260</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1130: statement executed 260 times.">        <span class="keyword">if</span> (persistenceListener != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1131</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1131: statement executed 208 times.">&nbsp;208</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1131: statement executed 208 times.">            <span class="keyword">try</span> {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1132</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1132: expression evaluated to true 0 times, false 208 times.">&nbsp;208</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1132: expression evaluated to true 0 times, false 208 times.">                <span class="keyword">if</span> ((group == <span class="keyword">null</span>) || group.isEmpty()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1133</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1133: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1133: statement not executed.">                    persistenceListener.removeGroup(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1134</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1135</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1135: statement executed 208 times.">&nbsp;208</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1135: statement executed 208 times.">                    persistenceListener.storeGroup(groupName, group);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1136</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1137</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">catch</span> (CachePersistenceException e) {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1138</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1138: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1138: statement not executed.">                log.error(<span class="string">"[oscache] Exception persisting group "</span> + groupName, e);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1139</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1140</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1141</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1142</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1143</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1144</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Removes the entire cache from persistent storage.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1145</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1146</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1146: method entered 345 times.">&nbsp;345</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1146: method entered 345 times.">    <span class="keyword">protected</span> <span class="keyword">void</span> persistClear() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1147</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1147: expression evaluated to true 0 times, false 345 times.">&nbsp;345</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1147: expression evaluated to true 0 times, false 345 times.">        <span class="keyword">if</span> (log.isDebugEnabled()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1148</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1148: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1148: statement not executed.">            log.debug(<span class="string">"persistClear called"</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1149</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            ;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1150</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1151</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1152</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1152: statement executed 345 times.">&nbsp;345</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1152: statement executed 345 times.">        <span class="keyword">if</span> (persistenceListener != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1153</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1153: statement executed 168 times.">&nbsp;168</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1153: statement executed 168 times.">            <span class="keyword">try</span> {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1154</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1154: statement executed 168 times.">&nbsp;168</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1154: statement executed 168 times.">                persistenceListener.clear();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1155</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">catch</span> (CachePersistenceException e) {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1156</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1156: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1156: statement not executed.">                log.error(<span class="string">"[oscache] Exception clearing persistent cache"</span>, e);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1157</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1158</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1159</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1160</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1161</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1162</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Notify the underlying implementation that an item was put in the cache.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1163</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1164</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> key The cache key of the item that was put.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1165</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1166</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> abstract <span class="keyword">void</span> itemPut(Object key);</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1167</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1168</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1169</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Notify any underlying algorithm that an item has been retrieved from the cache.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1170</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1171</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> key The cache key of the item that was retrieved.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1172</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1173</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> abstract <span class="keyword">void</span> itemRetrieved(Object key);</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1174</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1175</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1176</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Notify the underlying implementation that an item was removed from the cache.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1177</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1178</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> key The cache key of the item that was removed.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1179</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1180</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> abstract <span class="keyword">void</span> itemRemoved(Object key);</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1181</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1182</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1183</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The cache has reached its cacpacity and an item needs to be removed.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1184</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * (typically according to an algorithm such as LRU or FIFO).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1185</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1186</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@return</span> The key of whichever item was removed.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1187</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1188</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> abstract Object removeItem();</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1189</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1190</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1191</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Reconstitute the &lt;tt&gt;AbstractConcurrentReadCache&lt;/tt&gt;.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1192</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * instance from a stream (i.e.,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1193</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * deserialize it).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1194</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1195</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1195: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1195: method not entered.">    <span class="keyword">private</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> readObject(java.io.ObjectInputStream s) <span class="keyword">throws</span> IOException, ClassNotFoundException {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1196</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Read in the threshold, loadfactor, and any hidden stuff</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1197</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1197: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1197: statement not executed.">        s.defaultReadObject();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1198</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1199</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Read in number of buckets and allocate the bucket array;</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1200</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1200: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1200: statement not executed.">        <span class="keyword">int</span> numBuckets = s.readInt();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1201</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1201: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1201: statement not executed.">        table = <span class="keyword">new</span> Entry[numBuckets];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1202</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1203</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Read in size (number of Mappings)</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1204</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1204: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1204: statement not executed.">        <span class="keyword">int</span> size = s.readInt();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1205</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1206</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Read the keys and values, and put the mappings in the table</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1207</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1207: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1207: statement not executed.">        <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; size; i++) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1208</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1208: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1208: statement not executed.">            Object key = s.readObject();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1209</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1209: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1209: statement not executed.">            Object value = s.readObject();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1210</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1210: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1210: statement not executed.">            put(key, value);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1211</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1212</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1213</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1214</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1215</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Rehashes the contents of this map into a new table with a larger capacity.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1216</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * This method is called automatically when the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1217</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * number of keys in this map exceeds its capacity and load factor.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1218</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1219</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1219: method entered 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1219: method entered 80 times.">    <span class="keyword">protected</span> <span class="keyword">void</span> rehash() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1220</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1220: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1220: statement executed 80 times.">        Entry[] oldMap = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1221</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1221: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1221: statement executed 80 times.">        <span class="keyword">int</span> oldCapacity = oldMap.length;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1222</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1223</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1223: expression evaluated to true 0 times, false 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1223: expression evaluated to true 0 times, false 80 times.">        <span class="keyword">if</span> (oldCapacity &gt;= MAXIMUM_CAPACITY) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1224</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1224: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1224: statement not executed.">            <span class="keyword">return</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1225</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1226</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1227</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1227: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1227: statement executed 80 times.">        <span class="keyword">int</span> newCapacity = oldCapacity &lt;&lt; 1;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1228</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1228: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1228: statement executed 80 times.">        Entry[] newMap = <span class="keyword">new</span> Entry[newCapacity];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1229</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1229: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1229: statement executed 80 times.">        threshold = (<span class="keyword">int</span>) (newCapacity * loadFactor);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1230</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1231</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/*</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1232</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">          We need to guarantee that any existing reads of oldMap can</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1233</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">          proceed. So we cannot yet null out each oldMap bin.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1234</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1235</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">          Because we are using power-of-two expansion, the elements</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1236</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">          from each bin must either stay at same index, or move</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1237</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">          to oldCapacity+index. We also minimize new node creation by</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1238</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">          catching cases where old nodes can be reused because their</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1239</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">          .next fields won't change. (This is checked only for sequences</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1240</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">          of one and two. It is not worth checking longer ones.)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1241</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1242</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1242: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1242: statement executed 80 times.">        <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; oldCapacity; ++i) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1243</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1243: statement executed 84160 times.">&nbsp;84160</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1243: statement executed 84160 times.">            Entry l = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1244</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1244: statement executed 84160 times.">&nbsp;84160</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1244: statement executed 84160 times.">            Entry h = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1245</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1245: statement executed 84160 times.">&nbsp;84160</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1245: statement executed 84160 times.">            Entry e = oldMap[i];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1246</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1247</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1247: statement executed 84160 times.">&nbsp;84160</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1247: statement executed 84160 times.">            <span class="keyword">while</span> (e != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1248</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1248: statement executed 55321 times.">&nbsp;55321</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1248: statement executed 55321 times.">                <span class="keyword">int</span> hash = e.hash;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1249</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1249: statement executed 55321 times.">&nbsp;55321</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1249: statement executed 55321 times.">                Entry next = e.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1250</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1251</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1251: statement executed 55321 times.">&nbsp;55321</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1251: statement executed 55321 times.">                <span class="keyword">if</span> ((hash &amp; oldCapacity) == 0) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1252</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// stays at newMap[i]</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1253</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1253: statement executed 26866 times.">&nbsp;26866</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1253: statement executed 26866 times.">                    <span class="keyword">if</span> (l == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1254</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// try to reuse node</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1255</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1255: statement executed 24239 times.">&nbsp;24239</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1255: statement executed 24239 times.">                        <span class="keyword">if</span> ((next == <span class="keyword">null</span>) || ((next.next == <span class="keyword">null</span>) &amp;&amp; ((next.hash &amp; oldCapacity) == 0))) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1256</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1256: statement executed 19738 times.">&nbsp;19738</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1256: statement executed 19738 times.">                            l = e;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1257</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1258</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1258: statement executed 19738 times.">&nbsp;19738</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1258: statement executed 19738 times.">                            <span class="keyword">break</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1259</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1260</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1261</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1262</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1262: statement executed 7128 times.">&nbsp;7128</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1262: statement executed 7128 times.">                    l = <span class="keyword">new</span> Entry(hash, e.key, e.value, l);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1263</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1264</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// moves to newMap[oldCapacity+i]</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1265</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1265: statement executed 28455 times.">&nbsp;28455</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1265: statement executed 28455 times.">                    <span class="keyword">if</span> (h == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1266</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1266: statement executed 25976 times.">&nbsp;25976</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1266: statement executed 25976 times.">                        <span class="keyword">if</span> ((next == <span class="keyword">null</span>) || ((next.next == <span class="keyword">null</span>) &amp;&amp; ((next.hash &amp; oldCapacity) != 0))) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1267</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1267: statement executed 21513 times.">&nbsp;21513</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1267: statement executed 21513 times.">                            h = e;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1268</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1269</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1269: statement executed 21513 times.">&nbsp;21513</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1269: statement executed 21513 times.">                            <span class="keyword">break</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1270</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1271</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1272</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1273</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1273: statement executed 6942 times.">&nbsp;6942</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1273: statement executed 6942 times.">                    h = <span class="keyword">new</span> Entry(hash, e.key, e.value, h);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1274</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1275</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1276</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1276: statement executed 14070 times.">&nbsp;14070</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1276: statement executed 14070 times.">                e = next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1277</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1278</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1279</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1279: statement executed 84160 times.">&nbsp;84160</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1279: statement executed 84160 times.">            newMap[i] = l;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1280</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1280: statement executed 84160 times.">&nbsp;84160</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1280: statement executed 84160 times.">            newMap[oldCapacity + i] = h;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1281</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1282</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1283</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1283: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1283: statement executed 80 times.">        table = newMap;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1284</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1284: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1284: statement executed 80 times.">        recordModification(newMap);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1285</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1286</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1287</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1288</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Continuation of put(), called only when synch lock is</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1289</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * held and interference has been detected.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1290</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1291</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1292</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1293</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/* Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1294</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">    protected Object sput(Object key, Object value, int hash) {*/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1295</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1295: method entered 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1295: method entered 33 times.">    <span class="keyword">protected</span> Object sput(Object key, Object value, <span class="keyword">int</span> hash, <span class="keyword">boolean</span> persist) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1296</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1297</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1297: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1297: statement executed 33 times.">        Entry[] tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1298</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1298: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1298: statement executed 33 times.">        <span class="keyword">int</span> index = hash &amp; (tab.length - 1);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1299</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1299: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1299: statement executed 33 times.">        Entry first = tab[index];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1300</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1300: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1300: statement executed 33 times.">        Entry e = first;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1301</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1302</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1302: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1302: statement executed 33 times.">        <span class="keyword">for</span> (;;) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1303</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1303: statement executed 63 times.">&nbsp;63</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1303: statement executed 63 times.">            <span class="keyword">if</span> (e == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1304</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1305</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1306</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1307</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">//          Entry newEntry = new Entry(hash, key, value, first);</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1308</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1308: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1308: statement executed 33 times.">                Entry newEntry;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1309</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1310</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1310: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1310: statement executed 33 times.">                <span class="keyword">if</span> (memoryCaching) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1311</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1311: statement executed 31 times.">&nbsp;31</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1311: statement executed 31 times.">                    newEntry = <span class="keyword">new</span> Entry(hash, key, value, first);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1312</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1313</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1313: statement executed 2 times.">&nbsp;2</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1313: statement executed 2 times.">                    newEntry = <span class="keyword">new</span> Entry(hash, key, NULL, first);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1314</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1315</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1316</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1316: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1316: statement executed 33 times.">                itemPut(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1317</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1318</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// Persist if required</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1319</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1319: expression evaluated to true 33 times, false 0 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1319: expression evaluated to true 33 times, false 0 times.">                <span class="keyword">if</span> (persist &amp;&amp; !overflowPersistence) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1320</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1320: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1320: statement executed 33 times.">                    persistStore(key, value);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1321</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1322</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1323</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// If we have a CacheEntry, update the group lookups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1324</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1324: expression evaluated to true 33 times, false 0 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1324: expression evaluated to true 33 times, false 0 times.">                <span class="keyword">if</span> (value <span class="keyword">instanceof</span> CacheEntry) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1325</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1325: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1325: statement executed 33 times.">                    updateGroups(<span class="keyword">null</span>, (CacheEntry) value, persist);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1326</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1327</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1328</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">/**        OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1329</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1329: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1329: statement executed 33 times.">                tab[index] = newEntry;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1330</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1331</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1331: expression evaluated to true 0 times, false 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1331: expression evaluated to true 0 times, false 33 times.">                <span class="keyword">if</span> (++count &gt;= threshold) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1332</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1332: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1332: statement not executed.">                    rehash();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1333</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1334</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1334: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1334: statement executed 33 times.">                    recordModification(newEntry);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1335</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1336</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1337</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1337: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1337: statement executed 33 times.">                <span class="keyword">return</span> <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1338</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1338: expression evaluated to true 0 times, false 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1338: expression evaluated to true 0 times, false 30 times.">            } <span class="keyword">else</span> <span class="keyword">if</span> ((key == e.key) || ((e.hash == hash) &amp;&amp; key.equals(e.key))) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1339</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1339: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1339: statement not executed.">                Object oldValue = e.value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1340</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1341</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1342</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1343</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">/* Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1344</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                e.value = value; */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1345</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1345: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1345: statement not executed.">                <span class="keyword">if</span> (memoryCaching) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1346</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1346: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1346: statement not executed.">                    e.value = value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1347</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1348</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1349</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// Persist if required</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1350</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1350: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1350: statement not executed.">                <span class="keyword">if</span> (persist &amp;&amp; overflowPersistence) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1351</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1351: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1351: statement not executed.">                    persistRemove(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1352</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1352: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1352: statement not executed.">                } <span class="keyword">else</span> <span class="keyword">if</span> (persist) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1353</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1353: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1353: statement not executed.">                    persistStore(key, value);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1354</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1355</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1356</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1356: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1356: statement not executed.">                updateGroups(oldValue, value, persist);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1357</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1358</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1358: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1358: statement not executed.">                itemPut(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1359</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1360</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1361</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1361: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1361: statement not executed.">                <span class="keyword">return</span> oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1362</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1363</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1363: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1363: statement executed 30 times.">                e = e.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1364</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1365</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1366</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1367</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1368</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1369</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Continuation of remove(), called only when synch lock is</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1370</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * held and interference has been detected.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1371</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1372</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1373</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1374</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/* Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1375</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">    protected Object sremove(Object key, int hash) { */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1376</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1376: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1376: method not entered.">    <span class="keyword">protected</span> Object sremove(Object key, <span class="keyword">int</span> hash, <span class="keyword">boolean</span> invokeAlgorithm) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1377</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1378</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1378: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1378: statement not executed.">        Entry[] tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1379</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1379: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1379: statement not executed.">        <span class="keyword">int</span> index = hash &amp; (tab.length - 1);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1380</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1380: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1380: statement not executed.">        Entry first = tab[index];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1381</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1381: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1381: statement not executed.">        Entry e = first;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1382</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1383</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1383: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1383: statement not executed.">        <span class="keyword">for</span> (;;) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1384</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1384: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1384: statement not executed.">            <span class="keyword">if</span> (e == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1385</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1385: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1385: statement not executed.">                <span class="keyword">return</span> <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1386</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1386: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1386: statement not executed.">            } <span class="keyword">else</span> <span class="keyword">if</span> ((key == e.key) || ((e.hash == hash) &amp;&amp; key.equals(e.key))) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1387</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1387: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1387: statement not executed.">                Object oldValue = e.value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1388</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1388: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1388: statement not executed.">                <span class="keyword">if</span> (persistenceListener != <span class="keyword">null</span> &amp;&amp; (oldValue == NULL)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1389</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1389: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1389: statement not executed.">                  oldValue = persistRetrieve(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1390</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1391</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1392</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1392: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1392: statement not executed.">                e.value = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1393</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1393: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1393: statement not executed.">                count--;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1394</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1395</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1396</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1396: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1396: statement not executed.">                <span class="keyword">if</span> (!unlimitedDiskCache &amp;&amp; !overflowPersistence) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1397</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1397: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1397: statement not executed.">                    persistRemove(e.key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1398</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// If we have a CacheEntry, update the groups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1399</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1399: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1399: statement not executed.">                    <span class="keyword">if</span> (oldValue <span class="keyword">instanceof</span> CacheEntry) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1400</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1400: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1400: statement not executed.">                      CacheEntry oldEntry = (CacheEntry)oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1401</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1401: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1401: statement not executed.">                      removeGroupMappings(oldEntry.getKey(),</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1402</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                          oldEntry.getGroups(), <span class="keyword">true</span>);</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1403</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1404</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1405</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                  <span class="comment">// only remove from memory groups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1406</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1406: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1406: statement not executed.">                  <span class="keyword">if</span> (oldValue <span class="keyword">instanceof</span> CacheEntry) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1407</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1407: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1407: statement not executed.">                    CacheEntry oldEntry = (CacheEntry)oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1408</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1408: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1408: statement not executed.">                    removeGroupMappings(oldEntry.getKey(),</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1409</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        oldEntry.getGroups(), <span class="keyword">false</span>);</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1410</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                  }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1411</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1412</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1413</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1413: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1413: statement not executed.">                <span class="keyword">if</span> (overflowPersistence &amp;&amp; ((size() + 1) &gt;= maxEntries)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1414</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1414: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1414: statement not executed.">                    persistStore(key, oldValue);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1415</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// add key to persistent groups but NOT to the memory groups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1416</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1416: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1416: statement not executed.">                    <span class="keyword">if</span> (oldValue <span class="keyword">instanceof</span> CacheEntry) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1417</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1417: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1417: statement not executed.">                      CacheEntry oldEntry = (CacheEntry)oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1418</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1418: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1418: statement not executed.">                      addGroupMappings(oldEntry.getKey(), oldEntry.getGroups(), <span class="keyword">true</span>, <span class="keyword">false</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1419</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1420</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1421</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1422</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1422: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1422: statement not executed.">                <span class="keyword">if</span> (invokeAlgorithm) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1423</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1423: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1423: statement not executed.">                    itemRemoved(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1424</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1425</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1426</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1427</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1427: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1427: statement not executed.">                Entry head = e.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1428</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1429</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1429: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1429: statement not executed.">                <span class="keyword">for</span> (Entry p = first; p != e; p = p.next) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1430</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1430: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1430: statement not executed.">                    head = <span class="keyword">new</span> Entry(p.hash, p.key, p.value, head);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1431</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1432</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1433</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1433: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1433: statement not executed.">                tab[index] = head;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1434</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1434: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1434: statement not executed.">                recordModification(head);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1435</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1436</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1436: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1436: statement not executed.">                <span class="keyword">return</span> oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1437</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1438</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1438: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1438: statement not executed.">                e = e.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1439</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1440</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1441</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1442</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1443</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1444</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Save the state of the &lt;tt&gt;AbstractConcurrentReadCache&lt;/tt&gt; instance to a stream.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1445</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * (i.e., serialize it).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1446</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1447</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * @serialData The &lt;i&gt;capacity&lt;/i&gt; of the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1448</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * AbstractConcurrentReadCache (the length of the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1449</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * bucket array) is emitted (int), followed  by the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1450</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * &lt;i&gt;size&lt;/i&gt; of the AbstractConcurrentReadCache (the number of key-value</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1451</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * mappings), followed by the key (Object) and value (Object)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1452</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * for each key-value mapping represented by the AbstractConcurrentReadCache</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1453</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * The key-value mappings are emitted in no particular order.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1454</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1455</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1455: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1455: method not entered.">    <span class="keyword">private</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> writeObject(java.io.ObjectOutputStream s) <span class="keyword">throws</span> IOException {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1456</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Write out the threshold, loadfactor, and any hidden stuff</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1457</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1457: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1457: statement not executed.">        s.defaultWriteObject();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1458</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1459</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Write out number of buckets</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1460</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1460: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1460: statement not executed.">        s.writeInt(table.length);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1461</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1462</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Write out size (number of Mappings)</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1463</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1463: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1463: statement not executed.">        s.writeInt(count);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1464</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1465</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Write out keys and values (alternating)</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1466</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1466: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1466: statement not executed.">        <span class="keyword">for</span> (<span class="keyword">int</span> index = table.length - 1; index &gt;= 0; index--) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1467</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1467: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1467: statement not executed.">            Entry entry = table[index];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1468</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1469</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1469: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1469: statement not executed.">            <span class="keyword">while</span> (entry != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1470</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1470: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1470: statement not executed.">                s.writeObject(entry.key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1471</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1471: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1471: statement not executed.">                s.writeObject(entry.value);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1472</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1472: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1472: statement not executed.">                entry = entry.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1473</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1474</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1475</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1476</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1477</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1478</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Return hash code for Object x.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1479</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Since we are using power-of-two</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1480</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * tables, it is worth the effort to improve hashcode via</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1481</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * the same multiplicative scheme as used in IdentityHashMap.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1482</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1483</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1483: method entered 4704882 times.">&nbsp;4704882</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1483: method entered 4704882 times.">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> hash(Object x) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1484</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1484: statement executed 4706524 times.">&nbsp;4706524</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1484: statement executed 4706524 times.">        <span class="keyword">int</span> h = x.hashCode();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1485</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1486</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Multiply by 127 (quickly, via shifts), and mix in some high</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1487</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// bits to help guard against bunching of codes that are</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1488</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// consecutive or equally spaced.</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1489</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1489: statement executed 4706494 times.">&nbsp;4706494</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1489: statement executed 4706494 times.">        <span class="keyword">return</span> ((h &lt;&lt; 7) - h + (h &gt;&gt;&gt; 9) + (h &gt;&gt;&gt; 17));</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1490</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1491</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1492</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1493</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Add this cache key to the groups specified groups.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1494</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * We have to treat the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1495</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * memory and disk group mappings seperately so they remain valid for their</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1496</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * corresponding memory/disk caches. (eg if mem is limited to 100 entries</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1497</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * and disk is unlimited, the group mappings will be different).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1498</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1499</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> key The cache key that we are ading to the groups.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1500</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> newGroups the set of groups we want to add this cache entry to.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1501</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> persist A flag to indicate whether the keys should be added to</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1502</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * the persistent cache layer.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1503</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> memory A flag to indicate whether the key should be added to</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1504</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * the memory groups (important for overflow-to-disk)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1505</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1506</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1506: method entered 317 times.">&nbsp;317</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1506: method entered 317 times.">    <span class="keyword">private</span> <span class="keyword">void</span> addGroupMappings(String key, Set newGroups, <span class="keyword">boolean</span> persist, <span class="keyword">boolean</span> memory) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1507</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1507: statement executed 317 times.">&nbsp;317</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1507: statement executed 317 times.">        <span class="keyword">if</span> (newGroups == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1508</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1508: statement executed 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1508: statement executed 20 times.">            <span class="keyword">return</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1509</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1510</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        </SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1511</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Add this CacheEntry to the groups that it is now a member of</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1512</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1512: statement executed 297 times.">&nbsp;297</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1512: statement executed 297 times.">        <span class="keyword">for</span> (Iterator it = newGroups.iterator(); it.hasNext();) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1513</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1513: statement executed 282 times.">&nbsp;282</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1513: statement executed 282 times.">            String groupName = (String) it.next();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1514</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1515</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            <span class="comment">// Update the in-memory groups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1516</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1516: statement executed 282 times.">&nbsp;282</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1516: statement executed 282 times.">            <span class="keyword">if</span> (memoryCaching &amp;&amp; memory) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1517</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1517: expression evaluated to true 0 times, false 182 times.">&nbsp;182</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1517: expression evaluated to true 0 times, false 182 times.">                <span class="keyword">if</span> (groups == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1518</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1518: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1518: statement not executed.">                    groups = <span class="keyword">new</span> HashMap();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1519</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1520</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1521</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1521: statement executed 182 times.">&nbsp;182</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1521: statement executed 182 times.">                Set memoryGroup = (Set) groups.get(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1522</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1523</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1523: statement executed 182 times.">&nbsp;182</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1523: statement executed 182 times.">                <span class="keyword">if</span> (memoryGroup == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1524</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1524: statement executed 113 times.">&nbsp;113</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1524: statement executed 113 times.">                    memoryGroup = <span class="keyword">new</span> HashSet();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1525</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1525: statement executed 113 times.">&nbsp;113</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1525: statement executed 113 times.">                    groups.put(groupName, memoryGroup);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1526</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1527</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1528</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1528: statement executed 182 times.">&nbsp;182</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1528: statement executed 182 times.">                memoryGroup.add(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1529</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1530</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1531</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            <span class="comment">// Update the persistent group maps</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1532</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1532: statement executed 282 times.">&nbsp;282</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1532: statement executed 282 times.">            <span class="keyword">if</span> (persist) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1533</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1533: statement executed 236 times.">&nbsp;236</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1533: statement executed 236 times.">                Set persistentGroup = persistRetrieveGroup(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1534</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1535</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1535: statement executed 236 times.">&nbsp;236</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1535: statement executed 236 times.">                <span class="keyword">if</span> (persistentGroup == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1536</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1536: statement executed 112 times.">&nbsp;112</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1536: statement executed 112 times.">                    persistentGroup = <span class="keyword">new</span> HashSet();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1537</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1538</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1539</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1539: statement executed 236 times.">&nbsp;236</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1539: statement executed 236 times.">                persistentGroup.add(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1540</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1540: statement executed 236 times.">&nbsp;236</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1540: statement executed 236 times.">                persistStoreGroup(groupName, persistentGroup);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1541</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1542</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1543</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1544</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1545</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/** OpenSymphony END (pretty long!) */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1546</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1547</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Returns the appropriate capacity (power of two) for the specified</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1548</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * initial capacity argument.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1549</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1550</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1550: method entered 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1550: method entered 265 times.">    <span class="keyword">private</span> <span class="keyword">int</span> p2capacity(<span class="keyword">int</span> initialCapacity) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1551</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1551: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1551: statement executed 265 times.">        <span class="keyword">int</span> cap = initialCapacity;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1552</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1553</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Compute the appropriate capacity</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1554</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1554: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1554: statement executed 265 times.">        <span class="keyword">int</span> result;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1555</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1556</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1556: expression evaluated to true 0 times, false 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1556: expression evaluated to true 0 times, false 265 times.">        <span class="keyword">if</span> ((cap &gt; MAXIMUM_CAPACITY) || (cap &lt; 0)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1557</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1557: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1557: statement not executed.">            result = MAXIMUM_CAPACITY;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1558</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1559</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1559: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1559: statement executed 265 times.">            result = MINIMUM_CAPACITY;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1560</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1561</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1561: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1561: statement executed 265 times.">            <span class="keyword">while</span> (result &lt; cap) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1562</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1562: statement executed 795 times.">&nbsp;795</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1562: statement executed 795 times.">                result &lt;&lt;= 1;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1563</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1564</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1565</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1566</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1566: statement executed 265 times.">&nbsp;265</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1566: statement executed 265 times.">        <span class="keyword">return</span> result;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1567</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1568</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1569</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/* Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1570</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">    public Object put(Object key, Object value)*/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1571</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1571: method entered 66097 times.">&nbsp;66097</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1571: method entered 66097 times.">    <span class="keyword">private</span> Object put(Object key, Object value, <span class="keyword">boolean</span> persist) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1572</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1573</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1573: statement executed 66097 times.">&nbsp;66097</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1573: statement executed 66097 times.">        <span class="keyword">if</span> (value == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1574</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1574: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1574: statement executed 30 times.">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1575</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1576</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1577</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1577: statement executed 66067 times.">&nbsp;66067</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1577: statement executed 66067 times.">        <span class="keyword">int</span> hash = hash(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1578</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1578: statement executed 66067 times.">&nbsp;66067</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1578: statement executed 66067 times.">        Entry[] tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1579</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1579: statement executed 66067 times.">&nbsp;66067</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1579: statement executed 66067 times.">        <span class="keyword">int</span> index = hash &amp; (tab.length - 1);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1580</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1580: statement executed 66067 times.">&nbsp;66067</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1580: statement executed 66067 times.">        Entry first = tab[index];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1581</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1581: statement executed 66067 times.">&nbsp;66067</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1581: statement executed 66067 times.">        Entry e = first;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1582</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1583</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1583: statement executed 66067 times.">&nbsp;66067</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1583: statement executed 66067 times.">        <span class="keyword">for</span> (;;) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1584</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1584: statement executed 96367 times.">&nbsp;96367</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1584: statement executed 96367 times.">            <span class="keyword">if</span> (e == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1585</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1585: statement executed 60908 times.">&nbsp;60908</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1585: statement executed 60908 times.">                <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1586</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1586: statement executed 60908 times.">&nbsp;60908</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1586: statement executed 60908 times.">                    tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1587</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1588</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1589</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1590</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1591</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1592</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/*                                        if (first == tab[index]) {</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1593</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                                                                    //  Add to front of list</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1594</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                                                                    Entry newEntry = new Entry(hash, key, value, first);</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1595</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                                                                    tab[index] = newEntry;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1596</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                                                                    if (++count &gt;= threshold) rehash();</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1597</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                                                                    else recordModification(newEntry);</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1598</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                                                                    return null; */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1599</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1600</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1600: statement executed 60908 times.">&nbsp;60908</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1600: statement executed 60908 times.">                    Object oldValue = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1601</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1602</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// Remove an item if the cache is full</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1603</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1603: statement executed 60908 times.">&nbsp;60908</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1603: statement executed 60908 times.">                    <span class="keyword">if</span> (size() &gt;= maxEntries) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1604</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// part of fix CACHE-255: method should return old value</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1605</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1605: statement executed 9090 times.">&nbsp;9090</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1605: statement executed 9090 times.">                        oldValue = remove(removeItem(), <span class="keyword">false</span>, <span class="keyword">false</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1606</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1607</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1608</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1608: statement executed 60908 times.">&nbsp;60908</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1608: statement executed 60908 times.">                    <span class="keyword">if</span> (first == tab[index]) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1609</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">//  Add to front of list</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1610</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1610: statement executed 60875 times.">&nbsp;60875</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1610: statement executed 60875 times.">                        Entry newEntry = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1611</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1612</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1612: statement executed 60875 times.">&nbsp;60875</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1612: statement executed 60875 times.">                        <span class="keyword">if</span> (memoryCaching) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1613</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1613: statement executed 60739 times.">&nbsp;60739</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1613: statement executed 60739 times.">                            newEntry = <span class="keyword">new</span> Entry(hash, key, value, first);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1614</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1615</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1615: statement executed 136 times.">&nbsp;136</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1615: statement executed 136 times.">                            newEntry = <span class="keyword">new</span> Entry(hash, key, NULL, first);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1616</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1617</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1618</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1618: statement executed 60875 times.">&nbsp;60875</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1618: statement executed 60875 times.">                        tab[index] = newEntry;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1619</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1619: statement executed 60875 times.">&nbsp;60875</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1619: statement executed 60875 times.">                        itemPut(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1620</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1621</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// Persist if required</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1622</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1622: statement executed 60875 times.">&nbsp;60875</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1622: statement executed 60875 times.">                        <span class="keyword">if</span> (persist &amp;&amp; !overflowPersistence) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1623</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1623: statement executed 60458 times.">&nbsp;60458</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1623: statement executed 60458 times.">                            persistStore(key, value);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1624</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1625</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1626</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// If we have a CacheEntry, update the group lookups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1627</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1627: statement executed 60875 times.">&nbsp;60875</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1627: statement executed 60875 times.">                        <span class="keyword">if</span> (value <span class="keyword">instanceof</span> CacheEntry) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1628</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1628: statement executed 60475 times.">&nbsp;60475</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1628: statement executed 60475 times.">                            updateGroups(<span class="keyword">null</span>, (CacheEntry) value, persist);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1629</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1630</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1631</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1631: statement executed 60875 times.">&nbsp;60875</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1631: statement executed 60875 times.">                        <span class="keyword">if</span> (++count &gt;= threshold) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1632</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1632: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1632: statement executed 80 times.">                            rehash();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1633</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1634</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1634: statement executed 60795 times.">&nbsp;60795</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1634: statement executed 60795 times.">                            recordModification(newEntry);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1635</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1636</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        </SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1637</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1637: statement executed 60875 times.">&nbsp;60875</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1637: statement executed 60875 times.">                        <span class="keyword">return</span> oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1638</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1639</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/** OpenSymphony END  */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1640</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1641</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// wrong list -- retry</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1642</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1643</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1644</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1645</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/* Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1646</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                        return sput(key, value, hash);*/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1647</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1647: statement executed 33 times.">&nbsp;33</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1647: statement executed 33 times.">                        <span class="keyword">return</span> sput(key, value, hash, persist);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1648</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1649</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1650</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1651</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1652</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1652: statement executed 35459 times.">&nbsp;35459</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1652: statement executed 35459 times.">            } <span class="keyword">else</span> <span class="keyword">if</span> ((key == e.key) || ((e.hash == hash) &amp;&amp; key.equals(e.key))) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1653</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// synch to avoid race with remove and to</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1654</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                <span class="comment">// ensure proper serialization of multiple replaces</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1655</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1655: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1655: statement executed 5159 times.">                <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1656</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1656: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1656: statement executed 5159 times.">                    tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1657</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1658</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1658: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1658: statement executed 5159 times.">                    Object oldValue = e.value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1659</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1660</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// [CACHE-118] - get the old cache entry even if there's no memory cache</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1661</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1661: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1661: statement executed 5159 times.">                    <span class="keyword">if</span> (persist &amp;&amp; (oldValue == NULL)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1662</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1662: statement executed 68 times.">&nbsp;68</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1662: statement executed 68 times.">                        oldValue = persistRetrieve(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1663</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1664</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1665</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1665: expression evaluated to true 5159 times, false 0 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1665: expression evaluated to true 5159 times, false 0 times.">                    <span class="keyword">if</span> ((first == tab[index]) &amp;&amp; (oldValue != <span class="keyword">null</span>)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1666</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1667</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1668</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/* Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1669</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                        e.value = value;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1670</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                        return oldValue; */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1671</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1671: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1671: statement executed 5159 times.">                        <span class="keyword">if</span> (memoryCaching) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1672</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1672: statement executed 5091 times.">&nbsp;5091</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1672: statement executed 5091 times.">                            e.value = value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1673</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1674</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1675</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// Persist if required</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1676</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1676: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1676: statement executed 5159 times.">                        <span class="keyword">if</span> (persist &amp;&amp; overflowPersistence) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1677</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1677: statement executed 22 times.">&nbsp;22</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1677: statement executed 22 times.">                            persistRemove(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1678</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1678: expression evaluated to true 5137 times, false 0 times.">&nbsp;5137</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1678: expression evaluated to true 5137 times, false 0 times.">                        } <span class="keyword">else</span> <span class="keyword">if</span> (persist) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1679</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1679: statement executed 5137 times.">&nbsp;5137</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1679: statement executed 5137 times.">                            persistStore(key, value);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1680</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1681</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1682</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1682: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1682: statement executed 5159 times.">                        updateGroups(oldValue, value, persist);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1683</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1683: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1683: statement executed 5159 times.">                        itemPut(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1684</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1685</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1685: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1685: statement executed 5159 times.">                        <span class="keyword">return</span> oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1686</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1687</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/**        OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1688</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1689</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// retry if wrong list or lost race against concurrent remove</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1690</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1691</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1692</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1693</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/* Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1694</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                        return sput(key, value, hash);*/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1695</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1695: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1695: statement not executed.">                        <span class="keyword">return</span> sput(key, value, hash, persist);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1696</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1697</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1698</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1699</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1700</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1701</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1701: statement executed 30300 times.">&nbsp;30300</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1701: statement executed 30300 times.">                e = e.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1702</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1703</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1704</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1705</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1706</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1706: method entered 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1706: method entered 9180 times.">    <span class="keyword">private</span> <span class="keyword">synchronized</span> Object remove(Object key, <span class="keyword">boolean</span> invokeAlgorithm, <span class="keyword">boolean</span> forcePersist)</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1707</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/* Previous code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1708</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">    public Object remove(Object key) */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1709</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1710</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/** OpenSymphony END */</span>  {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1711</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/*</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1712</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">          Strategy:</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1713</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment"></span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1714</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">          Find the entry, then</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1715</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">            1. Set value field to null, to force get() to retry</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1716</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">            2. Rebuild the list without this entry.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1717</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">               All entries following removed node can stay in list, but</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1718</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">               all preceeding ones need to be cloned.  Traversals rely</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1719</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">               on this strategy to ensure that elements will not be</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1720</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">              repeated during iteration.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1721</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1722</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1723</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1724</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1724: expression evaluated to true 0 times, false 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1724: expression evaluated to true 0 times, false 9180 times.">        <span class="keyword">if</span> (key == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1725</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1725: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1725: statement not executed.">            <span class="keyword">return</span> <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1726</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1727</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1728</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1729</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1729: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1729: statement executed 9180 times.">        <span class="keyword">int</span> hash = hash(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1730</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1730: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1730: statement executed 9180 times.">        Entry[] tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1731</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1731: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1731: statement executed 9180 times.">        <span class="keyword">int</span> index = hash &amp; (tab.length - 1);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1732</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1732: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1732: statement executed 9180 times.">        Entry first = tab[index];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1733</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1733: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1733: statement executed 9180 times.">        Entry e = first;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1734</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1735</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1735: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1735: statement executed 9180 times.">        <span class="keyword">for</span> (;;) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1736</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1736: expression evaluated to true 0 times, false 12370 times.">&nbsp;12370</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1736: expression evaluated to true 0 times, false 12370 times.">            <span class="keyword">if</span> (e == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1737</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1737: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1737: statement not executed.">                tab = getTableForReading();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1738</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1739</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1739: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1739: statement not executed.">                <span class="keyword">if</span> (first == tab[index]) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1740</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1740: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1740: statement not executed.">                    <span class="keyword">return</span> <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1741</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1742</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// Wrong list -- must restart traversal at new first</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1743</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1744</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1745</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1746</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/* Previous Code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1747</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                    return sremove(key, hash); */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1748</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1748: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1748: statement not executed.">                    <span class="keyword">return</span> sremove(key, hash, invokeAlgorithm);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1749</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1750</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1751</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1752</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1752: statement executed 12370 times.">&nbsp;12370</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1752: statement executed 12370 times.">            } <span class="keyword">else</span> <span class="keyword">if</span> ((key == e.key) || ((e.hash == hash) &amp;&amp; key.equals(e.key))) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1753</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1753: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1753: statement executed 9180 times.">                <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1754</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1754: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1754: statement executed 9180 times.">                    tab = table;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1755</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1756</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1756: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1756: statement executed 9180 times.">                    Object oldValue = e.value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1757</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1757: expression evaluated to true 0 times, false 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1757: expression evaluated to true 0 times, false 9180 times.">                    <span class="keyword">if</span> (persistenceListener != <span class="keyword">null</span> &amp;&amp; (oldValue == NULL)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1758</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1758: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1758: statement not executed.">                      oldValue = persistRetrieve(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1759</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1760</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1761</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// re-find under synch if wrong list</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1762</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1762: expression evaluated to true 0 times, false 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1762: expression evaluated to true 0 times, false 9180 times.">                    <span class="keyword">if</span> ((first != tab[index]) || (oldValue == <span class="keyword">null</span>)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1763</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1764</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1765</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">/* Previous Code</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1766</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">                        return sremove(key, hash); */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1767</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1767: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1767: statement not executed.">                        <span class="keyword">return</span> sremove(key, hash, invokeAlgorithm);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1768</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1769</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1770</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1771</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1771: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1771: statement executed 9180 times.">                    e.value = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1772</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1772: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1772: statement executed 9180 times.">                    count--;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1773</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1774</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/** OpenSymphony BEGIN */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1775</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1775: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1775: statement executed 9180 times.">                    <span class="keyword">if</span> (forcePersist || (!unlimitedDiskCache &amp;&amp; !overflowPersistence)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1776</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1776: statement executed 9050 times.">&nbsp;9050</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1776: statement executed 9050 times.">                        persistRemove(e.key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1777</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// If we have a CacheEntry, update the group lookups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1778</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1778: statement executed 9050 times.">&nbsp;9050</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1778: statement executed 9050 times.">                        <span class="keyword">if</span> (oldValue <span class="keyword">instanceof</span> CacheEntry) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1779</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1779: statement executed 9020 times.">&nbsp;9020</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1779: statement executed 9020 times.">                          CacheEntry oldEntry = (CacheEntry) oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1780</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1780: statement executed 9020 times.">&nbsp;9020</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1780: statement executed 9020 times.">                            removeGroupMappings(oldEntry.getKey(),</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1781</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                                oldEntry.getGroups(), <span class="keyword">true</span>);</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1782</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1783</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1784</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// only remove from memory groups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1785</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1785: statement executed 130 times.">&nbsp;130</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1785: statement executed 130 times.">                        <span class="keyword">if</span> (oldValue <span class="keyword">instanceof</span> CacheEntry) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1786</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1786: statement executed 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1786: statement executed 60 times.">                            CacheEntry oldEntry = (CacheEntry) oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1787</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1787: statement executed 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1787: statement executed 60 times.">                            removeGroupMappings(oldEntry.getKey(), oldEntry</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1788</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                                    .getGroups(), <span class="keyword">false</span>);</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1789</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1790</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1791</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1792</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1792: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1792: statement executed 9180 times.">                    <span class="keyword">if</span> (!forcePersist &amp;&amp; overflowPersistence &amp;&amp; ((size() + 1) &gt;= maxEntries)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1793</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1793: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1793: statement executed 80 times.">                        persistStore(key, oldValue);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1794</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        <span class="comment">// add key to persistent groups but NOT to the memory groups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1795</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1795: statement executed 80 times.">&nbsp;80</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1795: statement executed 80 times.">                        <span class="keyword">if</span> (oldValue <span class="keyword">instanceof</span> CacheEntry) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1796</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1796: statement executed 40 times.">&nbsp;40</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1796: statement executed 40 times.">                            CacheEntry oldEntry = (CacheEntry) oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1797</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1797: statement executed 40 times.">&nbsp;40</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1797: statement executed 40 times.">                            addGroupMappings(oldEntry.getKey(), oldEntry.getGroups(), <span class="keyword">true</span>, <span class="keyword">false</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1798</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1799</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1800</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1801</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1801: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1801: statement executed 9180 times.">                    <span class="keyword">if</span> (invokeAlgorithm) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1802</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1802: statement executed 70 times.">&nbsp;70</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1802: statement executed 70 times.">                        itemRemoved(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1803</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1804</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1805</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// introduced to fix bug CACHE-255 </span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1806</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1806: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1806: statement executed 9180 times.">                    <span class="keyword">if</span> (oldValue <span class="keyword">instanceof</span> CacheEntry) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1807</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1807: statement executed 9080 times.">&nbsp;9080</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1807: statement executed 9080 times.">                        CacheEntry oldEntry = (CacheEntry) oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1808</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1808: statement executed 9080 times.">&nbsp;9080</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1808: statement executed 9080 times.">                        oldValue = oldEntry.getContent();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1809</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1810</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1811</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">/** OpenSymphony END */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1812</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1812: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1812: statement executed 9180 times.">                    Entry head = e.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1813</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1814</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1814: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1814: statement executed 9180 times.">                    <span class="keyword">for</span> (Entry p = first; p != e; p = p.next) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1815</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1815: statement executed 3190 times.">&nbsp;3190</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1815: statement executed 3190 times.">                        head = <span class="keyword">new</span> Entry(p.hash, p.key, p.value, head);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1816</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1817</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1818</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1818: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1818: statement executed 9180 times.">                    tab[index] = head;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1819</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1819: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1819: statement executed 9180 times.">                    recordModification(head);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1820</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1821</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1821: statement executed 9180 times.">&nbsp;9180</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1821: statement executed 9180 times.">                    <span class="keyword">return</span> oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1822</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1823</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1824</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1824: statement executed 3190 times.">&nbsp;3190</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1824: statement executed 3190 times.">                e = e.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1825</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1826</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1827</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1828</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1829</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1830</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Remove this CacheEntry from the groups it no longer belongs to.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1831</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * We have to treat the memory and disk group mappings separately so they remain</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1832</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * valid for their corresponding memory/disk caches. (eg if mem is limited</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1833</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * to 100 entries and disk is unlimited, the group mappings will be</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1834</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * different).</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1835</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1836</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> key The cache key that we are removing from the groups.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1837</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> oldGroups the set of groups we want to remove the cache entry</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1838</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * from.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1839</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> persist A flag to indicate whether the keys should be removed</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1840</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * from the persistent cache layer.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1841</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1842</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1842: method entered 9184 times.">&nbsp;9184</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1842: method entered 9184 times.">    <span class="keyword">private</span> <span class="keyword">void</span> removeGroupMappings(String key, Set oldGroups, <span class="keyword">boolean</span> persist) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1843</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1843: statement executed 9184 times.">&nbsp;9184</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1843: statement executed 9184 times.">        <span class="keyword">if</span> (oldGroups == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1844</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1844: statement executed 9020 times.">&nbsp;9020</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1844: statement executed 9020 times.">          <span class="keyword">return</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1845</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1846</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1847</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1847: statement executed 164 times.">&nbsp;164</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1847: statement executed 164 times.">        <span class="keyword">for</span> (Iterator it = oldGroups.iterator(); it.hasNext();) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1848</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1848: statement executed 90 times.">&nbsp;90</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1848: statement executed 90 times.">            String groupName = (String) it.next();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1849</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1850</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            <span class="comment">// Update the in-memory groups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1851</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1851: statement executed 90 times.">&nbsp;90</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1851: statement executed 90 times.">            <span class="keyword">if</span> (memoryCaching &amp;&amp; (<span class="keyword">this</span>.groups != <span class="keyword">null</span>)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1852</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1852: statement executed 78 times.">&nbsp;78</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1852: statement executed 78 times.">                Set memoryGroup = (Set) groups.get(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1853</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1854</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1854: expression evaluated to true 78 times, false 0 times.">&nbsp;78</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1854: expression evaluated to true 78 times, false 0 times.">                <span class="keyword">if</span> (memoryGroup != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1855</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1855: statement executed 78 times.">&nbsp;78</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1855: statement executed 78 times.">                    memoryGroup.remove(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1856</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1857</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1857: statement executed 78 times.">&nbsp;78</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1857: statement executed 78 times.">                    <span class="keyword">if</span> (memoryGroup.isEmpty()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1858</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1858: statement executed 60 times.">&nbsp;60</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1858: statement executed 60 times.">                        groups.remove(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1859</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1860</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1861</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1862</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1863</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            <span class="comment">// Update the persistent group maps</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1864</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1864: statement executed 90 times.">&nbsp;90</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1864: statement executed 90 times.">            <span class="keyword">if</span> (persist) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1865</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1865: statement executed 50 times.">&nbsp;50</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1865: statement executed 50 times.">                Set persistentGroup = persistRetrieveGroup(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1866</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1867</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1867: statement executed 50 times.">&nbsp;50</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1867: statement executed 50 times.">                <span class="keyword">if</span> (persistentGroup != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1868</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1868: statement executed 44 times.">&nbsp;44</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1868: statement executed 44 times.">                    persistentGroup.remove(key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1869</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1870</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1870: statement executed 44 times.">&nbsp;44</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1870: statement executed 44 times.">                    <span class="keyword">if</span> (persistentGroup.isEmpty()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1871</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1871: statement executed 20 times.">&nbsp;20</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1871: statement executed 20 times.">                        persistRemoveGroup(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1872</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1873</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1873: statement executed 24 times.">&nbsp;24</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1873: statement executed 24 times.">                        persistStoreGroup(groupName, persistentGroup);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1874</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1875</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1876</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1877</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1878</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1879</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1880</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1881</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Updates the groups to reflect the differences between the old and new</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1882</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * cache entries. Either of the old or new values can be &lt;code&gt;null&lt;/code&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1883</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * or contain a &lt;code&gt;null&lt;/code&gt; group list, in which case the entry's</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1884</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * groups will all be added or removed respectively.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1885</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1886</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> oldValue The old CacheEntry that is being replaced.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1887</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> newValue The new CacheEntry that is being inserted.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1888</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1889</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1889: method entered 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1889: method entered 5159 times.">    <span class="keyword">private</span> <span class="keyword">void</span> updateGroups(Object oldValue, Object newValue, <span class="keyword">boolean</span> persist) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1890</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// If we have/had a CacheEntry, update the group lookups</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1891</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1891: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1891: statement executed 5159 times.">        <span class="keyword">boolean</span> oldIsCE = oldValue <span class="keyword">instanceof</span> CacheEntry;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1892</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1892: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1892: statement executed 5159 times.">        <span class="keyword">boolean</span> newIsCE = newValue <span class="keyword">instanceof</span> CacheEntry;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1893</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1894</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1894: expression evaluated to true 5159 times, false 0 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1894: expression evaluated to true 5159 times, false 0 times.">        <span class="keyword">if</span> (newIsCE &amp;&amp; oldIsCE) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1895</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1895: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1895: statement executed 5159 times.">            updateGroups((CacheEntry) oldValue, (CacheEntry) newValue, persist);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1896</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1896: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1896: statement not executed.">        } <span class="keyword">else</span> <span class="keyword">if</span> (newIsCE) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1897</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1897: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1897: statement not executed.">            updateGroups(<span class="keyword">null</span>, (CacheEntry) newValue, persist);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1898</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1898: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1898: statement not executed.">        } <span class="keyword">else</span> <span class="keyword">if</span> (oldIsCE) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1899</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1899: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1899: statement not executed.">            updateGroups((CacheEntry) oldValue, <span class="keyword">null</span>, persist);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1900</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1901</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1902</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1903</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1904</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Updates the groups to reflect the differences between the old and new cache entries.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1905</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * Either of the old or new values can be &lt;code&gt;null&lt;/code&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1906</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * or contain a &lt;code&gt;null&lt;/code&gt; group list, in which case the entry's</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1907</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * groups will all be added or removed respectively.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1908</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1909</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> oldValue The old CacheEntry that is being replaced.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1910</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * <span class="javadoc">@param</span> newValue The new CacheEntry that is being inserted.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1911</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1912</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1912: method entered 65667 times.">&nbsp;65667</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1912: method entered 65667 times.">    <span class="keyword">private</span> <span class="keyword">void</span> updateGroups(CacheEntry oldValue, CacheEntry newValue, <span class="keyword">boolean</span> persist) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1913</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1913: statement executed 65667 times.">&nbsp;65667</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1913: statement executed 65667 times.">        Set oldGroups = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1914</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1914: statement executed 65667 times.">&nbsp;65667</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1914: statement executed 65667 times.">        Set newGroups = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1915</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1916</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1916: statement executed 65667 times.">&nbsp;65667</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1916: statement executed 65667 times.">        <span class="keyword">if</span> (oldValue != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1917</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1917: statement executed 5159 times.">&nbsp;5159</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1917: statement executed 5159 times.">            oldGroups = oldValue.getGroups();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1918</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1919</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1920</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1920: expression evaluated to true 65667 times, false 0 times.">&nbsp;65667</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1920: expression evaluated to true 65667 times, false 0 times.">        <span class="keyword">if</span> (newValue != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1921</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1921: statement executed 65667 times.">&nbsp;65667</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1921: statement executed 65667 times.">            newGroups = newValue.getGroups();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1922</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1923</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1924</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Get the names of the groups to remove</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1925</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1925: statement executed 65667 times.">&nbsp;65667</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1925: statement executed 65667 times.">        <span class="keyword">if</span> (oldGroups != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1926</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1926: statement executed 104 times.">&nbsp;104</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1926: statement executed 104 times.">            Set removeFromGroups = <span class="keyword">new</span> HashSet();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1927</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1928</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1928: statement executed 104 times.">&nbsp;104</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1928: statement executed 104 times.">            <span class="keyword">for</span> (Iterator it = oldGroups.iterator(); it.hasNext();) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1929</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1929: statement executed 173 times.">&nbsp;173</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1929: statement executed 173 times.">                String groupName = (String) it.next();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1930</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1931</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1931: statement executed 173 times.">&nbsp;173</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1931: statement executed 173 times.">                <span class="keyword">if</span> ((newGroups == <span class="keyword">null</span>) || !newGroups.contains(groupName)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1932</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// We need to remove this group</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1933</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1933: statement executed 30 times.">&nbsp;30</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1933: statement executed 30 times.">                    removeFromGroups.add(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1934</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1935</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1936</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1937</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1937: statement executed 104 times.">&nbsp;104</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1937: statement executed 104 times.">            removeGroupMappings(oldValue.getKey(), removeFromGroups, persist);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1938</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1939</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1940</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Get the names of the groups to add</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1941</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1941: statement executed 65667 times.">&nbsp;65667</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1941: statement executed 65667 times.">        <span class="keyword">if</span> (newGroups != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1942</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1942: statement executed 277 times.">&nbsp;277</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1942: statement executed 277 times.">            Set addToGroups = <span class="keyword">new</span> HashSet();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1943</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1944</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1944: statement executed 277 times.">&nbsp;277</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1944: statement executed 277 times.">            <span class="keyword">for</span> (Iterator it = newGroups.iterator(); it.hasNext();) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1945</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1945: statement executed 405 times.">&nbsp;405</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1945: statement executed 405 times.">                String groupName = (String) it.next();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1946</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1947</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1947: statement executed 405 times.">&nbsp;405</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1947: statement executed 405 times.">                <span class="keyword">if</span> ((oldGroups == <span class="keyword">null</span>) || !oldGroups.contains(groupName)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1948</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    <span class="comment">// We need to add this group</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1949</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1949: statement executed 262 times.">&nbsp;262</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1949: statement executed 262 times.">                    addToGroups.add(groupName);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1950</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1951</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1952</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1953</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1953: statement executed 277 times.">&nbsp;277</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1953: statement executed 277 times.">            addGroupMappings(newValue.getKey(), addToGroups, persist, <span class="keyword">true</span>);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1954</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1955</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1956</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1957</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1958</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     * AbstractConcurrentReadCache collision list entry.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1959</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">     */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
<A name="Entry">&nbsp;1960</A></TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">class</span> Entry <span class="keyword">implements</span> Map.Entry {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1961</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="keyword">protected</span> final Entry next;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1962</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="keyword">protected</span> final Object key;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1963</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1964</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/*</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1965</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">           The use of volatile for value field ensures that</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1966</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">           we can detect status changes without synchronization.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1967</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">           The other fields are never changed, and are</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1968</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">           marked as final.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1969</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">        */</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1970</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="keyword">protected</span> final <span class="keyword">int</span> hash;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1971</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="keyword">protected</span> <span class="keyword">volatile</span> Object value;</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1972</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1973</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1973: method entered 78168 times.">&nbsp;78168</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1973: method entered 78168 times.">        Entry(<span class="keyword">int</span> hash, Object key, Object value, Entry next) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1974</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1974: statement executed 78168 times.">&nbsp;78168</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1974: statement executed 78168 times.">            <span class="keyword">this</span>.hash = hash;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1975</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1975: statement executed 78168 times.">&nbsp;78168</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1975: statement executed 78168 times.">            <span class="keyword">this</span>.key = key;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1976</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1976: statement executed 78168 times.">&nbsp;78168</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1976: statement executed 78168 times.">            <span class="keyword">this</span>.next = next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1977</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 1977: statement executed 78168 times.">&nbsp;78168</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 1977: statement executed 78168 times.">            <span class="keyword">this</span>.value = value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1978</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1979</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1980</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">// Map.Entry Ops</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1981</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1981: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1981: method not entered.">        <span class="keyword">public</span> Object getKey() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;1982</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 1982: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 1982: statement not executed.">            <span class="keyword">return</span> key;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1983</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1984</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1985</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1986</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * Set the value of this entry.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1987</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * Note: In an entrySet or</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1988</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * entrySet.iterator), unless the set or iterator is used under</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1989</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * synchronization of the table as a whole (or you can otherwise</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1990</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * guarantee lack of concurrent modification), &lt;tt&gt;setValue&lt;/tt&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1991</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * is not strictly guaranteed to actually replace the value field</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1992</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * obtained via the &lt;tt&gt;get&lt;/tt&gt; operation of the underlying hash</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1993</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * table in multithreaded applications.  If iterator-wide</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1994</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * synchronization is not used, and any other concurrent</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1995</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * &lt;tt&gt;put&lt;/tt&gt; or &lt;tt&gt;remove&lt;/tt&gt; operations occur, sometimes</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1996</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * even to &lt;em&gt;other&lt;/em&gt; entries, then this change is not</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1997</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * guaranteed to be reflected in the hash table. (It might, or it</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1998</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * might not. There are no assurances either way.)</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;1999</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2000</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * <span class="javadoc">@param</span>      value   the new value.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2001</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * <span class="javadoc">@return</span>     the previous value, or null if entry has been detectably</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2002</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * removed.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2003</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * <span class="javadoc">@exception</span>  NullPointerException  if the value is &lt;code&gt;null&lt;/code&gt;.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2004</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2005</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2006</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2006: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2006: method not entered.">        <span class="keyword">public</span> Object setValue(Object value) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2007</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2007: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2007: statement not executed.">            <span class="keyword">if</span> (value == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2008</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2008: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2008: statement not executed.">                <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2009</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2010</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2011</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2011: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2011: statement not executed.">            Object oldValue = <span class="keyword">this</span>.value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2012</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2012: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2012: statement not executed.">            <span class="keyword">this</span>.value = value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2013</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2014</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2014: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2014: statement not executed.">            <span class="keyword">return</span> oldValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2015</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2016</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2017</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="comment">/**</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2018</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * Get the value.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2019</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * Note: In an entrySet or entrySet.iterator,</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2020</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * unless the set or iterator is used under synchronization of the</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2021</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * table as a whole (or you can otherwise guarantee lack of</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2022</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * concurrent modification), &lt;tt&gt;getValue&lt;/tt&gt; &lt;em&gt;might&lt;/em&gt;</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2023</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * return null, reflecting the fact that the entry has been</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2024</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * concurrently removed. However, there are no assurances that</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2025</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * concurrent removals will be reflected using this method.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2026</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         *</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2027</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * <span class="javadoc">@return</span>     the current value, or null if the entry has been</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2028</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         * detectably removed.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2029</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">         **/</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2030</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2030: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2030: method not entered.">        <span class="keyword">public</span> Object getValue() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2031</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2031: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2031: statement not executed.">            <span class="keyword">return</span> value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2032</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2033</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2034</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2034: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2034: method not entered.">        <span class="keyword">public</span> <span class="keyword">boolean</span> equals(Object o) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2035</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2035: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2035: statement not executed.">            <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Map.Entry)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2036</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2036: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2036: statement not executed.">                <span class="keyword">return</span> <span class="keyword">false</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2037</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2038</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2039</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2039: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2039: statement not executed.">            Map.Entry e = (Map.Entry) o;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2040</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2041</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2041: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2041: statement not executed.">            <span class="keyword">if</span> (!key.equals(e.getKey())) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2042</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2042: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2042: statement not executed.">                <span class="keyword">return</span> <span class="keyword">false</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2043</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2044</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2045</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2045: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2045: statement not executed.">            Object v = value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2046</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2047</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2047: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2047: statement not executed.">            <span class="keyword">return</span> (v == <span class="keyword">null</span>) ? (e.getValue() == <span class="keyword">null</span>) : v.equals(e.getValue());</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2048</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2049</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2050</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2050: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2050: method not entered.">        <span class="keyword">public</span> <span class="keyword">int</span> hashCode() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2051</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2051: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2051: statement not executed.">            Object v = value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2052</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2053</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2053: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2053: statement not executed.">            <span class="keyword">return</span> hash ^ ((v == <span class="keyword">null</span>) ? 0 : v.hashCode());</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2054</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2055</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2056</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2056: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2056: method not entered.">        <span class="keyword">public</span> String toString() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2057</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2057: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2057: statement not executed.">            <span class="keyword">return</span> key + <span class="string">"="</span> + value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2058</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2059</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2060</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2060: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2060: method not entered.">        <span class="keyword">protected</span> Object clone() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2061</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2061: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2061: statement not executed.">            <span class="keyword">return</span> <span class="keyword">new</span> Entry(hash, key, value, ((next == <span class="keyword">null</span>) ? <span class="keyword">null</span> : (Entry) next.clone()));</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2062</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2063</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2064</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
<A name="HashIterator">&nbsp;2065</A></TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">class</span> HashIterator <span class="keyword">implements</span> Iterator, Enumeration {</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2066</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="keyword">protected</span> final Entry[] tab; <span class="comment">// snapshot of table</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2067</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="keyword">protected</span> Entry entry = <span class="keyword">null</span>; <span class="comment">// current node of slot</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2068</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="keyword">protected</span> Entry lastReturned = <span class="keyword">null</span>; <span class="comment">// last node returned by next</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2069</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="keyword">protected</span> Object currentKey; <span class="comment">// key for current node</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2070</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="keyword">protected</span> Object currentValue; <span class="comment">// value for current node</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2071</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        <span class="keyword">protected</span> <span class="keyword">int</span> index; <span class="comment">// current slot</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2072</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2073</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2073: method entered 90 times.">&nbsp;90</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2073: method entered 90 times.">        <span class="keyword">protected</span> HashIterator() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2074</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2074: statement executed 90 times.">&nbsp;90</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2074: statement executed 90 times.">            tab = AbstractConcurrentReadCache.<span class="keyword">this</span>.getTableForReading();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2075</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2075: statement executed 90 times.">&nbsp;90</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2075: statement executed 90 times.">            index = tab.length - 1;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2076</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2077</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2078</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2078: method entered 100 times.">&nbsp;100</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2078: method entered 100 times.">        <span class="keyword">public</span> <span class="keyword">boolean</span> hasMoreElements() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2079</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2079: statement executed 100 times.">&nbsp;100</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2079: statement executed 100 times.">            <span class="keyword">return</span> hasNext();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2080</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2081</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2082</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2082: method entered 250 times.">&nbsp;250</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2082: method entered 250 times.">        <span class="keyword">public</span> <span class="keyword">boolean</span> hasNext() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2083</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            <span class="comment">/*</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2084</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">              currentkey and currentValue are set here to ensure that next()</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2085</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">              returns normally if hasNext() returns true. This avoids</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2086</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">              surprises especially when final element is removed during</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2087</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">              traversal -- instead, we just ignore the removal during</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2088</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">              current traversal.</span></SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2089</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"><span class="comment">            */</span></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2090</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2090: statement executed 250 times.">&nbsp;250</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2090: statement executed 250 times.">            <span class="keyword">for</span> (;;) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2091</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2091: statement executed 380 times.">&nbsp;380</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2091: statement executed 380 times.">                <span class="keyword">if</span> (entry != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2092</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2092: statement executed 160 times.">&nbsp;160</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2092: statement executed 160 times.">                    Object v = entry.value;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2093</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2094</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2094: expression evaluated to true 160 times, false 0 times.">&nbsp;160</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2094: expression evaluated to true 160 times, false 0 times.">                    <span class="keyword">if</span> (v != <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2095</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2095: statement executed 160 times.">&nbsp;160</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2095: statement executed 160 times.">                        currentKey = entry.key;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2096</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2096: statement executed 160 times.">&nbsp;160</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2096: statement executed 160 times.">                        currentValue = v;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2097</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2098</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2098: statement executed 160 times.">&nbsp;160</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2098: statement executed 160 times.">                        <span class="keyword">return</span> <span class="keyword">true</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2099</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    } <span class="keyword">else</span> {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2100</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2100: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2100: statement not executed.">                        entry = entry.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2101</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2102</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2103</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2104</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2104: statement executed 220 times.">&nbsp;220</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2104: statement executed 220 times.">                <span class="keyword">while</span> ((entry == <span class="keyword">null</span>) &amp;&amp; (index &gt;= 0)) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2105</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2105: statement executed 2880 times.">&nbsp;2880</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2105: statement executed 2880 times.">                    entry = tab[index--];</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2106</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2107</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2108</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2108: statement executed 220 times.">&nbsp;220</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2108: statement executed 220 times.">                <span class="keyword">if</span> (entry == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2109</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2109: statement executed 90 times.">&nbsp;90</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2109: statement executed 90 times.">                    currentKey = currentValue = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2110</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2111</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2111: statement executed 90 times.">&nbsp;90</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2111: statement executed 90 times.">                    <span class="keyword">return</span> <span class="keyword">false</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2112</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">                }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2113</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2114</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2115</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2116</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2116: method entered 130 times.">&nbsp;130</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2116: method entered 130 times.">        <span class="keyword">public</span> Object next() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2117</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2117: expression evaluated to true 0 times, false 130 times.">&nbsp;130</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2117: expression evaluated to true 0 times, false 130 times.">            <span class="keyword">if</span> ((currentKey == <span class="keyword">null</span>) &amp;&amp; !hasNext()) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2118</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2118: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2118: statement not executed.">                <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2119</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2120</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2121</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2121: statement executed 130 times.">&nbsp;130</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2121: statement executed 130 times.">            Object result = returnValueOfNext();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2122</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2122: statement executed 130 times.">&nbsp;130</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2122: statement executed 130 times.">            lastReturned = entry;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2123</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2123: statement executed 130 times.">&nbsp;130</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2123: statement executed 130 times.">            currentKey = currentValue = <span class="keyword">null</span>;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2124</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2124: statement executed 130 times.">&nbsp;130</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2124: statement executed 130 times.">            entry = entry.next;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2125</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2126</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2126: statement executed 130 times.">&nbsp;130</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2126: statement executed 130 times.">            <span class="keyword">return</span> result;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2127</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2128</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2129</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2129: method entered 40 times.">&nbsp;40</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2129: method entered 40 times.">        <span class="keyword">public</span> Object nextElement() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2130</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2130: statement executed 40 times.">&nbsp;40</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2130: statement executed 40 times.">            <span class="keyword">return</span> next();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2131</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2132</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2133</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2133: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2133: method not entered.">        <span class="keyword">public</span> <span class="keyword">void</span> remove() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2134</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2134: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2134: statement not executed.">            <span class="keyword">if</span> (lastReturned == <span class="keyword">null</span>) {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2135</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2135: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2135: statement not executed.">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException();</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2136</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">            }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2137</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2138</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2138: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2138: statement not executed.">            AbstractConcurrentReadCache.<span class="keyword">this</span>.remove(lastReturned.key);</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2139</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2140</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2141</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2141: method not entered.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2141: method not entered.">        <span class="keyword">protected</span> Object returnValueOfNext() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2142</TD>
<TD align="right" class="coverageCountHilight">
<A title="Line 2142: statement not executed.">&nbsp;0</A>
</TD><TD class="srcCell"><SPAN class="srcLineHilight"><A title="Line 2142: statement not executed.">            <span class="keyword">return</span> entry;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2143</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2144</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2145</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
<A name="KeyIterator">&nbsp;2146</A></TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">class</span> KeyIterator <span class="keyword">extends</span> HashIterator {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2147</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2147: method entered 90 times.">&nbsp;90</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2147: method entered 90 times.">        <span class="keyword">protected</span> Object returnValueOfNext() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2148</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2148: statement executed 90 times.">&nbsp;90</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2148: statement executed 90 times.">            <span class="keyword">return</span> currentKey;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2149</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2150</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2151</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine"></SPAN></TD></TR><TR><TD align="right" class="lineCount">
<A name="ValueIterator">&nbsp;2152</A></TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    <span class="keyword">protected</span> <span class="keyword">class</span> ValueIterator <span class="keyword">extends</span> HashIterator {</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2153</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2153: method entered 40 times.">&nbsp;40</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2153: method entered 40 times.">        <span class="keyword">protected</span> Object returnValueOfNext() {</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCountHilight">
&nbsp;2154</TD>
<TD align="right" class="lineCountHilight">
<A title="Line 2154: statement executed 40 times.">&nbsp;40</A>
</TD><TD class="srcCell"><SPAN class="srcLine"><A title="Line 2154: statement executed 40 times.">            <span class="keyword">return</span> currentValue;</A>
</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2155</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">        }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2156</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">    }</SPAN></TD></TR><TR><TD align="right" class="lineCount">
&nbsp;2157</TD>
<TD align="right" class="coverageCount">
&nbsp;&nbsp;
</TD><TD class="srcCell"><SPAN class="srcLine">}</SPAN></TD></TR></TBODY></TABLE>
<TABLE width="100%"><TR><TD class="hbreak" colspan="6">&nbsp;</TD></TR>
<TR><TD class="footer" colspan="6">
<table>
<tr>
 <td><a target="_new" href="http://www.cenqua.com/clover?2T"><img alt="Clover" src="../../../../../img/logo.gif" border="0"></a></td><td nowrap><i>Report generated by </i><a target="_new" href="http://www.cenqua.com/clover?2T">Clover Code Coverage v1.3.9</a><i><BR>Sa Jul 7 2007 09:11:50 CEST</i>.</td>
<td>&nbsp;</td><td style="BORDER-LEFT: #9c9c9c 1px solid;">&nbsp;</td><td>Open Source License registered to the OpenSymphony Project. This license of Clover is provided to support the development of OpenSymphony only. </td>
</tr>
</table>
</td>
</tr></TABLE>

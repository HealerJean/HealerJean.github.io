---
title: Mysqlå­˜å‚¨è¡¨æƒ…ç¬¦å·
date: 2018-05-28 03:33:00
tags: 
- Database
category: 
- Database
description: Mysqlå­˜å‚¨è¡¨æƒ…ç¬¦å·
---
**å‰è¨€**     

 Githubï¼š[https://github.com/HealerJean](https://github.com/HealerJean)         

 åšå®¢ï¼š[http://blog.healerjean.com](http://HealerJean.github.io)            





# ä¸€ã€`mysql` æ— æ³•å­˜å‚¨è¡¨

## 1ã€é—®é¢˜å’ŒèƒŒæ™¯

> åšä¸»åœ¨å¼€å‘å¾®ä¿¡å…¬ä¼—å·è·å–ç”¨æˆ·å§“åçš„æ—¶å€™ï¼Œå‡ºç°äº†å¾ˆå¤§çš„é—®é¢˜ï¼Œä¸€å¼€å§‹åªæ˜¯è®¾è®¡çš„æ•°æ®åº“çš„ç¼–ç ä¸º`UTF-8`ï¼Œä½†æ˜¯åœ¨å½“ç”¨æˆ·çš„ `nickName` è®¾ç½®ä¸ºè¡¨æƒ…çš„ç¬¦å·çš„æ—¶å€™å°±ä¼šå‡ºé”™ï¼Œ       
>
> `utf8` æœ€å¤§çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒæ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ã€‚å®ƒå¯ä»¥ä½¿ç”¨ `1~4` ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œæ ¹æ®ä¸åŒçš„ç¬¦å·è€Œå˜åŒ–å­—èŠ‚é•¿åº¦ã€‚å…¶ä¸­ `Emoji` è¡¨æƒ…æ˜¯4ä¸ªå­—èŠ‚ï¼Œè€Œ`MySql` çš„ `utf8` ç¼–ç æœ€å¤š `3` ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥å¯¼è‡´äº†æ•°æ®æ’ä¸è¿›å»ã€‚


![WX20180607-154736@2x](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/WX20180607-154736@2x.png)

## 2ã€è§£å†³

> `mysql ä» `5.5.3` å¼€å§‹æ”¯æŒ  ` `utf8mb4`

```sql
-- åˆ›å»ºæ•°æ®åº“
create database duodian default character set utf8mb4 collate utf8mb4_unicode_ci ;

-- ä¿®æ”¹æ•°æ®åº“
ALTER DATABASE duodianyouhui CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ;

-- ä¿®æ”¹è¡¨
ALTER TABLE user_info CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ;

-- ä¿®æ”¹å­—æ®µ
alter table user_info modify column nickName varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
```





# äºŒã€å­˜å‚¨è¡¨æƒ…æ˜¯ä¹±ç 

> å‰é¢çš„å·²ç»ä»‹ç»äº†æ€ä¹ˆå­˜å‚¨ `Emoji,` ä½†æ˜¯æˆ‘ä»¬ä¼šå‘ç°å­˜åˆ°åº“é‡Œæ˜¯ä¹±ç çš„å½¢å¼ï¼Œä½†æ˜¯ä¹±ç åˆèƒ½æ€ä¹ˆæ ·çš„ï¼Œèƒ½ç”¨ä¸å°±è¡Œäº†ã€‚ä½†æ˜¯æˆ‘ä»¬éè®©ä»–ä¸æ˜¾ç¤ºä¹±ç æ€ä¹ˆåŠå‘¢ï¼Œæœ‰è§£å†³æ–¹å¼ã€‚è¿™é‡Œçš„è§£å†³æ–¹å¼ä¸ä»…é’ˆå¯¹ `utfbm4` é’ˆå¯¹ `utf8` ä¹Ÿæ˜¯ç®¡ç”¨çš„



## 1ã€`pom.xml`


```xml
<dependency>
     <groupId>com.vdurmont</groupId>
     <artifactId>emoji-java</artifactId>
    <version>3.2.0</version>
</dependency>

```



## 2ã€è¡¨æƒ… `string` è½¬åŒ–

> åŸç†ï¼šğŸ˜æˆ‘å¯ä»¥å­˜å‚¨ä¸º:smile:ï¼ŒğŸ˜­å­˜å‚¨ä¸º:cry:ï¼Œç­‰ç­‰ï¼Œå¯ä»¥è¿™æ ·æ˜ å°„èµ·æ¥ã€‚


```java
EmojiParser.parseToAliases(string); å°†è¡¨æƒ…ç¬¦å·è½¬ä¸ºå­—ç¬¦
EmojiParser.parseToUnicode(string); å°†å­—ç¬¦è½¬ä¸ºè¡¨æƒ…ç¬¦å·


@RequestMapping("/add/content")
public ResponseEntity insertContent(@RequestBody Content content) {
    String title = content.getTitle();
    String titles = EmojiParser.parseToAliases(title);
    content.setTitle(titles);
    Integer integer = emojiMapper.insertContent(content);
    if (integer == 1) {
        return ResponseEntity.ok().build();
    }
    return  ResponseEntity.badRequest().build();
}

@RequestMapping("/get/{id}")
public Content getById(@PathVariable("id") Integer id) {
    Content content = emojiMapper.selectById(id);
    String title = EmojiParser.parseToUnicode(content.getTitle());
    content.setTitle(title);
    if (content != null) {
        return content;
    }
    return  null;
}

```


![WX20180607-162928@2x](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/WX20180607-162928@2x.png)









![ContactAuthor](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/artical_bottom.jpg)


<!-- Gitalk è¯„è®º start  -->

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>Â 
<div id="gitalk-container"></div>Â    
 <script type="text/javascript">
    var gitalk = new Gitalk({
		clientID: `1d164cd85549874d0e3a`,
		clientSecret: `527c3d223d1e6608953e835b547061037d140355`,
		repo: `HealerJean.github.io`,
		owner: 'HealerJean',
		admin: ['HealerJean'],
		id: 'hggPtuojztScIcVZ',
    });
    gitalk.render('gitalk-container');
</script>Â 

<!-- Gitalk end -->


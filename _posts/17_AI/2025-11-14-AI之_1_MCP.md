---
title: AI之_1_MCP
date: 2025-11-14 00:00:00
tags: 
- AI
category: 
- AI
description: AI之_1_MCP
---

**前言**     

 Github：[https://github.com/HealerJean](https://github.com/HealerJean)         

 博客：[http://blog.healerjean.com](http://HealerJean.github.io)          



# 一、`MCP`

## 1、名词解释

| 名词  | 全称                               |                                                              |
| ----- | ---------------------------------- | ------------------------------------------------------------ |
| `LLM` | Large Language Model（大语言模型） | 指一类基于深度学习、特别是**Transformer 架构**训练而成的人工智能模型，能够理解和生成人类语言。它们通过在海量文本数据上进行自监督学习，掌握语法、事实知识、推理能力甚至一定程度的上下文理解。 |





## 2、`MCP` 是什么? 

`MCP`（`Model Context Protocol`，模型上下文协议）是 `Anthropic` 于 2024 年 11 月开源的 `AI` 通用通信协议。`MCP` 类似于“`AI` 领域的 `USB` 接口”，用于在大模型（`LLM`）和外部数据源（数据库、工具、`API`、开发环境等）间建立安全、双向、标准化的连接。



### 1）通用架构-三个角色的分工

> `MCP` 采用**宿主-客户端-服务器**三层架构，就像一家公司的组织结构   



**交互：**[`LLM/AI`应用] ──(`MCP`协议)──> [`MCP` `Server`] ──> [本地/远程工具/数据源]

**基本流程**：

1. `MCP` `Client` 构建并发送请求。
2. `MCP` `Server` 解析、验证请求并调用底层工具。
3. 工具执行后，`Server` 将结果封装并回传 `Client`。
4. `Client` 解析结果，整合进 `LLM` /`AI`应用输出。

![image-20251114144925057](/Users/zhangyujin1/Desktop/HealerJean/HCode/HealerJean.github.io/blogImages/image-20251114144925057.png)



#### a、宿主（`Host`）= **总经理**

> 是用户直接交互的应用程序，比如桌面端的AI工具。

- **是整个系统的决策中心，通常是用户或 `AI` 模型本身。**
- 决定“做什么”、“用什么工具”、“如何做”。
- 设置访问策略（比如哪些工具允许调用）。
- 示例：你在使用 `Claude` 时说：“帮我写一个 `Python` 函数并测试它。” → 这就是宿主发出的指令。



#### b、客户端（`Client`）= **秘书 / 协助员**

> 在`Host`和`MCP` `Server`之间保持连接，负责协议通信。

- 接收宿主指令，解析为 `MCP` 消息。
- 使用 `MCP` 协议与各个服务器通信。
- 实现“任务分解”与“结果汇总”。
- 示例：`IDE` 插件收到“运行代码”指令后，通过 `MCP` 发送请求给“`Python` 执行器”服务器。



#### c、服务器（`Server`）= **业务部门**

> 提供提供具体能力的服务单元。，供客户端访问。

- 支持标准化接口（如 `JSON over WebSocket`）。
- 可独立部署，无需知道其他服务器。
- 示例：
  - `MCP 服务器 A`：本地数据库查询器
  - `MCP 服务器 B`：代码解释器（支持 Python/JS）
  - `MCP 服务器 C`：调用外部 Web API（如天气、翻译）



## 3、场景案例-用 `MCP` 查询天气并生成报告

1. **宿主（`Claude`）** 说：“请查北京今天的天气，并写一份简报。”

2. 客户端解析该指令，判断需要：

   - 调用天气 `API`（服务器 `C`）
   - 写入文档（服务器 `A`）

3. 客户端发送 `MCP` 请求给服务器 `C`：

   ```
   {
     "action": "call_api",
     "method": "GET",
     "url": "https://api.weather.com/beijing"
   }
   ```

4. **服务器 `C`** 返回数据 → 客户端转发给宿主

5. **宿主** 综合信息，生成报告 → 客户端将其保存至文档服务器 `A`





# 二、`MCP` `Server `

> **`MCP` `Server` 的核心目标是：将外部工具能力抽象为标准化、可发现、可调用的服务单元，通过统一协议暴露给 AI 模型（`Host`），实现“模型逻辑”与“工具实现”的彻底解耦。**

- **能力标准化**：所有工具遵循 `MCP` 协议定义的输入/输出格式。
- **动态发现**：`Client` 可在运行时查询 `Server` 支持哪些工具（`list-tools`）。
- **安全隔离**：`Server`控制权限，防止模型越权调用。
- **异步支持**：支持长时间运行任务（如文件上传、训练作业）。



## 1、`MCP` `Tool`

- **每个 `Tool` 封装一个原子操作**（如 `get_weather`, `run_python_code`, `query_db`）。
- **必须声明元数据**：名称、描述、参数 `Schema`（`JSON` `Schema`）、是否可取消等。
- **通过 `MCP` 协议暴露**，而非直接暴露 `HTTP` 接口。
- **支持同步/异步执行**，返回结果或流式更新。



























![ContactAuthor](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/artical_bottom.jpg)



<!-- Gitalk 评论 start  -->

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> 
<div id="gitalk-container"></div>    
 <script type="text/javascript">
    var gitalk = new Gitalk({
		clientID: `1d164cd85549874d0e3a`,
		clientSecret: `527c3d223d1e6608953e835b547061037d140355`,
		repo: `HealerJean.github.io`,
		owner: 'HealerJean',
		admin: ['HealerJean'],
		id: 'AAAAAAAAAAAAAAAAAA',
    });
    gitalk.render('gitalk-container');
</script> 



<!-- Gitalk end -->




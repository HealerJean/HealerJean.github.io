---
title: 回顾消息队列笔记之使用场景
date: 2019-07-30 03:33:00
tags: 
- MQ
category: 
- MQ
description: 回顾消息队列笔记之使用场景
---

<!-- 

https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/
　　首行缩进

<font  clalss="healerColor" color="red" size="5" >     </font>

<font  clalss="healerSize"  size="5" >     </font>
-->




## 前言

#### [博主github](https://github.com/HealerJean)
#### [博主个人博客http://blog.healerjean.com](http://HealerJean.github.io)    



说起消息队列，肯定很多人听过，开发2年以上或多或少都会用过，博主使用队列也有一年多了，想着终于有一点点空闲做个笔记，争取这个月完成。  



先说下下消息队列的使用场景吧，不然不知道使用场景，怎么用都不知道。学习来的话肯定是非常蒙圈。

## 4大使用场景

### 1、秒杀

场景：如果是秒杀，顾名思义，就是非常快速，很多了来抢了，这个时候流量会猛增。而且很多请求都需要服务器处理逻辑， 为了防止服务器挂掉，我们在加入消息队列       



**为什么这么做就能缓解呢，多加几个服务器不就好了。**

多加几个服务器固然很好，但是上亿的访问，上亿的线程，怎么缓解，难道要一直买服务器吗，哈，相信没有公司愿意为了偶尔的秒杀买想象不到的服务器。所以呢，消息队列就能派上用场了    

1、用户请求来了后，服务器接收了，先写入消息队列。如果说超过消息队列的长度或者超过我们这次秒杀活动的最大数量，就抛弃用户或者告诉用户已经秒杀完毕了      

2、消息队列中已经有了用户的请求信息，我们可以慢慢处理     



![1564480177803](D:\study\HealerJean.github.io\blogImages\1564480177803.png)



### 2、解耦



#### 2.1、场景1：签到后，送积分    



从业务上来说，签到后我们一定要保证用户的签到正常，而积分的赠送我们可以延迟给用户传递，但是最终我们一定要保证签到后给积分，只是延迟而已。         

某一时刻积分服务不正常。不会影响到用户签到，专业积分服务即使报错了，我们后台可以自动重试，保证积分顺利送出，而不出现异常   



![1564479935871](D:\study\HealerJean.github.io\blogImages\1564479935871.png)







 



















<br/>
<br/>

<font  color="red" size="5" >     
感兴趣的，欢迎添加博主微信
 </font>

<br/>



哈，博主很乐意和各路好友交流，如果满意，请打赏博主任意金额，感兴趣的在微信转账的时候，备注您的微信或者其他联系方式。添加博主微信哦。    

请下方留言吧。可与博主自由讨论哦

|微信 | 微信公众号|支付宝|
|:-------:|:-------:|:------:|
| ![微信](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/weixin.jpg)|![微信公众号](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/my/qrcode_for_gh_a23c07a2da9e_258.jpg)|![支付宝](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/alpay.jpg) |



<!-- Gitalk 评论 start  -->

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> 
<div id="gitalk-container"></div>    
 <script type="text/javascript">
    var gitalk = new Gitalk({
		clientID: `1d164cd85549874d0e3a`,
		clientSecret: `527c3d223d1e6608953e835b547061037d140355`,
		repo: `HealerJean.github.io`,
		owner: 'HealerJean',
		admin: ['HealerJean'],
		id: 'AAAAAAAAAAAAAAA',
    });
    gitalk.render('gitalk-container');
</script> 

<!-- Gitalk end -->


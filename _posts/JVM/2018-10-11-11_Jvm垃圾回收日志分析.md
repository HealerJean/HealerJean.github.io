---
title:Jvm垃圾回收日志分析
date: 2018-10-11 03:33:00
tags: 
- JVM
category: 
- JVM
description: Jvm垃圾回收日志分析
---
<!-- image url 
https://raw.githubusercontent.com/HealerJean123/HealerJean123.github.io/master/blogImages
　　首行缩进
<font color="red">  </font>
-->

## 前言


新生代GC（Minor GC）：指发生在新生代的垃圾收集动作，因为Java对象大多都具备朝生夕灭的特性，所以Minor GC非常频繁，一般回收速度非常快。 <br/>

老年代GC（Major GC/Full GC）：指发生在老年代的GC，出现了Major GC，经常会伴随至少一次的Minor GC，Major GC的速度一般会比Minor GC慢10倍以上。

名称通过收集器而定

```java

1、这里的收集器是Parallel Scavenge。新生代为PSYoungGen，老年代为ParOldGen，Metaspace代表元空间（JDK 8中用来替代永久代PermGen）。<br/>  
 
 2、如果收集器为ParNew收集器，新生代为ParNew，Parallel New Generation 
 
3、如果收集器是Serial收集器，新生代为DefNew，Default New Generation<br/>


```



```java
   /**
     * 1、对象有限在Eden分配
     * 参数：-verbose:gc -Xms20M -Xmx20M -Xmn10M -XX:+PrintGCDetails -XX:SurvivorRatio=8
     * 输出gc日志， 堆内存初始化大小20M，堆内存最大20M，新生代大小10M，那么剩余分配给老年代就是10M， 输出GC的详细日志，
     * Eden的区域是一个survivor区域的8倍 就是说比为 8：1 也就是说新生代做多能后去到 8M
     */
    public static void testAllocation()
    {
        byte[] allocation1, allocation2, allocation3, allocation4;

        allocation1 = new byte[2 * _1MB];    //申请两兆
        allocation2 = new byte[2 * _1MB];
        allocation3 = new byte[2 * _1MB];
        //这里我们再eden已经申请了6M的空间，
        // 而实际上新生代大小是EDEN + 一个survivor= 9M  Eden=8M survivor两块分别1M（因为复制算法的原因）
        allocation4 = new byte[4 * _1MB];
    }
```


![WX20180409-190537@2x](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/WX20180409-190537@2x.png)

```

PSYoungGen 
第一个
表示GC前该新生代已使用容量6812K->GC后该新生代已使用容量832K（也就是Survivor中的存储的大小），后面圆括号里面的为该新生代的总容量9216K

第二个：
表示GC前Java堆已使用容量6812K->GC后Java堆已使用容量4936K，后面圆括号里面的19456K为Java堆总容量。


下面为垃圾收集器收集之后各个部分的存储状态
Heap
 PSYoungGen      total 9216K, used 7300K [0x00000007bf600000, 0x00000007c0000000, 0x00000007c0000000)
年轻代可用大小为 9216K= 9*1024 (eden+survivor=9，另一个只是起零时存储的作用) 


老年代Gc:
[PSYoungGen: 老年代GC前新生代已使用容量（survivor中存放的内存大小）->老年代GC后新生代已使用容量（新生代总容量）
[ParOldGen: 表示老年代前老年代已使用的容量->老年代GC后老年代已使用的容量（圆括号中的数值老年代总容量）



下面的heap表示的为Gc之后的内存分配情况

```


<br/><br/><br/>
如果满意，请打赏博主任意金额，感兴趣的请下方留言吧。可与博主自由讨论哦

|支付包 | 微信|微信公众号|
|:-------:|:-------:|:------:|
|![支付宝](https://raw.githubusercontent.com/HealerJean123/HealerJean123.github.io/master/assets/img/tctip/alpay.jpg) | ![微信](https://raw.githubusercontent.com/HealerJean123/HealerJean123.github.io/master/assets/img/tctip/weixin.jpg)|![微信公众号](https://raw.githubusercontent.com/HealerJean123/HealerJean123.github.io/master/assets/img/my/qrcode_for_gh_a23c07a2da9e_258.jpg)|




<!-- Gitalk 评论 start  -->

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> 
<div id="gitalk-container"></div>    
 <script type="text/javascript">
    var gitalk = new Gitalk({
		clientID: `1d164cd85549874d0e3a`,
		clientSecret: `527c3d223d1e6608953e835b547061037d140355`,
		repo: `HealerJean123.github.io`,
		owner: 'HealerJean123',
		admin: ['HealerJean123'],
		id: 'JGr01MDyOu56VQWX',
    });
    gitalk.render('gitalk-container');
</script> 

<!-- Gitalk end -->




create table flow_audit_task
(
  id              bigint(20) unsigned not null auto_increment comment '主键',
  task_type       varchar(64)         not null default '' comment '任务类型',
  task_data       varchar(3000)       not null default '' comment '任务数据Json格式',
  status          varchar(8)          not null default '' comment '审批状态',
  audit_message   varchar(128)        not null default '' comment '审批意见',
  audit_user      bigint(20) unsigned not null default '0' comment '执行人',
  audit_user_name varchar(64)         not null default '' comment '执行人真实名称',
  audit_time      datetime            not null default current_timestamp comment '执行时间',
  ref_file_uks    varchar(128)        not null default '' comment '审批附件Josn集合',
  create_time     datetime            not null default current_timestamp comment '创建时间',
  create_user     bigint(20) unsigned not null default '0' comment '创建人,发起人',
  create_name     varchar(64)         not null default '' comment '创建人名称',
  update_user     bigint(20) unsigned not null default 0 comment '更新人',
  update_name     varchar(64)         not null default '' comment '更新人名称',
  update_time     datetime            not null default current_timestamp on update current_timestamp comment '更新时间',
  primary key (id) using btree
) engine = innodb comment ='工作流-审核任务表';


create table flow_audit_default_config
(
  id        bigint(20) unsigned not null auto_increment comment '主键',
  task_type varchar(64)         not null default '' comment '任务类型',
  modify    tinyint(1)          not null comment '是否可以更改默认审批人',
  status    varchar(8)          not null default '' comment '状态10有效 99废弃',
  primary key (id) using btree
) engine = innodb comment ='工作流-默认审批是否可以修改';


create table flow_audit_default_user
(
  id                 bigint(20) unsigned not null auto_increment comment '主键',
  task_type          varchar(64)         not null default '' comment '任务类型',
  type               varchar(64)         not null default '' comment '抄送人、审批人类型',
  audit_user_type    varchar(64)         not null default '' comment '用户类型：角色或ID',
  audit_user_type_id bigint(20) unsigned not null default 0 comment '用户类型对用的id',
  sept               int(10) unsigned    not null default '0' comment '处理顺序，抄送人0',
  status             varchar(8)          not null default '' comment '审批状态',
  create_user        bigint(20) unsigned not null default 0 comment '创建人',
  create_name        varchar(64)         not null default '' comment '创建人名称',
  create_time        datetime            not null default current_timestamp comment '创建时间',
  update_user        bigint(20) unsigned not null default 0 comment '更新人',
  update_name        varchar(64)         not null default '' comment '更新人名称',
  update_time        datetime            not null default current_timestamp on update current_timestamp comment '更新时间',
  primary key (id) using btree
) engine = innodb comment ='工作流-默认审批人';



create table flow_audit_detail
(
  id                bigint(20) unsigned not null auto_increment comment '主键',
  ref_audit_task_id bigint(20) unsigned not null comment '审批任务Id',
  task_type         varchar(64)         not null default '' comment '任务类型',
  type               varchar(64)         not null default '' comment '抄送人、审批人类型',
  audit_user_type    varchar(64)         not null default '' comment '用户类型：角色或ID',
  audit_user_type_id bigint(20) unsigned not null default 0 comment '用户类型对用的id',
  sept              int(10) unsigned    not null default '0' comment '审批到了第几步，抄送人0',
  status            varchar(8)          not null default '' comment '审批状态',
  create_user       bigint(20) unsigned not null default 0 comment '创建人',
  create_name       varchar(64)         not null default '' comment '创建人名称',
  create_time       datetime            not null default current_timestamp comment '创建时间',
  update_user       bigint(20) unsigned not null default 0 comment '更新人',
  update_name       varchar(64)         not null default '' comment '更新人名称',
  update_time       datetime            not null default current_timestamp on update current_timestamp comment '更新时间',
  primary key (id) using btree
) engine = innodb comment ='工作流-审核详情';


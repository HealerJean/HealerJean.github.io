---
title: Git具备代码团队合作
date: 2017-02-20 03:33:00
tags: 
- GitHub
category: 
- GitHub
description: Git具备代码团队合作
---

<!-- 

https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/
　　首行缩进

<font  clalss="healerColor" color="red" size="5" >     </font>

<font  clalss="healerSize"  size="5" >     </font>
-->




## 前言

#### [博主github](https://github.com/HealerJean)
#### [博主个人博客http://blog.healerjean.com](http://HealerJean.github.io)    







## 1、开发常备



### 1.0、本地直接创建仓库



```shell
git init / git init --bare <仓库名>
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/HealerJean123/fas.git
git push origin master

```





### 1.1、创建分支  



**当我们初次创建项目点的时候，是没有分支的，我们需要先创建一个master分支出来，并且push到git上，这样才是真正创建了一个分支，否则，如果直接创建的两个不同的分支，将会没有同一个祖先，不能够进行合并**   



```shell
git checkout -b zhangyj
```



### 1.2、查看分支



```shell
git branch
```



### 1.3、切换分支 

```shell
git checkout zhangyj
```



### 1.4、提交全部更改到本地

```shell
git status

git add –A

git commit -m"add index.html"

```



### 1.5、从远程分支拉取代码



```shell
git pull origin develop  

develop为远程分支的名字
```



+ **拉取某个分支到本地**



```shell
git clone -b develop http://git.github.com/healerjean/test.git
```





### 1.6、推送到自己的远程分支



**不可以跨分支push 代码，比如现在是zhangyj分支，直接push develop是不会起作用的，我们需要网页发起请求（当我们没有权限操作master的时候），或者切换到其他分支，然后进行merge操作，如下**



```shell
git push origin zhangyj
```



+ **强制上传，一般不要使用，一般用在--hard回退版本之后的上传**



```shell
git –f push origin
```





### 1.7、合并到develop分支



#### 1.7.1、git网址操作



+ **打开git网址**

![1572835086522](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/1572835086522.png)



- **因为我们是使用的develop分支，默认提交的分支是master，所以这里要进行改变** 



![1572835099908](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/1572835099908.png)



![1572835104945](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/1572835104945.png)



![1572835158526](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/1572835158526.png)





![1572835164711](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/1572835164711.png)





#### 1.7.2、merge合并



+ **develop合并到zhangyj**



```shell
git merge develop

或者  

git merge develop zhangyj
```



#### 介绍 ：marge和 rebase



```shell
marge 特点：自动创建一个新的commit,当合并时遇到冲突，修改后重新commit即可

优点：将commit的实际情况进行记录，便于以后查看
缺点：由于每次merge会自动产生一个merge commit，所以在使用一些git 的GUI tools，如果commit频繁，这样会使得feature分支很杂乱，如果系统功能比较简单，这时可以考虑使用rebase来进行合并处理。

 

rebase 特点：将commit历史进行合并
 优点：项目历史比较简单，少了merge commit
 缺点：当发生冲突时不容易定位问题，因为re-write了history
 

https://blog.csdn.net/liuxiaoheng1992/article/details/79108233
https://blog.csdn.net/happyjume/article/details/87450696

```





## 2、必要命令



### 2.1、删除分支



#### 2.1.1、删除本地分支

```shell
git branch -D zhangzyj 
```



#### 2.1.2、删除远程分支

```shell
git push origin –delete zhangzyj
```



### 2.2、回退版本 --mix --hard --soft




#### 2.2.1、基本解释 



##### 2.2.1.1、基本概念



git reset 将当前分支的HEAD指向给定的版本，并根据模式的不同决定是否修改index和working tree。



+ HEAD: HEAD就是指向当前分支当前版本的游标
+ Index: Index即为暂存区，当你修改了你的git仓库里的一个文件时，这些变化一开始是unstaged状态，为了提交这些修改，你需要使用git add把它加入到index，使它成为staged状态。当你提交一个commit时，index里面的修改被提交。
+ working tree: 即当前的工作目录。



##### 2.2.1.1、git reset [<mode>] [<commit>]   常用的有三种模式



**常用的有三种模式，--soft, --mixed, --hard，如果没有给出<mode>则默认是--mixed**



##### 1、 --mixed  





![1572841357874](D:\study\HealerJean.github.io\blogImages\1572841357874.png)



**mixed修改了index，index中给定commit之后的修改被unstaged。如果现在执行git commit 将不会发生任何事，因为暂存区中没有修改，在提交之前需要再次执行git add**



##### 2、--soft





![1572841345953](D:\study\HealerJean.github.io\blogImages\1572841345953.png)



**使用`--soft`参数将会仅仅重置`HEAD`到制定的版本，不会修改index和working tree，本地文件的内容并没有发生变化，而index中仍然有最近一次提交的修改，这时执行git status会显示这些修改已经在再暂存区中了，无需再一次执行git add**





##### 3、--hard



使用`--hard`同时也会修改working tree，也就是当前的工作目录，那么最后一次提交的修改，包括本地文件的修改都会被清楚，彻底还原到上一次提交的状态且无法找回。所以在执行`reset --hard`之前一定要小心



#### 2.2.2、练习

##### 2.2.2.1.、回退某个文件到指定版本

```shell
git reset  fcd2093 a.jsp
```



##### 2.2.2.2、将本地的状态回退到和远程的一样 

```shell
git reset –hard origin/master  (也可以是develop分支) 
```



#### 2.2.2.3、回退到某个版本

```shell
git reset 057d
```



#### 2.2.2.4、真实使用



有时候，如果我们上传的文件太大，失败了，但是又已经commit了，很难受，又不能撤回，有时候又不知道到底是哪个文件太大了。所以需要了撤回到上次commit的状态。也就是说本地的修改可以通过git status显示出来


```shell
git log 查看comit 的id

git reset  fadsfadsfadsf123    (你运行gitcommit 之前的那个最新commit ID)

git status 就可以看到我们本地刚刚做的修改了哦 哈哈哈，这个才是真正牛逼的东西


```





### 2.3、查看日志



#### 2.3.1、查看整个日志记录



##### 2.3.1.1、git log

![1572837363209](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/1572837363209.png)



##### 2.3.1.2、git reflog

 

```shell
D:\workspace\scf-resurgence>git reflog

54c65741 (HEAD -> 20191016-1.0.1-SNAPSHOT) HEAD@{0}: rebase finished: returning to refs/heads/20191016-1.0.1-SNAPSHOT
54c65741 (HEAD -> 20191016-1.0.1-SNAPSHOT) HEAD@{1}: rebase: 信贷核心参数修改
38024757 HEAD@{2}: rebase: 信贷核心参数修改
387f8163 HEAD@{3}: rebase: dev环境配置
d0125a78 HEAD@{4}: rebase: 冲突修改
77107232 HEAD@{5}: rebase: 信贷核心字段修改
6c2ca94f HEAD@{6}: rebase: 年利率改为利率+利率类型
caebb6b9 HEAD@{7}: rebase: 信贷核心参数调整
8139dd8d HEAD@{8}: rebase: 日志补充

```



#### 2.4、查看某个版本的历史



+ **fileName相关的commit记录**



```shell
git log filename
```



+ **显示filename每次提交的diff**

```shell
git log -p filename
```



+ **只看某次提交中的某个文件变化，可以直接加上fileName**

```shell
git show commit-id filename
```





#### 2.4、彻底清除Git记录



##### 2.4.1、清除某个文件的所有历史记录



###### 第一步 

```shell
$ git filter-branch --force --index-filter 'git rm --cached --ignore-unmatch path-to-your-remove-file' --prune-empty --tag-name-filter cat -- --all


1、 path-to-your-remove-file 就是你要删除的文件的路径  如果不加/，则默认是相对路径 ，
2、如果你要删除的目标不是文件，而是文件夹，那么请在 `git rm --cached' 命令后面添加 -r 命令，表示递归的删除（子）文件夹和文件夹下的文件，类似于 `rm -rf` 命令。
3、如果文件或路径里有中文,可以使用通配符*号,sound/music_*.mp3， 这样就把sound目录下以music_开头的mp3文件都删除了.



```



如果你看到类似下面这样的, 就说明删除成功了:

```
Rewrite 48dc599c80e20527ed902928085e7861e6b3cbe6 (266/266)
# Ref 'refs/heads/master' was rewritten
```



###### 第二步  **推送我们修改后的repo**

以强制覆盖的方式推送你的repo,

```shell
git push origin master --f --all
```



######  第三步: 清理和回收空间

```shell
$ rm -rf .git/refs/original/

$ git reflog expire --expire=now --all

$ git gc --prune=now

Counting objects: 2437, done.
# Delta compression using up to 4 threads.
# Compressing objects: 100% (1378/1378), done.
# Writing objects: 100% (2437/2437), done.
# Total 2437 (delta 1461), reused 1802 (delta 1048)

$ git gc --aggressive --prune=now

Counting objects: 2437, done.
# Delta compression using up to 4 threads.
# Compressing objects: 100% (2426/2426), done.
# Writing objects: 100% (2437/2437), done.
# Total 2437 (delta 1483), reused 0 (delta 0)
```







## 3、Idea软件使用



### 3.1、将某个文件恢复到最近的版本

![1572837980928](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/1572837980928.png)



![1572837987994](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/1572837987994.png)







## 4、git、windos版本问题



#### 4.1、Windos文件不允许有空格


#### 4.2、文件名不能太长

##### 4.2.1、解决方案

```shell
git config --global core.longpaths true

```













<font  color="red" size="5" >     
感兴趣的，欢迎添加博主微信
 </font>       

   



哈，博主很乐意和各路好友交流，如果满意，请打赏博主任意金额，感兴趣的在微信转账的时候，备注您的微信或者其他联系方式。添加博主微信哦。    

请下方留言吧。可与博主自由讨论哦

|微信 | 微信公众号|支付宝|
|:-------:|:-------:|:------:|
| ![微信](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/weixin.jpg)|![微信公众号](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/my/qrcode_for_gh_a23c07a2da9e_258.jpg)|![支付宝](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/alpay.jpg) |



<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> 
<div id="gitalk-container"></div>    
 <script type="text/javascript">
    var gitalk = new Gitalk({
		clientID: `1d164cd85549874d0e3a`,
		clientSecret: `527c3d223d1e6608953e835b547061037d140355`,
		repo: `HealerJean.github.io`,
		owner: 'HealerJean',
		admin: ['HealerJean'],
		id: 'gBplJQGvh9IwXY7D',
    });
    gitalk.render('gitalk-container');
</script> 


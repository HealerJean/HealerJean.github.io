---
title: 本地缓存_之_jetcache
date: 2023-01-03 00:00:00
tags: 
- Java
category: 
- Java
description: 本地缓存_之_jetcache
---

**前言**     

 Github：[https://github.com/HealerJean](https://github.com/HealerJean)         

 博客：[http://blog.healerjean.com](http://HealerJean.github.io)          



# 一、简介

> `JetCache2.0` 的核心是 `com.alicp.jetcache.Cache`





# 二、创建Cache

## 1、`CacheManager`

> 使用 `CacheManager` 可以创建 `Cache`实例，`area` 和`name`相同的情况下，它和 `Cached` 注解使用同一个`Cache`实例。



### 1）`application-jetcache-config.yml `

```yaml
jetcache:
  # 计算距离，0表明不计算，敞开后定时在控制台输出缓存信息
  statIntervalMinutes: 15
  # 是否把cacheName作为长途缓存key前缀
  areaInCacheName: false
  # 本地缓存装备
  local:
    # default表明全部收效，也能够指定某个cacheName
    default:
      # 本地缓存类型，其他可选：caffeine/linkedhashmap
      type: linkedhashmap
      keyConvertor: fastjson
  # 长途缓存装备
  remote:
    default: # default表明全部收效，也能够指定某个cacheName
      type: redis
      # key转换器办法n
      keyConvertor: fastjson
      broadcastChannel: projectA
      # redis序列化办法
      valueEncoder: java
      valueDecoder: java
      # redis线程池
      poolConfig:
        minIdle: 5
        maxIdle: 20
        maxTotal: 50
      # redis地址与端口
      host: 127.0.0.1
      port: 6379
```

### 2）`JetCacheConfig`

```java
@Configuration
public class JetCacheConfig {

    @Bean
    public Cache<Long, Object> getUserCache(CacheManager cacheManager) {
        QuickConfig qc = QuickConfig.newBuilder("userCache:").expire(Duration.ofSeconds(3600))
                // 创建一个两级缓存
                .cacheType(CacheType.REMOTE)
                // 本地缓存元素个数限制，只对CacheType.LOCAL和CacheType.BOTH有效
                //.localLimit(100)
                // 本地缓存更新后，将在所有的节点中删去缓存，以保持强一致性
                // .syncLocal(false)
                .build();
        return cacheManager.getOrCreateCache(qc);
    }
}
```



















![ContactAuthor](https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/artical_bottom.jpg)



<!-- Gitalk 评论 start  -->

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> 
<div id="gitalk-container"></div>    
 <script type="text/javascript">
    var gitalk = new Gitalk({
		clientID: `1d164cd85549874d0e3a`,
		clientSecret: `527c3d223d1e6608953e835b547061037d140355`,
		repo: `HealerJean.github.io`,
		owner: 'HealerJean',
		admin: ['HealerJean'],
		id: 'A6mT0zdpYPKfIa8L',
    });
    gitalk.render('gitalk-container');
</script> 




<!-- Gitalk end -->



